!function initHammerheadClient(){!function(e){"use strict";var t,r,n,o,i,s={".js":[],".json":[],".css":[],".html":[]},a="function"==typeof require?require:null;return o=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},i=function(e,t,r){var n,o;if("function"==typeof e[t+r])return t+r;for(n=0;o=s[r][n];++n)if("function"==typeof e[t+o])return t+o;return null},t=function(e,n,s,a,l,u){var c,p,d,f,h,m;for(s=s.split(/[\\\/]/),c=s.pop(),"."!==c&&".."!==c||(s.push(c),c="");null!=(p=s.shift());)if(p&&"."!==p&&(".."===p?(e=n.pop(),u=u.slice(0,u.lastIndexOf("/"))):(n.push(e),e=e[p],u+="/"+p),!e))throw o(a);if(c&&"function"!=typeof e[c]&&(m=i(e,c,".js"),m||(m=i(e,c,".json")),m||(m=i(e,c,".css")),m||(m=i(e,c,".html")),m?c=m:2!==l&&"object"==typeof e[c]&&(n.push(e),e=e[c],u+="/"+c,c="")),!c)return 1!==l&&e[":mainpath:"]?t(e,n,e[":mainpath:"],a,1,u):t(e,n,"index",a,2,u);if(h=e[c],!h)throw o(a);return h.hasOwnProperty("module")?h.module.exports:(d={},h.module=f={exports:d,id:u+"/"+c},h.call(d,d,f,r(e,n,u)),f.exports)},n=function(r,n,i,s){var l,u=i,c=i.charAt(0),p=0;if("/"===c){if(u=u.slice(1),r=e["/"],!r){if(a)return a(i);throw o(i)}s="/",n=[]}else if("."!==c){if(l=u.split("/",1)[0],r=e[l],!r){if(a)return a(i);throw o(i)}s=l,n=[],u=u.slice(l.length+1),u||(u=r[":mainpath:"],u?p=1:(u="index",p=2))}return t(r,n,u,i,p,s)},(r=function(e,t,r){return function(o){return n(e,[].concat(t),o,r)}})(e,[],"")}({bowser:{":mainpath:":"./src/bowser.js",src:{"bowser.js":function(e,t,r){!function(e,r,n){"undefined"!=typeof t&&t.exports?t.exports=n():"function"==typeof define&&define.amd?define(r,n):e[r]=n()}(void 0,"bowser",function(){function e(e){function t(t){var r=e.match(t);return r&&r.length>1&&r[1]||""}function r(t){var r=e.match(t);return r&&r.length>1&&r[2]||""}var n,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),a=!i&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),u=!l&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),p=/silk/i.test(e),d=/sailfish/i.test(e),f=/tizen/i.test(e),h=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),y=(/SamsungBrowser/i.test(e),!m&&/windows/i.test(e)),g=!o&&!p&&/macintosh/i.test(e),v=!a&&!d&&!f&&!h&&/linux/i.test(e),E=t(/edge\/(\d+(\.\d+)?)/i),b=t(/version\/(\d+(\.\d+)?)/i),S=/tablet/i.test(e),w=!S&&/[^-]mobi/i.test(e),_=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:s,version:b||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:s,version:b||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:s,version:b||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:s,version:b||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(n={name:"Windows Phone",windowsphone:s},E?(n.msedge=s,n.version=E):(n.msie=s,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?n={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:s,version:E}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||b}:d?n={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=s)):p?n={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:s,version:b||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(n={name:"WebOS",webos:s,version:b||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=s)):/bada/i.test(e)?n={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:f?n={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?n={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?n={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:s},b&&(n.version=b)):o?(n={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},b&&(n.version=b)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||b}:{name:t(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=s):(n.name=n.name||"Webkit",n.webkit=s),!n.version&&b&&(n.version=b)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=s,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||n.msedge||!a&&!n.silk?n.windowsphone||n.msedge||!o?g?n.mac=s:_?n.xbox=s:y?n.windows=s:v&&(n.linux=s):(n[o]=s,n.ios=s):n.android=s;var x="";n.windowsphone?x=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(x=t(/os (\d+([_\s]\d+)*) like mac os x/i),x=x.replace(/[_\s]/g,".")):a?x=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?x=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?x=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?x=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(x=t(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(n.osversion=x);var T=x.split(".")[0];return S||u||"ipad"==o||a&&(3==T||T>=4&&!w)||n.silk?n.tablet=s:(w||"iphone"==o||"ipod"==o||a||l||n.blackberry||n.webos||n.bada)&&(n.mobile=s),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=s:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=s:n.x=s,n}function t(e){return e.split(".").length}function r(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function n(e){for(var n=Math.max(t(e[0]),t(e[1])),o=r(e,function(e){var o=n-t(e);return e+=new Array(o+1).join(".0"),r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--n>=0;){if(o[0][n]>o[1][n])return 1;if(o[0][n]!==o[1][n])return-1;if(0===n)return 0}}function o(t,r,o){var i=a;"string"==typeof r&&(o=r,r=void 0),void 0===r&&(r=!1),o&&(i=e(o));var s=""+i.version;for(var l in t)if(t.hasOwnProperty(l)&&i[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return n([s,t[l]])<0}return r}function i(e,t,r){return!o(e,t,r)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=n,a.check=i,a._detect=e,a})}}},pinkie:{"index.js":function(e,t,r){function n(){for(var e=0;e<w.length;e++)w[e][0](w[e][1]);w=[],m=!1}function o(e,t){w.push([e,t]),m||(m=!0,S(n,0))}function i(e,t){function r(e){l(t,e)}function n(e){c(t,e)}try{e(r,n)}catch(o){n(o)}}function s(e){var t=e.owner,r=t._state,n=t._data,o=e[r],i=e.then;if("function"==typeof o){r=v;try{n=o(n)}catch(s){c(i,s)}}a(i,n)||(r===v&&l(i,n),r===E&&c(i,n))}function a(e,t){var r;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var n=t.then;if("function"==typeof n)return n.call(t,function(n){r||(r=!0,t!==n?l(e,n):u(e,n))},function(t){r||(r=!0,c(e,t))}),!0}}catch(o){return r||c(e,o),!0}return!1}function l(e,t){e!==t&&a(e,t)||u(e,t)}function u(e,t){e._state===y&&(e._state=g,e._data=t,o(d,e))}function c(e,t){e._state===y&&(e._state=g,e._data=t,o(f,e))}function p(e){e._then=e._then.forEach(s)}function d(e){e._state=v,p(e)}function f(e){e._state=E,p(e)}function h(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof h==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],i(e,this)}var m,y="pending",g="settled",v="fulfilled",E="rejected",b=function(){},S="undefined"!=typeof setImmediate?setImmediate:setTimeout,w=[];h.prototype={constructor:h,_state:y,_then:null,_data:void 0,then:function(e,t){var r={owner:this,then:new this.constructor(b),fulfilled:e,rejected:t};return this._state===v||this._state===E?o(s,r):this._then.push(r),r.then},"catch":function(e){return this.then(null,e)}},h.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new h(function(t,r){function n(e){return s++,function(r){i[e]=r,--s||t(i)}}for(var o,i=[],s=0,a=0;a<e.length;a++)o=e[a],o&&"function"==typeof o.then?o.then(n(a),r):i[a]=o;s||t(i)})},h.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new h(function(t,r){for(var n,o=0;o<e.length;o++)n=e[o],n&&"function"==typeof n.then?n.then(t,r):t(n)})},h.resolve=function(e){return e&&"object"==typeof e&&e.constructor===h?e:new h(function(t){t(e)})},h.reject=function(e){return new h(function(t,r){r(e)})},t.exports=h}},"testcafe-hammerhead":{src:{client:{"dom-processor":{"client-dom-adapter.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../processing/dom/internal-properties"),u=o(l),c=r("../utils/event-emitter"),p=o(c),d=r("../../processing/dom/base-dom-adapter"),f=o(d),h=r("../sandbox/native-methods"),m=o(h),y=r("../settings"),g=o(y),v=r("../utils/destination-location"),E=r("../utils/url"),b=r("../utils/dom"),S=n(b),w=r("../utils/fast-apply"),_=o(w),x=r("../sandbox/node/document/writer"),T=r("../sandbox/windows-storage"),C=function(e){function t(){return i(this,t),s(this,e.apply(this,arguments))}return a(t,e),t.prototype.removeAttr=function(e,t){return m["default"].removeAttribute.call(e,t)},t.prototype.getAttr=function(e,t){return m["default"].getAttribute.call(e,t)},t.prototype.hasAttr=function(e,t){return e.hasAttribute(t)},t.prototype.isSVGElement=function(e){return S.isSVGElement(e)},t.prototype.getClassName=function(e){return e.className},t.prototype.hasEventHandler=function(e){for(var t=m["default"].elementAttributesGetter.call(e),r=0;r<t.length;r++){var n=t[r];if(this.EVENTS.indexOf(n.name)!==-1)return!0}return!1},t.prototype.getTagName=function(e){return S.getTagName(e)},t.prototype.setAttr=function(e,t,r){return m["default"].setAttribute.call(e,t,r)},t.prototype.setScriptContent=function(e,t){m["default"].scriptTextSetter.call(e,t)},t.prototype.getScriptContent=function(e){return m["default"].scriptTextGetter.call(e)},t.prototype.getStyleContent=function(e){return m["default"].elementInnerHTMLGetter.call(e)},t.prototype.setStyleContent=function(e,t){m["default"].elementInnerHTMLSetter.call(e,t)},t.prototype.needToProcessContent=function(e){return!(0,x.hasUnclosedElementFlag)(e)},t.prototype.needToProcessUrl=function(){return!0},t.prototype.hasIframeParent=function(e){try{return e[u["default"].processedContext]?window.top!==e[u["default"].processedContext]:window.top.document!==S.findDocument(e)}catch(t){return!0}},t.prototype.attachEventEmitter=function(e){var t=new p["default"];e.on=function(e,r){return t.on(e,r)},e.off=function(e,r){return t.off(e,r)},e.emit=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,_["default"])(t,"emit",r)}},t.prototype.getCrossDomainPort=function(){return g["default"].get().crossDomainProxyPort},t.prototype.getProxyUrl=function(){return E.getProxyUrl.apply(null,arguments)},t.prototype.isTopParentIframe=function(e){var t=e[u["default"].processedContext];return t&&window.top===t.parent},t.prototype.sameOriginCheck=function(e,t){return(0,v.sameOriginCheck)(e,t)},t.prototype.isExistingTarget=function(e){return!!(0,T.findByName)(e)},t}(f["default"]);e["default"]=C,t.exports=e["default"]},"index.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("./client-dom-adapter"),i=n(o),s=r("../../processing/dom/index"),a=n(s);e["default"]=new a["default"](new i["default"]),t.exports=e["default"]}},"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=r("pinkie"),a=o(s),l=r("./sandbox"),u=o(l),c=r("./utils/event-emitter"),p=o(c),d=r("./sandbox/xhr"),f=o(d),h=r("./settings"),m=o(h),y=r("./transport"),g=o(y),v=r("./json"),E=n(v),b=r("./utils/browser"),S=n(b),w=r("./utils/dom"),_=n(w),x=r("./utils/event"),T=n(x),C=r("./utils/types"),A=n(C),P=r("./utils/position"),O=n(P),I=r("./utils/style"),M=n(I),N=r("../utils/string-trim"),D=o(N),L=r("./utils/url"),j=n(L),k=r("./utils/feature-detection"),R=n(k),U=r("./utils/html"),H=n(U),F=r("./sandbox/native-methods"),B=o(F),W=r("../processing/script"),G=r("../processing/script/header"),V=r("../processing/style"),q=r("./utils/is-jquery-object"),K=o(q),X=r("./utils/extend"),$=o(X),Y=r("../processing/dom/internal-properties"),z=o(Y),Q=r("./page-navigation-watch"),J=o(Q),Z=r("./dom-processor"),ee=o(Z),te=function(){function e(){var t=this;i(this,e),this.win=null,this.sandbox=new u["default"],this.pageNavigationWatch=new J["default"](this.sandbox.event,this.sandbox.codeInstrumentation,this.sandbox.node.element),this.EVENTS={beforeFormSubmit:this.sandbox.node.element.BEFORE_FORM_SUBMIT_EVENT,beforeBeforeUnload:this.sandbox.event.unload.BEFORE_BEFORE_UNLOAD_EVENT,beforeUnload:this.sandbox.event.unload.BEFORE_UNLOAD_EVENT,unload:this.sandbox.event.unload.UNLOAD_EVENT,bodyCreated:this.sandbox.node.mutation.BODY_CREATED_EVENT,documentCleaned:this.sandbox.node.mutation.DOCUMENT_CLEANED_EVENT,uncaughtJsError:this.sandbox.node.win.UNCAUGHT_JS_ERROR_EVENT,unhandledRejection:this.sandbox.node.win.UNHANDLED_REJECTION_EVENT,startFileUploading:this.sandbox.upload.START_FILE_UPLOADING_EVENT,endFileUploading:this.sandbox.upload.END_FILE_UPLOADING_EVENT,evalIframeScript:this.sandbox.iframe.EVAL_EXTERNAL_SCRIPT_EVENT,xhrCompleted:this.sandbox.xhr.XHR_COMPLETED_EVENT,xhrError:this.sandbox.xhr.XHR_ERROR_EVENT,beforeXhrSend:this.sandbox.xhr.BEFORE_XHR_SEND_EVENT,fetchSent:this.sandbox.fetch.FETCH_REQUEST_SENT_EVENT,pageNavigationTriggered:this.pageNavigationWatch.PAGE_NAVIGATION_TRIGGERED_EVENT,scriptElementAdded:this.sandbox.node.element.SCRIPT_ELEMENT_ADDED_EVENT,consoleMethCalled:this.sandbox.console.CONSOLE_METH_CALLED_EVENT},this.PROCESSING_COMMENTS={stylesheetStart:V.STYLESHEET_PROCESSING_START_COMMENT,stylesheetEnd:V.STYLESHEET_PROCESSING_END_COMMENT,scriptStart:G.SCRIPT_PROCESSING_START_COMMENT,scriptEndHeader:G.SCRIPT_PROCESSING_END_HEADER_COMMENT,scriptEnd:G.SCRIPT_PROCESSING_END_COMMENT},this.EventEmitter=p["default"],this.doUpload=function(e,r){return t.sandbox.upload.doUpload(e,r)},this.createNativeXHR=f["default"].createNativeXHR,this.processScript=W.processScript,this.get=r,this.Promise=a["default"],this.json=E,this.transport=g["default"],this.nativeMethods=this.sandbox.nativeMethods,this.shadowUI=this.sandbox.shadowUI,this.storages=this.sandbox.storageSandbox,this.eventSandbox={listeners:this.sandbox.event.listeners,hover:this.sandbox.event.hover,focusBlur:this.sandbox.event.focusBlur,elementEditingWatcher:this.sandbox.event.elementEditingWatcher,eventSimulator:this.sandbox.event.eventSimulator,selection:this.sandbox.event.selection,message:this.sandbox.event.message,timers:this.sandbox.event.timers,DataTransfer:this.sandbox.event.DataTransfer,DragDataStore:this.sandbox.event.DragDataStore},this.utils={browser:S,dom:_,event:T,position:O,style:M,types:A,trim:D["default"],isJQueryObj:K["default"],extend:$["default"],html:H,url:j,featureDetection:R}}return e.prototype._getEventOwner=function(e){switch(e){case this.EVENTS.pageNavigationTriggered:return this.pageNavigationWatch;case this.EVENTS.beforeUnload:case this.EVENTS.beforeBeforeUnload:case this.EVENTS.unload:return this.sandbox.event.unload;case this.EVENTS.bodyCreated:case this.EVENTS.documentCleaned:return this.sandbox.node.mutation;case this.EVENTS.uncaughtJsError:case this.EVENTS.unhandledRejection:return this.sandbox.node.win;case this.EVENTS.startFileUploading:case this.EVENTS.endFileUploading:return this.sandbox.upload;case this.EVENTS.evalIframeScript:return this.sandbox.iframe;case this.EVENTS.xhrCompleted:case this.EVENTS.xhrError:case this.EVENTS.beforeXhrSend:return this.sandbox.xhr;case this.EVENTS.beforeFormSubmit:case this.EVENTS.scriptElementAdded:return this.sandbox.node.element;case this.EVENTS.fetchSent:return this.sandbox.fetch;case this.EVENTS.consoleMethCalled:return this.sandbox.console;default:return null}},e._cleanLocalStorageServiceData=function(e,t){B["default"].winLocalStorageGetter.call(t).removeItem(e)},e.prototype.on=function(e,t){var r=this._getEventOwner(e);r&&r.on(e,t)},e.prototype.off=function(e,t){var r=this._getEventOwner(e);r&&r.off(e,t)},e.prototype.navigateTo=function(e){var t=j.getNavigationUrl(e,this.win);t&&(this.win.location=t)},e.prototype.start=function(t,r){this.win=r||window,t&&(m["default"].set(t),t.isFirstPageLoad&&e._cleanLocalStorageServiceData(t.sessionId,this.win),ee["default"].forceProxySrcForImage=!!t.forceProxySrcForImage),this.sandbox.attach(this.win),this.pageNavigationWatch.start()},e}(),re=new te;B["default"].objectDefineProperty.call(window.Object,window,z["default"].hammerhead,{value:re,configurable:!0}),e["default"]=re,t.exports=e["default"]},"json.js":function(exports,module,require){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r=void 0,n=void 0,o=void 0,i=void 0,s=gap,a=void 0,l=t[e];if(l&&"object"==typeof l){var u=Object.prototype.toString.apply(l);"[object String]"===u||"[object Number]"===u||"[object Boolean]"===u?l=l.valueOf():"[object Date]"===u&&(l=isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null)}switch(typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,r=0;r<i;r+=1)a[r]=str(r,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&a.push(quote(n)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}function isDOMNode(e){return"object"==typeof Node?e instanceof Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function isSerializable(e){if(e){if("function"==typeof e||(0,_isJqueryObject2["default"])(e)||isDOMNode(e))return!1;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t)&&!isSerializable(e[t]))return!1}return!0}function stringify(e){return gap="",indent="",str("",{"":e})}function parse(text,reviver){function walk(e,t){var r=void 0,n=void 0,o=e[t];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(e,t,o)}var j=void 0;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}exports.__esModule=!0,exports.isSerializable=void 0,exports.stringify=stringify,exports.parse=parse;var _isJqueryObject=require("./utils/is-jquery-object"),_isJqueryObject2=_interopRequireDefault(_isJqueryObject),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap=void 0,indent=void 0,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};exports.isSerializable=isSerializable},"page-navigation-watch.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("./utils/event-emitter"),u=o(l),c=r("../utils/url"),p=r("./utils/url"),d=r("./utils/dom"),f=r("./sandbox/windows-storage"),h=n(f),m=r("../processing/dom"),y=r("./utils/next-tick"),g=o(y),v=r("./sandbox/native-methods"),E=o(v),b=function(e){function t(r,n,o){i(this,t);var a=s(this,e.call(this));return a.PAGE_NAVIGATION_TRIGGERED_EVENT="hammerhead|event|page-navigation-triggered",a.lastLocationValue=window.location.toString(),a.codeInstrumentation=n,a.eventSandbox=r,a.elementSandbox=o,a}return a(t,e),t.prototype._formWatch=function(e,r){var n=function(e){var r=t._getTargetWindow(e);t._onNavigationTriggeredInWindow(r,E["default"].formActionGetter.call(e))};e.on(e.BEFORE_FORM_SUBMIT_EVENT,function(e){return n(e.form)}),r.listeners.initElementListening(window,["submit"]),r.listeners.addInternalEventListener(window,["submit"],function(e){var t=!1;if((0,d.isFormElement)(e.target)){var o=function(r){t=t||r===e};r.on(r.EVENT_PREVENTED_EVENT,o),(0,g["default"])().then(function(){r.off(r.EVENT_PREVENTED_EVENT,o),e.defaultPrevented||t||n(e.target)})}})},t._getTargetWindow=function(e){var t=E["default"].getAttribute.call(e,(0,m.getStoredAttrName)("target"))||E["default"].getAttribute.call(e,"target")||"_self";switch(t){case"_top":return window.top;case"_parent":return window.parent;case"_self":return window;default:return h.findByName(t)}},t.prototype._linkWatch=function(e){e.listeners.initElementListening(window,["click"]),e.listeners.addInternalEventListener(window,["click"],function(r){var n=(0,d.isAnchorElement)(r.target)?r.target:(0,d.closest)(r.target,"a");if(n&&!(0,d.isShadowUIElement)(n)){var o=!1,i=t._getTargetWindow(n),s=E["default"].anchorHrefGetter.call(n),a=function(e){o=o||e===r};e.on(e.EVENT_PREVENTED_EVENT,a),(0,g["default"])().then(function(){e.off(e.EVENT_PREVENTED_EVENT,a),r.defaultPrevented||o||t._onNavigationTriggeredInWindow(i,s)})}})},t.prototype._locationWatch=function(e){var t=this,r=e.locationAccessorsInstrumentation,n=function(e){return t.onNavigationTriggered(e)};r.on(r.LOCATION_CHANGED_EVENT,n)},t._onNavigationTriggeredInWindow=function(e,t){try{e["%hammerhead%"].pageNavigationWatch.onNavigationTriggered(t)}catch(r){}},t.prototype.onNavigationTriggered=function(e){var t=this.lastLocationValue;this.lastLocationValue=window.location.toString(),e!==t&&("#"===e.charAt(0)||(0,p.isChangedOnlyHash)(t,e))||(0,m.isJsProtocol)(e)||this.emit(this.PAGE_NAVIGATION_TRIGGERED_EVENT,(0,c.parseProxyUrl)(e).destUrl)},t.prototype.start=function(){this._locationWatch(this.codeInstrumentation),this._linkWatch(this.eventSandbox),this._formWatch(this.elementSandbox,this.eventSandbox)},t}(u["default"]);e["default"]=b,t.exports=e["default"]},sandbox:{"backup.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){for(var r=e.length-1;r>=0;r--)try{if(e[r].iframe===t)return e[r]}catch(n){e.splice(r,1)}}function i(e,t){var r=(0,a.getTopSameDomainWindow)(e),n=e!==r?(0,a.getFrameElement)(e):null,i=r[c];i||(i=[],u["default"].objectDefineProperty.call(e.Object,r,c,{value:i}));var s=o(i,n);s?s.sandbox=t:i.push({iframe:n,sandbox:t})}function s(e){var t=(0,a.getTopSameDomainWindow)(e),r=t[c],n=e!==t?e.frameElement:null;if(r){var i=o(r,n);return i?i.sandbox:null}return null}e.__esModule=!0,e.create=i,e.get=s;var a=r("../utils/dom"),l=r("./native-methods"),u=n(l),c="hammerhead|sandbox-backup"},"base.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("../utils/event-emitter"),l=n(a),u=r("./native-methods"),c=n(u),p=r("../utils/dom"),d=r("../../processing/dom/internal-properties"),f=n(d),h=function(e){function t(){o(this,t);var r=i(this,e.call(this));return r.window=null,r.nativeMethods=c["default"],r}return s(t,e),t.prototype.isDeactivated=function(){try{if(this.document.body,this.window[f["default"].hammerhead]){var e=(0,p.getFrameElement)(this.window);return e&&!(0,p.isElementInDocument)(e,(0,p.findDocument)(e))}}catch(t){}return!0},t.prototype.attach=function(e,t){this.window=e,this.document=t||e.document},t}(l["default"]);e["default"]=h,t.exports=e["default"]},"code-instrumentation":{"index.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("../base"),l=n(a),u=r("./properties"),c=n(u),p=r("./location"),d=n(p),f=r("./methods"),h=n(f),m=r("../../../processing/script"),y=r("../../../processing/script/instruction"),g=n(y),v=r("../../sandbox/native-methods"),E=n(v),b=r("../../utils/html"),S=function(e){function t(r,n,s){o(this,t);var a=i(this,e.call(this));return a.methodCallInstrumentation=new h["default"](r.message),a.locationAccessorsInstrumentation=new d["default"](s),a.propertyAccessorsInstrumentation=new c["default"](n),a}return s(t,e),t.prototype.attach=function(t){e.prototype.attach.call(this,t),this.methodCallInstrumentation.attach(t),this.locationAccessorsInstrumentation.attach(t),this.elementPropertyAccessors=this.propertyAccessorsInstrumentation.attach(t),E["default"].objectDefineProperty.call(t.Object,t,g["default"].getEval,{value:function(e){return e!==t.eval?e:function(t){return"string"==typeof t&&(t=(0,m.processScript)(t)),e(t)}},configurable:!0}),E["default"].objectDefineProperty.call(t.Object,t,g["default"].processScript,{value:function(e,t){if(t){if(e&&e.length&&"string"==typeof e[0]){for(var r=[(0,m.processScript)(e[0],!1)],n=1;n<e.length;n++)r.push(e[n]);return r}}else if("string"==typeof e)return(0,m.processScript)(e,!1);return e},configurable:!0}),E["default"].objectDefineProperty.call(t.Object,t,g["default"].processHtml,{value:function(e,t){return"string"==typeof t&&(t=(0,b.processHtml)("<html><body>"+t+"</body></html>",{processedContext:e})),t},configurable:!0})},t}(l["default"]);e["default"]=S,t.exports=e["default"]},location:{"ancestor-origins-wrapper.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var r=this,n=e.location.ancestorOrigins,o=e;a["default"].objectDefineProperty(this,"_nativeLength",{value:n.length,configurable:!0});for(var s=function(e){o=o.parent;var n=u["default"].getLocationWrapper(o),s=n===o.location;i(r,e,s?"":n.origin),s&&t(o,function(t){i(r,e,t)})},l=0;l<this._nativeLength;l++)s(l)}function i(e,t,r){e[t]=r,a["default"].objectDefineProperty(e,t,{value:r,configurable:!0,enumerable:!0})}e.__esModule=!0,e["default"]=o;var s=r("../../native-methods"),a=n(s),l=r("./index"),u=n(l);o.prototype=a["default"].objectCreate(DOMStringList.prototype),o.prototype.item=function(e){return this[e]},o.prototype.contains=function(e){"string"!=typeof e&&(e=String(e));for(var t=0;t<this._nativeLength;t++)if(this[t]===e)return!0;return!1},a["default"].objectDefineProperty(o.prototype,"length",{configurable:!0,enumerable:!0,get:function(){return this._nativeLength}}),t.exports=e["default"]},"index.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("./wrapper"),l=n(a),u=r("../../base"),c=n(u),p=r("../../../utils/dom"),d=r("../../../../processing/script/instruction"),f=n(d),h=r("../../native-methods"),m=n(h),y="hammerhead|location-wrapper",g=function(e){function t(r){o(this,t);var n=i(this,e.call(this));return n.LOCATION_CHANGED_EVENT="hammerhead|event|location-changed",n.messageSandbox=r,n.locationChangedEventCallback=function(e){return n.emit(n.LOCATION_CHANGED_EVENT,e)},n}return s(t,e),t.isLocationWrapper=function(e){return e instanceof l["default"]},t.getLocationWrapper=function(e){try{return e[y]}catch(t){return e.location}},t.prototype.attach=function(t){e.prototype.attach.call(this,t);var r=new l["default"](t,this.messageSandbox,this.locationChangedEventCallback);m["default"].objectDefineProperty.call(t.Object,t,y,{value:r,configurable:!0}),m["default"].objectDefineProperty.call(t.Object,t.document,y,{value:r,configurable:!0}),m["default"].objectDefineProperty.call(t.Object,t,f["default"].getLocation,{value:function(e){return(0,p.isLocation)(e)?r:e},configurable:!0}),m["default"].objectDefineProperty.call(t.Object,t,f["default"].setLocation,{value:function(e,t){return(0,p.isLocation)(e)&&"string"==typeof t?(r.href=t,t):null},configurable:!0})},t}(c["default"]);e["default"]=g,t.exports=e["default"]},"wrapper.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){try{return e.location.toString()}catch(t){return}}e.__esModule=!0;var s=r("../../../utils/destination-location"),a=r("../../../utils/url"),l=r("../../../../utils/url"),u=r("../../native-methods"),c=n(u),p=r("../../../utils/url-resolver"),d=n(p),f=r("../../../../processing/dom/index"),h=r("./ancestor-origins-wrapper"),m=n(h),y=r("../../../utils/integer-id-generator"),g=n(y),v=r("../../../utils/property-overriding"),E="hammerhead|command|get-origin",b="hammerhead|command|origin-received",S=function w(e,t,r){var n=this;o(this,w);var u=(0,a.parseProxyUrl)(i(e)),p=u?u.resourceType:"",h=(0,a.parseResourceType)(p),y=c["default"].objectHasOwnProperty.call(e.Location.prototype,"href"),S=y?e.Location.prototype:e.location,_={};h.isIframe|=e!==e.top;var x=(0,l.getResourceTypeString)({isIframe:h.isIframe,isForm:h.isForm}),T=function(){if(e!==e.top&&"about:blank"===e.location.href)return"about:blank";var t=(0,s.get)(),r=d["default"].getResolverElement(e.document);c["default"].anchorHrefSetter.call(r,t);var n=c["default"].anchorHrefGetter.call(r);return(0,l.ensureTrailingSlash)(n,t)},C=function(t){if("string"!=typeof t&&(t=String(t)),t=(0,l.prepareUrl)(t),(0,f.isJsProtocol)(t))return(0,f.processJsAttrValue)(t,{isJsProtocol:!0,isEventAttr:!1});var r=i(e),n=null;if(e!==e.parent){var o=i(e.parent),s=(0,a.parseProxyUrl)(o);if(s&&s.proxy){var u=s.proxy.port;n=(0,l.sameOriginCheck)(o,t)?u:(0,a.getCrossDomainProxyPort)(u)}}var c=r&&(0,a.isChangedOnlyHash)(r,t),d=c?p:x;return(0,a.getProxyUrl)(t,{resourceType:d,proxyPort:n})};if(_.href=(0,v.createOverriddenDescriptor)(S,"href",{getter:T,setter:function(t){var n=C(t);return e.location.href=n,r(n),t}}),_.search=(0,v.createOverriddenDescriptor)(S,"search",{getter:function(){return e.location.search},setter:function(t){var n=(0,a.changeDestUrlPart)(e.location.toString(),c["default"].anchorSearchSetter,t,x);return e.location=n,r(n),t}}),_.origin=(0,v.createOverriddenDescriptor)(S,"origin",{getter:function(){return(0,l.getDomain)((0,s.getParsed)())},setter:function(e){return e}}),_.hash=(0,v.createOverriddenDescriptor)(S,"hash",{getter:function(){return e.location.hash},setter:function(t){return e.location.hash=t,t}}),e.location.ancestorOrigins){var A=c["default"].objectCreate(null),P=(0,g["default"])(),O=function(e,r){var n=P.increment();A[n]=r,t.sendServiceMsg({id:n,cmd:E},e)};t.on(t.SERVICE_MSG_RECEIVED_EVENT,function(e){var r=e.message,o=e.source;if(r.cmd===E)t.sendServiceMsg({id:r.id,cmd:b,origin:n.origin},o);else if(r.cmd===b){var i=A[r.id];i&&i(r.origin)}});var I=new m["default"](e,O);_.ancestorOrigins=(0,v.createOverriddenDescriptor)(S,"ancestorOrigins",{getter:function(){return I}})}var M=function(t,n){_[t]=(0,v.createOverriddenDescriptor)(S,t,{getter:function(){return(0,s.getParsed)()[t]},setter:function(t){var o=(0,a.changeDestUrlPart)(e.location.toString(),n,t,x);return e.location=o,r(o),t}})};M("port",c["default"].anchorPortSetter),M("host",c["default"].anchorHostSetter),M("hostname",c["default"].anchorHostnameSetter),M("pathname",c["default"].anchorPathnameSetter),M("protocol",c["default"].anchorProtocolSetter),_.assign=(0,v.createOverriddenDescriptor)(S,"assign",{value:function(t){var n=C(t),o=e.location.assign(n);return r(n),o}}),_.replace=(0,v.createOverriddenDescriptor)(S,"replace",{value:function(t){var n=C(t),o=e.location.replace(n);return r(n),o}}),_.reload=(0,v.createOverriddenDescriptor)(S,"reload",{value:function(t){var n=e.location.reload(t);return r(e.location.toString()),n}}),_.toString=(0,v.createOverriddenDescriptor)(S,"toString",{value:T}),!y&&c["default"].objectHasOwnProperty.call(e.location,"valueOf")&&(_.valueOf=(0,v.createOverriddenDescriptor)(S,"valueOf",{value:function(){return n}})),c["default"].objectDefineProperties(this,_)};e["default"]=S,t.exports=e["default"]}},"methods.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../base"),u=o(l),c=r("../../../processing/script/instruction"),p=o(c),d=r("../../../processing/script/instrumented"),f=r("../../utils/dom"),h=r("../../utils/fast-apply"),m=o(h),y=r("../../utils/types"),g=n(y),v=r("../../utils/url"),E=r("../native-methods"),b=o(E),S=function(e){function t(r){i(this,t);var n=s(this,e.call(this));return n.messageSandbox=r,n.methodWrappers={postMessage:{condition:f.isWindow,method:function(e,t){return r.postMessage(e,t)}},replace:{condition:f.isLocation,method:function(e,r){return e.replace((0,v.getProxyUrl)(r[0],{resourceType:t._getLocationResourceType(e)}))}},assign:{condition:f.isLocation,method:function(e,r){return e.assign((0,v.getProxyUrl)(r[0],{resourceType:t._getLocationResourceType(e)}))}}},n}return a(t,e),t._error=function(e){throw new Error(e)},t._getLocationResourceType=function(e){return window.top.location===e?null:(0,v.stringifyResourceType)({isIframe:!0})},t._isPostMessageFn=function(e,t){return e.postMessage===e.postMessage?e.postMessage===t:t&&"function"==typeof t.toString&&t.toString()===e.postMessage.toString()},t.prototype.attach=function(r){var n=this;e.prototype.attach.call(this,r),b["default"].objectDefineProperty.call(r.Object,r,p["default"].callMethod,{value:function(e,r,o){return g.isNullOrUndefined(e)&&t._error("Cannot call method '"+r+"' of "+g.inaccessibleTypeToStr(e)),"function"!=typeof e[r]&&t._error("'"+r+"' is not a function"),"string"==typeof r&&(0,d.shouldInstrumentMethod)(r)&&n.methodWrappers[r].condition(e)?n.methodWrappers[r].method(e,o):(0,m["default"])(e,r,o)},configurable:!0});var o=this;b["default"].objectDefineProperty.call(r.Object,r,p["default"].getPostMessage,{value:function(e,r){return 1!==arguments.length||(0,f.isWindow)(e)?2!==arguments.length||t._isPostMessageFn(this,r)?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.messageSandbox.postMessage(this,t)}:r:e.postMessage},configurable:!0})},t}(u["default"]);e["default"]=S,t.exports=e["default"]},properties:{"anchor.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var r=u["default"].anchorHrefGetter.call(e);if(r){var n=(0,a.parseProxyUrl)(r);return u["default"].anchorHrefSetter.call(c,n?n.destUrl:r),t.call(c)}return t.call(p)}function i(e,t,r){var n=u["default"].anchorHrefGetter.call(e);if(n){var o=(0,a.parseProxyUrl)(n);u["default"].anchorHrefSetter.call(c,o?o.destUrl:n),t.call(c,r),e.setAttribute("href",u["default"].anchorHrefGetter.call(c))}return r}function s(){c=null,p=null}e.__esModule=!0,e.getAnchorProperty=o,e.setAnchorProperty=i,e.dispose=s;var a=r("../../../utils/url"),l=r("../../native-methods"),u=n(l),c=u["default"].createElement.call(document,"a"),p=u["default"].createElement.call(document,"a")},"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../../../processing/dom/internal-properties"),u=o(l),c=r("../location"),p=o(c),d=r("../location/wrapper"),f=o(d),h=r("../../base"),m=o(h),y=r("../../../utils/destination-location"),g=n(y),v=r("../../../utils/dom"),E=n(v),b=r("../../../utils/types"),S=n(b),w=r("../../../utils/url"),_=n(w),x=r("../../../../utils/url"),T=r("../../../../processing/script/instruction"),C=o(T),A=r("../../../../processing/script/instrumented"),P=r("../../native-methods"),O=o(P),I=r("../../../../processing/dom"),M=function(e){function t(r){i(this,t);var n=s(this,e.call(this));return n.windowSandbox=r,n}return a(t,e),t._error=function(e){throw new Error(e)},t._safeIsShadowUIElement=function(e){try{return E.isShadowUIElement(e)}catch(t){return!1}},t.prototype._createPropertyAccessors=function(e,t){return{href:{condition:p["default"].isLocationWrapper,get:function(e){return e.href},set:function(e,r){return e.href=g.resolveUrl(r,t),r}},location:{condition:function(e){return E.isDocument(e)||E.isWindow(e)},get:function(e){var t=p["default"].getLocationWrapper(e);if(t)return t;var r=E.isWindow(e)?e:e.defaultView;return new f["default"](r)},set:function(e,t){var r=E.isWindow(e)?e:e.defaultView,n=p["default"].getLocationWrapper(r);if(n)n.href=t;else if("string"!=typeof t&&(t=String(t)),(0,I.isJsProtocol)(t))e.location=(0,I.processJsAttrValue)(t,{isJsProtocol:!0,isEventAttr:!1});else{var o=(0,x.prepareUrl)(t),i=_.stringifyResourceType({isIframe:!0});e.location=g.sameOriginCheck(t.toString(),o)?_.getProxyUrl(o,{resourceType:i}):_.getCrossDomainIframeProxyUrl(o)}return t}}}},t._getSetPropertyInstructionByOwner=function(e,t){try{return e&&e[u["default"].processedContext]&&e[u["default"].processedContext]!==t&&e[u["default"].processedContext][C["default"].setProperty]}catch(r){return null}},t.prototype.attach=function(r){e.prototype.attach.call(this,r);var n=this._createPropertyAccessors(r,r.document),o=this.windowSandbox;return O["default"].objectDefineProperty.call(r.Object,r,C["default"].getProperty,{value:function(e,r){if(S.isNullOrUndefined(e)&&t._error("Cannot read property '"+r+"' of "+S.inaccessibleTypeToStr(e)),"string"==typeof r&&(0,A.shouldInstrumentProperty)(r)&&n[r].condition(e))return n[r].get(e);var i=e[r];return o.isInternalGetter=!0,i&&t._safeIsShadowUIElement(i)?void 0:(o.isInternalGetter=!1,i)},configurable:!0}),O["default"].objectDefineProperty.call(r.Object,r,C["default"].setProperty,{value:function(e,o,i){S.isNullOrUndefined(e)&&t._error("Cannot set property '"+o+"' of "+S.inaccessibleTypeToStr(e));var s=t._getSetPropertyInstructionByOwner(e,r);return s?s(e,o,i):"string"==typeof o&&(0,A.shouldInstrumentProperty)(o)&&n[o].condition(e)?n[o].set(e,i):e[o]=i},configurable:!0}),n},t}(m["default"]);e["default"]=M,t.exports=e["default"]}}},"console.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("./base"),l=n(a),u=r("../utils/dom"),c=r("../sandbox/native-methods"),p=n(c),d=function(e){function t(r){o(this,t);var n=i(this,e.call(this));return n.CONSOLE_METH_CALLED_EVENT="hammerhead|event|console-meth-called",n.messageSandbox=r,n.serviceMsgReceivedEventCallback=function(e){var t=e.message;t.cmd===n.CONSOLE_METH_CALLED_EVENT&&n.emit(n.CONSOLE_METH_CALLED_EVENT,{meth:t.meth,line:t.line})},n}return s(t,e),t.prototype._toString=function(e){try{return String(e)}catch(t){return"object"}},t.prototype._proxyConsoleMeth=function(e){var t=this;this.window.console[e]=function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!(0,u.isCrossDomainWindows)(window,window.top)){var i=window!==window.top,s=p["default"].arrayMap.call(n,t._toString).join(" ");i?(t.emit(t.CONSOLE_METH_CALLED_EVENT,{meth:e,line:s,inIframe:!0}),t.messageSandbox.sendServiceMsg({meth:e,line:s,cmd:t.CONSOLE_METH_CALLED_EVENT},window.top)):t.emit(t.CONSOLE_METH_CALLED_EVENT,{meth:e,line:s})}t.nativeMethods.consoleMeths[e].apply(t.nativeMethods.console,n)}},t.prototype.attach=function(t){e.prototype.attach.call(this,t),this._proxyConsoleMeth("log"),this._proxyConsoleMeth("info"),this._proxyConsoleMeth("error"),this._proxyConsoleMeth("warn");var r=this.messageSandbox;r.on(r.SERVICE_MSG_RECEIVED_EVENT,this.serviceMsgReceivedEventCallback)},t}(l["default"]);e["default"]=d,t.exports=e["default"]},cookie:{"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("pinkie"),u=o(l),c=r("../base"),p=o(c),d=r("../../settings"),f=o(d),h=r("./window-sync"),m=o(h),y=r("../../utils/destination-location"),g=n(y),v=r("../../utils/cookie"),E=n(v),b=r("../../../utils/string-trim"),S=o(b),w=r("../../../session/cookie-limit"),_=o(w),x=r("../../sandbox/native-methods"),T=o(x),C=r("../../../utils/cookie"),A=new T["default"].date(0).toUTCString(),P=function(e){function t(r){i(this,t);var n=s(this,e.call(this));return n.messageSandbox=r,n.windowSync=null,n.pendingWindowSync=[],n}return a(t,e),t.prototype._canSetCookie=function(e,t){if(t&&(e.length>_["default"]||"file:"===g.getParsed().protocol))return!1;var r="key"+T["default"].mathRandom.call(T["default"].math)+"=value";T["default"].documentCookieSetter.call(this.document,r);var n=!T["default"].documentCookieGetter.call(this.document);return n||T["default"].documentCookieSetter.call(this.document,r+";expires="+A),!n},t._updateClientCookieStr=function(e,t){for(var r=f["default"].get().cookie,n=r?r.split(";"):[],o=[],i=!1,s=""===e?null:e+"=",a=0;a<n.length;a++){var l=n[a];l=(0,S["default"])(l);var u=s?0===l.indexOf(s):l.indexOf("=")===-1;u?null!==t&&(o.push(t),i=!0):o.push(l)}i||null===t||o.push(t),f["default"].get().cookie=o.join("; ")},t.prototype.getCookie=function(){return this.syncCookie(),f["default"].get().cookie||""},t.prototype.setCookie=function(e,r){var n="string"==typeof r;if(this._canSetCookie(r,n)){var o=n?E.parse(r):r;if(o&&!o.httpOnly){var i=g.getParsed();if(E.domainMatch(i.hostname,o.domain)){if((!o.secure||"https:"===i.protocol)&&E.pathMatch(i.pathname,o.path)){var s=E.getUTCDate(),a=null;(!o.expires||"Infinity"===o.expires||o.expires>s)&&(a=E.formatClientString(o)),t._updateClientCookieStr(o.key,a)}n&&(E.setDefaultValues(o,i),this._syncClientCookie(o),this.syncCookie())}}}},t.prototype.syncCookie=function(){for(var e=T["default"].documentCookieGetter.call(this.document),t=(0,C.parseClientSyncCookieStr)(e),r=f["default"].get().sessionId,n=[],o=0,i=t.outdated;o<i.length;o++){var s=i[o];T["default"].documentCookieSetter.call(this.document,(0,C.generateDeleteSyncCookieStr)(s))}for(var a=0,l=t.actual;a<l.length;a++){var u=l[a];u.sid===r&&(u.isServerSync?n.push(u):u.isWindowSync&&this.setCookie(this.document,u))}this._syncServerCookie(n)},t.prototype._syncServerCookie=function(e){for(var t=this,r=0;r<e.length;r++){var n=e[r];this.setCookie(this.document,n),T["default"].documentCookieSetter.call(this.document,(0,C.generateDeleteSyncCookieStr)(n)),(0,C.changeSyncType)(n,{server:!1,window:!0}),T["default"].documentCookieSetter.call(this.document,(0,C.formatSyncCookie)(n))}this.windowSync.syncBetweenWindows(e,null,function(){for(var r=0;r<e.length;r++){var n=e[r];T["default"].documentCookieSetter.call(t.document,(0,C.generateDeleteSyncCookieStr)(n))}})},t.prototype._syncClientCookie=function(e){var t=this;e.isClientSync=!0,e.isWindowSync=!0,e.sid=f["default"].get().sessionId,e.lastAccessed=new T["default"].date,(0,C.prepareSyncCookieProperties)(e),T["default"].documentCookieSetter.call(this.document,(0,C.formatSyncCookie)(e)),this.windowSync.syncBetweenWindows([e],null,function(){T["default"].documentCookieSetter.call(t.document,(0,C.generateDeleteSyncCookieStr)(e)),(0,C.changeSyncType)(e,{window:!1}),T["default"].documentCookieSetter.call(t.document,(0,C.formatSyncCookie)(e))})},t.prototype._processPendingWindowSync=function(){for(var e=0,t=this.pendingWindowSync;e<t.length;e++){var r=t[e],n=r.parsedCookies,o=r.win,i=r.resolve,s=this.syncWindowCookie(n,o);s?s.then(i):i()}this.pendingWindowSync=[]},t.prototype.syncWindowCookie=function(e,t){var r=this;if(!this.document)return new u["default"](function(n){return r.pendingWindowSync.push({parsedCookies:e,win:t,resolve:n})});for(var n=T["default"].documentCookieGetter.call(this.document),o=[],i=0;i<e.length;i++){var s=e[i],a=n.indexOf(s.cookieStr),l=a+s.cookieStr.length;a>-1&&(n.length===l||";"===n.charAt(l))&&(this.setCookie(this.document,s),o.push(s))}return this.windowSync.syncBetweenWindows(o,t)},t.prototype.attach=function(t){e.prototype.attach.call(this,t),this.windowSync=new m["default"](t,this,this.messageSandbox),this._processPendingWindowSync()},t}(p["default"]);e["default"]=P,t.exports=e["default"]},"window-sync.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("pinkie"),s=n(i),a=r("../../../processing/dom/internal-properties"),l=n(a),u=r("../../utils/integer-id-generator"),c=n(u),p="hammerhead|command|sync-cookie-start",d="hammerhead|command|sync-cookie-done",f=function(){function e(t,r,n){var i=this;o(this,e),this.win=t,this.cookieSandbox=r,this.messageSandbox=n,this.messageIdGenerator=(0,c["default"])(),this.resolversMap={},n.on(n.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message,r=e.source;if(t.cmd===p){var n=i.cookieSandbox.syncWindowCookie(t.cookies,r),o=function(){return i.messageSandbox.sendServiceMsg({id:t.id,cmd:d},r)};n?n.then(o):o()}else t.cmd===d&&i.resolversMap[t.id]&&(i.resolversMap[t.id](),delete i.resolversMap[t.id])})}return e._getCookieSandbox=function(e){try{return e[l["default"].hammerhead].sandbox.cookie}catch(t){return null}},e.prototype._getWindowsForSync=function(e){var t=[];this.win!==this.win.parent&&this.win.parent!==e&&t.push(this.win.parent);for(var r=0,n=this.win.window;r<n.length;r++){var o=n[r];o!==e&&t.push(o)}return t},e.prototype.syncBetweenWindows=function(t,r,n){if(!t.length)return n&&n(),null;for(var o=this._getWindowsForSync(r),i=[],a=0;a<o.length;a++){var l=o[a],u=e._getCookieSandbox(l);if(u){var c=u.syncWindowCookie(t,this.win);c&&i.push(c)}else i.push(this.sendSyncMessage(l,p,t))}if(i.length){var d=s["default"].all(i);return n?d.then(n):d}return n&&n(),null},e.prototype.sendSyncMessage=function(e,t,r){var n=this,o=this.messageIdGenerator.increment();return new s["default"](function(i){n.resolversMap[o]=i,n.messageSandbox.sendServiceMsg({id:o,cmd:t,cookies:r},e)})},e}();e["default"]=f,t.exports=e["default"]}},"electron.js":function(exports,module,require){function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _base=require("./base"),_base2=_interopRequireDefault(_base),_script=require("../../processing/script"),_destinationLocation=require("../utils/destination-location"),destinationLocation=_interopRequireWildcard(_destinationLocation),ElectronSandbox=function(_SandboxBase){function ElectronSandbox(){return _classCallCheck(this,ElectronSandbox),_possibleConstructorReturn(this,_SandboxBase.apply(this,arguments))}return _inherits(ElectronSandbox,_SandboxBase),ElectronSandbox._createFnWrapper=function(e,t){return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return"string"==typeof n[0]&&(n[0]=(0,_script.processScript)(n[0])),t.apply(e,n)}},ElectronSandbox._overrideElectronModulePaths=function _overrideElectronModulePaths(window){var electronRequire=eval("require"),path=electronRequire("path"),destination=destinationLocation.getParsed();if("file:"===destination.protocol){var pathname="win32"===window.process.platform&&"/"===destination.pathname[0]?destination.pathname.substr(1):destination.pathname;window.__filename=path.normalize(decodeURIComponent(pathname)),window.__dirname=path.dirname(window.__filename),window.module.filename=window.__filename,window.module.paths=window.module.paths.concat(electronRequire("module")._nodeModulePaths(window.__dirname))}},ElectronSandbox.prototype.attach=function(e){if(_SandboxBase.prototype.attach.call(this,e),e.require){var t=e.require("vm");if(t){var r=this.nativeMethods;r.refreshElectronMeths(t)&&(t.createScript=ElectronSandbox._createFnWrapper(t,r.createScript),t.runInDebugContext=ElectronSandbox._createFnWrapper(t,r.runInDebugContext),t.runInContext=ElectronSandbox._createFnWrapper(t,r.runInContext),t.runInNewContext=ElectronSandbox._createFnWrapper(t,r.runInNewContext),t.runInThisContext=ElectronSandbox._createFnWrapper(t,r.runInThisContext),ElectronSandbox._overrideElectronModulePaths(e))}}},ElectronSandbox}(_base2["default"]);exports["default"]=ElectronSandbox,module.exports=exports["default"]},event:{"active-window-tracker.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("../base"),l=n(a),u="hammerhead|event|window-activated",c="hammerhead|event|window-deactivated",p=function(e){function t(r){o(this,t);var n=i(this,e.call(this));return n.messageSandbox=r,n.isIframeWindow=null,n.activeWindow=null,n.isActive=null,n}return s(t,e),t.prototype._notifyPrevActiveWindow=function(){try{this.activeWindow.top&&this.activeWindow!==this.activeWindow.top&&this.messageSandbox.sendServiceMsg({cmd:c},this.activeWindow)}catch(e){}},t.prototype.attach=function(t){var r=this;e.prototype.attach.call(this,t),this.isIframeWindow=t!==t.top,this.activeWindow=this.isIframeWindow?null:t.top,this.isActive=!this.isIframeWindow,this.messageSandbox.on(this.messageSandbox.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===u?(r._notifyPrevActiveWindow(),r.isActive=!1,r.activeWindow=e.source):e.message.cmd===c&&(r.isActive=!1)})},t.prototype.isCurrentWindowActive=function(){return this.isActive},t.prototype.makeCurrentWindowActive=function(){this.isActive=!0,this.isIframeWindow?this.messageSandbox.sendServiceMsg({cmd:u},this.window.top):(this._notifyPrevActiveWindow(),this.activeWindow=this.window)},t}(l["default"]);e["default"]=p,t.exports=e["default"]},"drag-and-drop":{"data-store-mode.js":function(e,t,r){e.__esModule=!0,e["default"]={readwrite:"readwrite",readonly:"readonly","protected":"protected"},t.exports=e["default"]},"data-transfer-item-kind.js":function(e,t,r){e.__esModule=!0,e["default"]={string:"string",file:"file"},t.exports=e["default"]},"data-transfer-item-list.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){e=e.replace(/\r\n$/,"");var t=[];if(""===e)return t;e=e.split(/\r\n/);for(var r=0,n=e;r<n.length;r++){var o=n[r];"#"!==o&&t.push(o)}return t}function s(e){return"text"===e?"text/plain":"url"===e?"text/uri-list":e}e.__esModule=!0;var a=r("../../native-methods"),l=n(a),u=r("./data-transfer-item"),c=n(u),p=r("./data-store-mode"),d=n(p),f=r("./data-transfer-item-kind"),h=n(f),m=function y(e){var t=this;o(this,y);var r=[],n=[],a=function(){for(var e=[],t=0,n=r;t<n.length;t++){var o=n[t];e.push(o.type)}return e},u=function(){for(var e=0;void 0!==r[e]||void 0!==t[e];){var n=r[e];l["default"].objectDefineProperty.call(window.Object,t,e,{enumerable:void 0!==n,configurable:!0,value:n}),e++}},p=function(e){var t=!1;e=s(e),"url"===e&&(t=!0);for(var o="",a=0;a<r.length;a++)r[a].type===e&&(o=n[a]);return t&&o&&(o=i(o)[0]),o},f=function(e){e=s(e);for(var t=0;t<r.length;t++)if(r[t].type===e){r.splice(t,1),n.splice(t,1);break}u()},m=function(e,t,o){var i=null;if("string"==typeof e){var a=t.toString().toLowerCase(),l=p(a);if(!o&&l)throw new Error("Failed to execute 'add' on 'DataTransferItemList': An item already exists for type '"+a+"'.");l&&f(a),i=new c["default"](h["default"].string,s(t),e)}else i=new c["default"](h["default"].file,null,e);return r.push(i),n.push(e),u(),i};this.getAndHideInternalMethods=function(){var e={getTypes:a,getItemData:p,removeItem:f,addItem:m};return delete t.getAndHideInternalMethods,e},l["default"].objectDefineProperty.call(window.Object,this,"length",{enumerable:!0,get:function(){return r.length}}),l["default"].objectDefineProperty.call(window.Object,this,"remove",{configurable:!0,enumerable:!0,get:function(){return function(t){e.mode===d["default"].readwrite&&(r.splice(t,1),n.splice(t,1),u())}}}),l["default"].objectDefineProperty.call(window.Object,this,"clear",{configurable:!0,enumerable:!0,get:function(){return function(){e.mode===d["default"].readwrite&&(r=[],n=[],u())}}}),l["default"].objectDefineProperty.call(window.Object,this,"add",{configurable:!0,enumerable:!0,get:function(){return function(t,r){if(!arguments.length)throw new Error("Failed to execute 'add' on 'DataTransferItemList': 1 argument required, but only 0 present.");if(1===arguments.length&&"string"==typeof t)throw new Error("Failed to execute 'add' on 'DataTransferItemList': parameter 1 is not of type 'File'.");if(e.mode===d["default"].readwrite)return m(t,r,!1)}}})};e["default"]=m,l["default"].DataTransferItemList&&(m.prototype=l["default"].DataTransferItemList.prototype),t.exports=e["default"]},"data-transfer-item.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../../native-methods"),s=n(i),a=r("./data-transfer-item-kind"),l=n(a),u=function c(e,t,r){o(this,c),s["default"].objectDefineProperty.call(window.Object,this,"kind",{enumerable:!0,get:function(){return e}}),s["default"].objectDefineProperty.call(window.Object,this,"type",{enumerable:!0,get:function(){return t}}),s["default"].objectDefineProperty.call(window.Object,this,"getAsString",{configurable:!0,enumerable:!0,get:function(){return function(t){if(!arguments.length)throw new Error("Failed to execute 'getAsString' on 'DataTransferItem': 1 argument required, but only 0 present.");"function"==typeof t&&e===l["default"].string&&s["default"].setTimeout.call(window,function(){return t(r)},0)}}}),s["default"].objectDefineProperty.call(window.Object,this,"getAsFile",{configurable:!0,enumerable:!0,get:function(){return function(){return e!==l["default"].file?null:r}}})};e["default"]=u,s["default"].DataTransferItem&&(u.prototype=s["default"].DataTransferItem.prototype),t.exports=e["default"]},"data-transfer.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../../../utils/browser"),s=r("../../../utils/feature-detection"),a=r("../../native-methods"),l=n(a),u=r("./data-transfer-item-list"),c=n(u),p=r("./file-list"),d=n(p),f=r("./data-store-mode"),h=n(f),m=r("./drop-effect"),y=n(m),g=r("./effect-allowed"),v=n(g),E=function b(e){o(this,b);var t=y["default"].none,r=v["default"].uninitialized,n=new c["default"](e),s=n.getAndHideInternalMethods(),a=new d["default"],u=new c["default"](e),p=u.getAndHideInternalMethods(),f=function(){return e.mode===h["default"]["protected"]?u:n},m=function(){return e.mode===h["default"]["protected"]?p:s};l["default"].objectDefineProperty.call(window.Object,this,"dropEffect",{configurable:!0,enumerable:!0,get:function(){return t},set:function(e){return y["default"][e]&&(t=y["default"][e]),e}}),l["default"].objectDefineProperty.call(window.Object,this,"effectAllowed",{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){return v["default"][e]&&(r=v["default"][e]),e}}),i.isIE11||l["default"].objectDefineProperty.call(window.Object,this,"items",{configurable:!0,enumerable:!0,get:f}),l["default"].objectDefineProperty.call(window.Object,this,"types",{
configurable:!0,enumerable:!0,get:function(){return m().getTypes()}}),l["default"].objectDefineProperty.call(window.Object,this,"files",{configurable:!0,enumerable:!0,get:function(){return a}}),i.isIE11||(this.setDragImage=function(){}),this.getData=function(e){if(!arguments.length)throw new Error("Failed to execute 'getData' on 'DataTransfer': 1 argument required, but only 0 present.");return e=e.toString().toLowerCase(),m().getItemData(e)},this.setData=function(t,r){if(arguments.length<2)throw new Error("Failed to execute 'setData' on 'DataTransfer': 2 argument required, but only "+arguments.length+" present.");e.mode===h["default"].readwrite&&(t=t.toString().toLowerCase(),s.addItem(r,t,!0))},this.clearData=function(t){e.mode===h["default"].readwrite&&(void 0===t?n.clear():s.removeItem(t))}};e["default"]=E,s.hasDataTransfer&&(E.prototype=l["default"].DataTransfer.prototype),t.exports=e["default"]},"drag-data-store.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("./data-store-mode"),s=n(i),a=function(){function e(){o(this,e),this.mode=s["default"].readwrite}return e.prototype.setReadOnlyMode=function(){this.mode=s["default"].readonly},e.prototype.setProtectedMode=function(){this.mode=s["default"]["protected"]},e}();e["default"]=a,t.exports=e["default"]},"drop-effect.js":function(e,t,r){e.__esModule=!0,e["default"]={none:"none",copy:"copy",link:"link",move:"move"},t.exports=e["default"]},"effect-allowed.js":function(e,t,r){e.__esModule=!0,e["default"]={uninitialized:"uninitialized",none:"none",copy:"copy",copyLink:"copyLink",copyMove:"copyMove",link:"link",linkMove:"linkMove",move:"move",all:"all"},t.exports=e["default"]},"file-list.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../../native-methods"),s=n(i),a=function l(){o(this,l),s["default"].objectDefineProperty.call(window.Object,this,"length",{enumerable:!0,get:function(){return 0}}),s["default"].objectDefineProperty.call(window.Object,this,"item",{enumerable:!0,get:function(){return function(){}}})};e["default"]=a,s["default"].FileList&&(a.prototype=s["default"].FileList.prototype),t.exports=e["default"]}},"element-editing-watcher.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../native-methods"),s=n(i),a=r("../../utils/dom"),l="hammerhead|element-editing-observed",u="hammerhead|old-value",c=function(){function e(t){o(this,e),this.eventSimulator=t}return e.prototype._onBlur=function(e){this.processElementChanging(e.target)||this.stopWatching(e.target)},e.prototype._onChange=function(e){this.stopWatching(e.target)},e._getValue=function(e){return(0,a.isInputElement)(e)?s["default"].inputValueGetter.call(e):(0,a.isTextAreaElement)(e)?s["default"].textAreaValueGetter.call(e):e.value},e.prototype.stopWatching=function(e){var t=this;e&&(s["default"].removeEventListener.call(e,"blur",function(e){return t._onBlur(e)}),s["default"].removeEventListener.call(e,"change",function(e){return t._onChange(e)}),e[l]&&delete e[l],e[u]&&delete e[u])},e.prototype.watchElementEditing=function(t){var r=this;t&&!t[l]&&(0,a.isTextEditableElementAndEditingAllowed)(t)&&!(0,a.isShadowUIElement)(t)&&(t[l]=!0,t[u]=e._getValue(t),s["default"].addEventListener.call(t,"blur",function(e){return r._onBlur(e)}),s["default"].addEventListener.call(t,"change",function(e){return r._onChange(e)}))},e.prototype.restartWatchingElementEditing=function(t){t&&t[l]&&(t[u]=e._getValue(t))},e.prototype.processElementChanging=function(t){return!(!t||!t[l]||e._getValue(t)===t[u])&&(this.eventSimulator.change(t),this.restartWatchingElementEditing(t),!0)},e}();e["default"]=c,t.exports=e["default"]},"focus-blur.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../../processing/dom/internal-attributes"),u=o(l),c=r("../../../processing/dom/internal-properties"),p=o(c),d=r("../base"),f=o(d),h=r("../event/active-window-tracker"),m=o(h),y=r("../native-methods"),g=o(y),v=r("../../utils/browser"),E=n(v),b=r("../../utils/dom"),S=n(b),w=r("../../utils/style"),_=n(w),x="hammerhead|event|internal-",T=E.isChrome,C={bubbles:{focus:"focusin",blur:"focusout"},nonBubbles:{focusin:"focus",focusout:"blur"}},A=function(e){function t(r,n,o,a,l,u){i(this,t);var c=s(this,e.call(this));return c.topWindow=null,c.lastFocusedElement=null,c.scrollState={},c.eventSimulator=n,c.activeWindowTracker=new m["default"](o),c.shadowUI=a,c.listeners=r,c.elementEditingWatcher=u,c.timersSandbox=l,c}return a(t,e),t._getNativeMeth=function(e,t){if(S.isSVGElement(e)){if("focus"===t)return g["default"].svgFocus;if("blur"===t)return g["default"].svgBlur}return g["default"][t]},t._restoreElementScroll=function(e,t){var r=_.getElementScroll(e);r.left!==t.left&&_.setScrollLeft(e,t.left),r.top!==t.top&&_.setScrollTop(e,t.top)},t.prototype._onChangeActiveElement=function(e){this.lastFocusedElement!==e&&(this.lastFocusedElement&&g["default"].getAttribute.call(this.lastFocusedElement,u["default"].focusPseudoClass)&&g["default"].removeAttribute.call(this.lastFocusedElement,u["default"].focusPseudoClass),!S.isElementFocusable(e)||S.isBodyElement(e)&&null===S.getTabIndex(e,"tabIndex")?this.lastFocusedElement=null:(this.lastFocusedElement=e,g["default"].setAttribute.call(e,u["default"].focusPseudoClass,!0)))},t.prototype._shouldUseLabelHtmlForElement=function(e,t){return"focus"===t&&S.isLabelElement(e)&&e.htmlFor},t.prototype._getElementNonScrollableParentsScrollState=function(e){for(var t=[],r=S.getParents(e),n=0;n<r.length;n++){var o=r[n];"hidden"===_.get(o,"overflow")&&t.push({element:o,state:_.getElementScroll(o)})}return t},t.prototype._restoreElementNonScrollableParentsScrollState=function(e){for(var r=0;r<e.length;r++){var n=e[r];t._restoreElementScroll(n.element,n.state)}},t.prototype._saveScrollStateIfNecessary=function(e,t){t&&(this.scrollState.windowScroll=_.getElementScroll(this.window)),E.isIE&&(this.scrollState.elementNonScrollableParentsScrollState=this._getElementNonScrollableParentsScrollState(e))},t.prototype._restoreScrollStateIfNecessary=function(e){e&&t._restoreElementScroll(this.window,this.scrollState.windowScroll),E.isIE&&this._restoreElementNonScrollableParentsScrollState(this.scrollState.elementNonScrollableParentsScrollState)},t.prototype._raiseEvent=function(e,r,n,o){var i=this,s=o.withoutHandlers,a=o.isAsync,l=o.forMouseEvent,u=o.preventScrolling,c=o.relatedTarget,p=o.focusedOnChange,d=function(){if(E.isIE&&E.version<12?i.window.setTimeout(function(){i.window.setTimeout(function(){delete e[t.getInternalEventFlag(r)]},0)},0):delete e[t.getInternalEventFlag(r)],s){if("focus"===r&&T){var o=function(e,t,r,n,o){n(),o()};i.listeners.addInternalEventListener(window,["focus"],o),i.eventSimulator.focus(e,c),i.listeners.removeInternalEventListener(window,["focus"],o)}}else{var l=C.bubbles[r],u=E.isIE11||E.isMSEdge&&E.version<17&&"blur"===r;a?(i.eventSimulator[l](e,c),i.timersSandbox.deferFunction(function(){return i.eventSimulator[r](e,c)})):u?(i.eventSimulator[l](e,c),i.eventSimulator[r](e,c)):(i.eventSimulator[r](e,c),i.eventSimulator[l](e,c))}n()};if(e[r]){if(this._saveScrollStateIfNecessary(e,u),this._shouldUseLabelHtmlForElement(e,r)){var f=g["default"].getElementById.call(S.findDocument(e),e.htmlFor);if(!f)return void n();e=f}e[t.getInternalEventFlag(r)]=!0,p||t._getNativeMeth(e,r).call(e),this._restoreScrollStateIfNecessary(u);var h=S.findDocument(e),m=S.getActiveElement(h),y=e.parentNode,v=y===document?null:S.closest(y,"[tabindex]");if("focus"===r&&m!==e&&v&&l){var b=E.isWebKit||E.isSafari||E.isIE;this._raiseEvent(v,"focus",d,{preventScrolling:b,forMouseEvent:l})}else"blur"===r&&m===e&&e!==h.body?this._raiseEvent(h.body,"focus",d,{withoutHandlers:!0}):e.disabled?n():d()}else d()},t.getInternalEventFlag=function(e){return x+e},t.getNonBubblesEventType=function(e){return C.nonBubbles[e]},t.prototype.attach=function(t){var r=this;e.prototype.attach.call(this,t),this.activeWindowTracker.attach(t),this.topWindow=S.isCrossDomainWindows(t,t.top)?t:t.top,this.listeners.addInternalEventListener(t,["focus","blur"],function(){var e=S.getActiveElement(r.document);r._onChangeActiveElement(e)})},t.prototype._raiseSelectionChange=function(e,t){E.isMSEdge&&t&&S.isTextEditableElement(t)&&this.eventSimulator.selectionchange(t),"function"==typeof e&&e()},t.prototype.focus=function(e,t,r,n,o,i){var s=this,a=!o||E.isWebKit||!_.isElementInInvisibleIframe(e),l=(e[p["default"].processedContext]||this.window).document;if(!a||o&&!_.isElementVisible(e,l))return null;var u=S.isElementInIframe(e),c=u?S.getIframeByElement(e):null,d=S.findDocument(e),f=S.isBodyElement(e),h=S.getActiveElement(),m=S.findDocument(h),y=!1,g=!1,v=!1,b=S.isContentEditableElement(e),w=this.activeWindowTracker.isCurrentWindowActive();y=h===e?!(f&&b&&!w):f&&!(b||E.isIE);var x=!1,T=function(){w||S.isShadowUIElement(e)||s.activeWindowTracker.makeCurrentWindowActive();var o={withoutHandlers:y||r,isAsync:x,forMouseEvent:n,preventScrolling:i,relatedTarget:h};s._raiseEvent(e,"focus",function(){r||s.elementEditingWatcher.watchElementEditing(e),u&&c&&S.getActiveElement(s.topWindow.document)!==c?s._raiseEvent(c,"focus",function(){return s._raiseSelectionChange(t,e)},{withoutHandlers:!0,isAsync:x}):s._raiseSelectionChange(t,e)},o)};if(o&&E.isIE){if((this.eventSimulator.isSavedWindowsEventsExists()||E.version>10)&&this.window.event&&"focus"===this.window.event.type&&this.window.event.srcElement===e)return this._raiseSelectionChange(t,e),null;E.version<12&&(x=!0)}return h&&h.tagName&&(h!==e&&(d!==m&&h===m.body?g=!1:h===d.body?!r&&E.isIE&&(x?this.timersSandbox.setTimeout.call(this.window,function(){return s.eventSimulator.blur(h)},0):this.eventSimulator.blur(h)):e.disabled||(g=!0)),v=d!==m&&S.isElementInIframe(h,m)),v&&!g?E.isIE?(this.eventSimulator.blur(S.getIframeByElement(h)),T()):this.blur(S.getIframeByElement(h),T,!0,o):g?this.blur(h,function(e){v?s.blur(S.getIframeByElement(h),T,!0,o):e?"function"==typeof t&&t():T()},r,o,e):T(),null},t.prototype.blur=function(e,t,r,n,o){var i=S.findDocument(e),s=S.getActiveElement(i),a=n&&E.isIE&&E.version<12;s!==e&&(r=!0);var l=!1;if(!r){var u=function(t){l=t.target===e};T&&this.listeners.addInternalEventListener(window,["focus"],u),this.elementEditingWatcher.processElementChanging(e),T&&this.listeners.removeInternalEventListener(window,["focus"],u),this.elementEditingWatcher.stopWatching(e)}var c={withoutHandlers:r,isAsync:a,relatedTarget:o,focusedOnChange:l};this._raiseEvent(e,"blur",function(){"function"==typeof t&&t(l)},c)},t._processFocusPseudoClassSelector=function(e){return E.isIE?e:e.replace(/\s*:focus\b/gi,"["+u["default"].focusPseudoClass+"]")},t}(f["default"]);e["default"]=A,t.exports=e["default"]},"hover.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../../processing/dom/internal-attributes"),u=o(l),c=r("../base"),p=o(c),d=r("../native-methods"),f=o(d),h=r("../../utils/dom"),m=n(h),y=r("../../utils/position"),g=n(y),v=r("../../utils/browser"),E=n(v),b=function(e){function t(r){i(this,t);var n=s(this,e.call(this));return n.listeners=r,n.hoverElementFixed=!1,n.lastHoveredElement=null,n}return a(t,e),t._setHoverMarker=function(e,t){for(t&&f["default"].setAttribute.call(t,u["default"].hoverPseudoClass,"");e&&e.tagName&&e!==t;)f["default"].setAttribute.call(e,u["default"].hoverPseudoClass,""),e=e.parentNode},t.prototype._clearHoverMarkerUntilJointParent=function(e){var t=null;if(this.lastHoveredElement){for(var r=this.lastHoveredElement;r&&r.tagName&&r.contains;){if(r.contains(e)){t=r;break}f["default"].removeAttribute.call(r,u["default"].hoverPseudoClass),r=r.parentNode}t&&f["default"].removeAttribute.call(t,u["default"].hoverPseudoClass)}return t},t.prototype._onHover=function(e){var t=e.target,r=e.clientX,n=e.clientY,o=E.isIE&&g.shouldIgnoreMouseEventInsideIframe(t,r,n);o||this._hover(t)},t.prototype._hover=function(e){if(!this.hoverElementFixed&&!m.isShadowUIElement(e)){var r=this._clearHoverMarkerUntilJointParent(e);t._setHoverMarker(e,r),this.lastHoveredElement=e}},t.prototype.fixHoveredElement=function(){this.hoverElementFixed=!0},t.prototype.freeHoveredElement=function(){this.hoverElementFixed=!1},t.prototype.attach=function(t){var r=this;e.prototype.attach.call(this,t),this.listeners.addInternalEventListener(t,["mouseover","touchstart"],function(e){return r._onHover(e)})},t}(p["default"]);e["default"]=b,t.exports=e["default"]},"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("./focus-blur"),u=o(l),c=r("./hover"),p=o(c),d=r("./listeners"),f=o(d),h=r("./selection"),m=o(h),y=r("../base"),g=o(y),v=r("../native-methods"),E=o(v),b=r("../../utils/dom"),S=n(b),w=r("../../utils/event"),_=r("./drag-and-drop/data-transfer"),x=o(_),T=r("./drag-and-drop/drag-data-store"),C=o(T),A=function(e){function t(r,n,o,a,l,c,d){i(this,t);var f=s(this,e.call(this));return f.EVENT_PREVENTED_EVENT="hammerhead|event|event-prevented",f.listeners=r,f.elementEditingWatcher=o,f.unload=a,f.timers=d,f.eventSimulator=n,f.focusBlur=new u["default"](r,n,l,c,d,o),f.selection=new m["default"](f),f.hover=new p["default"](r),f.shadowUI=c,f.message=l,f.DataTransfer=x["default"],f.DragDataStore=C["default"],f.overriddenMethods=null,f.onFocus=null,f.cancelInternalEvents=null,f._createOverridedMethods(),f._createInternalHandlers(),f}return a(t,e),t.prototype._createOverridedMethods=function(){var e=this.selection,t=this.focusBlur,r=this.eventSimulator,n=this;this.overriddenMethods={dispatchEvent:function(){f["default"].beforeDispatchEvent(this);var e=S.isWindow(this),t=e?E["default"].windowDispatchEvent.apply(this,arguments):E["default"].dispatchEvent.apply(this,arguments);return f["default"].afterDispatchEvent(this),t},click:function(){f["default"].beforeDispatchEvent(this);var e=r.nativeClick(this,E["default"].click);return f["default"].afterDispatchEvent(this),e},setSelectionRange:function(){return e.setSelectionRangeWrapper.apply(this,arguments)},select:function(){return e.selectWrapper.call(this)},focus:function(){return t.focus(this,null,!1,!1,!0)},blur:function(){return t.blur(this,null,!1,!0)},preventDefault:function(){return n.emit(n.EVENT_PREVENTED_EVENT,this),E["default"].preventDefault.call(this)}}},t.prototype._createInternalHandlers=function(){var e=this.shadowUI,t=this.document,r=this.eventSimulator;this.onFocus=function(r){var n=r.target,o=S.getActiveElement(t);S.isShadowUIElement(n)||S.isShadowUIElement(o)||e.setLastActiveElement(o)},this.cancelInternalEvents=function(e,t,n,o,i){var s=u["default"].getNonBubblesEventType(e.type)||e.type,a=u["default"].getInternalEventFlag(s);e.target[a]&&!e[r.DISPATCHED_EVENT_FLAG]&&i()}},t.prototype.attach=function(t){e.prototype.attach.call(this,t),t.HTMLInputElement.prototype.setSelectionRange=this.overriddenMethods.setSelectionRange,t.HTMLTextAreaElement.prototype.setSelectionRange=this.overriddenMethods.setSelectionRange,t.Window.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.Document.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.HTMLElement.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.SVGElement.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.HTMLElement.prototype.focus=this.overriddenMethods.focus,t.HTMLElement.prototype.blur=this.overriddenMethods.blur,t.HTMLElement.prototype.click=this.overriddenMethods.click,t.Window.focus=this.overriddenMethods.focus,t.Window.blur=this.overriddenMethods.blur,t.Event.prototype.preventDefault=this.overriddenMethods.preventDefault,t.TextRange&&t.TextRange.prototype.select&&(t.TextRange.prototype.select=this.overriddenMethods.select),this.initDocumentListening(t.document),this.listeners.initElementListening(t,w.DOM_EVENTS.concat(["load","beforeunload","pagehide","unload","message"])),this.listeners.addInternalEventListener(t,["focus"],this.onFocus),this.listeners.addInternalEventListener(t,["focus","blur","change","focusin","focusout"],this.cancelInternalEvents),this.unload.attach(t),this.message.attach(t),this.timers.attach(t),this.focusBlur.attach(t),this.hover.attach(t)},t.prototype.initDocumentListening=function(e){this.listeners.initElementListening(e,w.DOM_EVENTS)},t}(g["default"]);e["default"]=A,t.exports=e["default"]},"listeners.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../../processing/dom/internal-properties"),u=o(l),c=r("../native-methods"),p=o(c),d=r("../../utils/event-emitter"),f=o(d),h=r("./listening-context"),m=n(h),y=r("../../utils/event"),g=r("../../utils/dom"),v=["click","mousedown","mouseup","dblclick","contextmenu","mousemove","mouseover","mouseout","pointerdown","pointermove","pointerover","pointerout","pointerup","MSPointerDown","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerUp","touchstart","touchmove","touchend","keydown","keypress","keyup","change","focus","blur","focusin","focusout"],E="hammerhead|event-sandbox-dispatch-event-flag",b=function(e){function t(){i(this,t);var r=s(this,e.call(this));return r.EVENT_LISTENER_ATTACHED_EVENT="hammerhead|event|event-listener-attached",r.EVENT_LISTENER_DETACHED_EVENT="hammerhead|event|event-listener-detached",r.listeningCtx=m,r.addInternalEventListener=r.listeningCtx.addInternalHandler,r.addFirstInternalHandler=r.listeningCtx.addFirstInternalHandler,r.removeInternalEventListener=r.listeningCtx.removeInternalHandler,r}return a(t,e),t._getBodyEventListenerWrapper=function(e,t){return function(r){return e.cancelOuterHandlers?null:t.call(this,r)}},t._getNativeAddEventListener=function(e){return(0,g.isWindow)(e)?p["default"].windowAddEventListener:void 0!==e.body?p["default"].documentAddEventListener:p["default"].addEventListener},t._getNativeRemoveEventListener=function(e){return(0,g.isWindow)(e)?p["default"].windowRemoveEventListener:void 0!==e.body?p["default"].documentRemoveEventListener:p["default"].removeEventListener},t._getEventListenerWrapper=function(e,t){return function(r){var n="[object FunctionWrapper]"===t.toString();return n?null:e.cancelOuterHandlers?null:"function"==typeof e.outerHandlersWrapper?e.outerHandlersWrapper.call(this,r,t):(0,y.callEventListener)(this,t,r)}},t._isDifferentHandler=function(e,t,r){for(var n=0;n<e.length;n++){var o=e[n];if(o.fn===t&&o.useCapture===r)return!1}return!0},t._getUseCaptureParam=function(e){return e&&"boolean"==typeof e?e:!(!e||"object"!=typeof e)&&!!e.capture},t.prototype._createEventHandler=function(){var e=this;return function(t){var r=this,n=r[u["default"].processedContext]||window,o=!1,i=!1,s=!1,a=e.listeningCtx.getEventCtx(r,t.type);if(a){var l=a.internalHandlers;a.cancelOuterHandlers=!1;for(var c=function(){o=!0,(0,y.preventDefault)(t)},p=function(){i||(a.cancelOuterHandlers=!0),i=!0},d=function(){s=!0,(0,y.stopPropagation)(t)},f=0;f<l.length;f++){var h=l[f];if(h.call(r,t,n[E],c,p,d),o||s)break}}}},t.prototype._createElementOverridedMethods=function(e){var r=this;return{addEventListener:function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=o[0],a=o[1],l=t._getUseCaptureParam(o[2]),u=m.getEventCtx(e,s),c=t._getNativeAddEventListener(e);if(!u||!(0,y.isValidEventListener)(a))return c.apply(e,o);var p=t._isDifferentHandler(u.outerHandlers,a,l);if(!p)return null;var d=t._getEventListenerWrapper(u,a);m.wrapEventListener(u,a,d,l),o[1]=d;var f=c.apply(e,o);return r.emit(r.EVENT_LISTENER_ATTACHED_EVENT,{el:e,listener:a,eventType:s}),f},removeEventListener:function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=o[0],a=o[1],l=t._getUseCaptureParam(o[2]),u=t._getNativeRemoveEventListener(e),c=m.getEventCtx(e,s);if(!c||!(0,y.isValidEventListener)(a))return u.apply(e,o);o[1]=m.getWrapper(c,a,l);var p=u.apply(e,o);return r.emit(r.EVENT_LISTENER_DETACHED_EVENT,{el:e,listener:a,eventType:s}),p}}},t.prototype._createDocumentBodyOverridedMethods=function(e){var r=this,n=function(){return e.body.addEventListener}(),o=function(){return e.body.removeEventListener}();return{addEventListener:function(){for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];var a=i[0],l=i[1],u=t._getUseCaptureParam(i[2]),c=m.getEventCtx(e,a),p=m.getEventCtx(this,a);if(!c||!(0,y.isValidEventListener)(l))return n.apply(this,i);var d=t._isDifferentHandler(p.outerHandlers,l,u);if(!d)return null;var f=t._getBodyEventListenerWrapper(c,l);m.wrapEventListener(p,l,f,u);var h=n.call(this,a,f,u);return r.emit(r.EVENT_LISTENER_ATTACHED_EVENT,{el:this,eventType:a,listener:l}),h},removeEventListener:function(){var e=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],n=t._getUseCaptureParam(arguments.length<=2?void 0:arguments[2]),i=m.getEventCtx(this,e);return i&&(0,y.isValidEventListener)(r)?o.call(this,e,m.getWrapper(i,r,n),n):o.call(this,e,r,n)}}},t.prototype.initElementListening=function(e,r){var n=t._getNativeAddEventListener(e);r=r||v,this.listeningCtx.addListeningElement(e,r);for(var o=0,i=r;o<i.length;o++){var s=i[o];n.call(e,s,this._createEventHandler(),!0)}var a=this._createElementOverridedMethods(e);e.addEventListener=a.addEventListener,e.removeEventListener=a.removeEventListener},t.prototype.initDocumentBodyListening=function(e){m.addListeningElement(e.body,y.DOM_EVENTS);var t=this._createDocumentBodyOverridedMethods(e);e.body.addEventListener=t.addEventListener,e.body.removeEventListener=t.removeEventListener},t.prototype.restartElementListening=function(e){var r=t._getNativeAddEventListener(e),n=this.listeningCtx.getElementCtx(e);if(n)for(var o=window.Object.keys(n),i=0;i<o.length;i++){var s=o[i];r.call(e,s,this._createEventHandler(),!0)}},t.prototype.cancelElementListening=function(e){this.listeningCtx.removeListeningElement(e),e.body&&this.listeningCtx.removeListeningElement(e.body)},t.beforeDispatchEvent=function(e){var t=e[u["default"].processedContext]||window;t[E]=(t[E]||0)+1},t.afterDispatchEvent=function(e){var t=e[u["default"].processedContext]||window;t[E]--,t[E]||delete t[E]},t.prototype.setEventListenerWrapper=function(e,t,r){this.listeningCtx.isElementListening(e)||this.initElementListening(e,t);for(var n=0;n<t.length;n++){var o=t[n],i=this.listeningCtx.getEventCtx(e,o);i.outerHandlersWrapper=r}},t.prototype.getEventListeners=function(e,t){var r=this.listeningCtx.getEventCtx(e,t);return r?p["default"].arrayMap.call(r.outerHandlers,function(e){return e.fn}):null},t}(f["default"]);e["default"]=b,t.exports=e["default"]},"listening-context.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e[g]}function i(e,t){t=h.isIE&&h.version>10&&/MSPointer/.test(t)?t.replace("MS","").toLowerCase():t;var r=o(e);return r&&r[t]}function s(e){return!!e[g]}function a(e,t){for(var r=o(e)||{},n=0;n<t.length;n++)r[t[n]]||(r[t[n]]={internalHandlers:[],outerHandlers:[],outerHandlersWrapper:null,wrappers:[],cancelOuterHandlers:!1});s(e)||y["default"].objectDefineProperty.call(window.Object,e,g,{value:r,writable:!0})}function l(e){delete e[g]}function u(e,t,r){for(var n=o(e),i=0;i<t.length;i++){var s=t[i];n[s].internalHandlers.unshift(r)}}function c(e,t,r){for(var n=o(e),i=0;i<t.length;i++){var s=t[i];n[s].internalHandlers.push(r)}}function p(e,t,r){for(var n=o(e),i=0;i<t.length;i++){var s=t[i],a=n[s].internalHandlers,l=a.indexOf(r);l>-1&&a.splice(l,1)}}function d(e,t,r,n){e.outerHandlers.push({fn:t,useCapture:n||!1}),e.wrappers.push(r)}function f(e,t,r){for(var n=e.outerHandlers,o=e.wrappers,i=null,s=0;s<n.length;s++){var a=n[s];if(a.fn===t&&(a.useCapture||!1)===(r||!1))return i=o[s],o.splice(s,1),n.splice(s,1),i}return null}e.__esModule=!0,e.getElementCtx=o,e.getEventCtx=i,e.isElementListening=s,e.addListeningElement=a,e.removeListeningElement=l,e.addFirstInternalHandler=u,e.addInternalHandler=c,e.removeInternalHandler=p,e.wrapEventListener=d,e.getWrapper=f;var h=r("../../utils/browser"),m=r("../native-methods"),y=n(m),g="hammerhead|element-listening-events-storage-prop"},"message.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("pinkie"),u=o(l),c=r("../base"),p=o(c),d=r("../native-methods"),f=o(d),h=r("../../utils/destination-location"),m=n(h),y=r("../../utils/url"),g=r("../../json"),v=r("../../utils/dom"),E=r("../../utils/event"),b=r("../../utils/fast-apply"),S=o(b),w=r("../../utils/property-overriding"),_={service:"hammerhead|service-msg",user:"hammerhead|user-msg"},x=function(e){function t(r,n){i(this,t);var o=s(this,e.call(this));return o.PING_DELAY=200,o.PING_IFRAME_TIMEOUT=7e3,o.PING_IFRAME_MIN_TIMEOUT=100,o.SERVICE_MSG_RECEIVED_EVENT="hammerhead|event|service-msg-received",o.RECEIVE_MSG_FN="hammerhead|receive-msg-function",o.pingCallback=null,o.pingCmd=null,o.topWindow=null,o.window=null,o.listeners=r,o.unloadSandbox=n,o.storedOnMessageHandler=null,o.isWindowUnloaded=!1,o.iframeInternalMsgQueue=[],o}return a(t,e),t._getMessageData=function(e){var t=(0,v.isMessageEvent)(e)?f["default"].messageEventDataGetter.call(e):e.data;return"string"==typeof t?(0,g.parse)(t):t},t.prototype._onMessage=function(e){var r=t._getMessageData(e);r.type===_.service&&e.source&&(this.pingCmd&&r.message.cmd===this.pingCmd&&r.message.isPingResponse?(this.pingCallback(),this.pingCallback=null,this.pingCmd=null):this.emit(this.SERVICE_MSG_RECEIVED_EVENT,{message:r.message,source:e.source}))},t.prototype._onWindowMessage=function(e,r){var n=t._getMessageData(e);if(n.type!==_.service){var o=m.get();if("*"===n.targetUrl||m.sameOriginCheck(o,n.targetUrl))return(0,E.callEventListener)(this.window,r,e)}return null},t._wrapMessage=function(e,t,r){var n=m.getParsed(),o=(0,y.formatUrl)({protocol:n.protocol,host:n.host});return{message:t,originUrl:o,targetUrl:r,type:e}},t.prototype._removeInternalMsgFromQueue=function(e){for(var t=0,r=this.iframeInternalMsgQueue.length;t<r;t++)if(this.iframeInternalMsgQueue[t].sendFunc===e)return this.iframeInternalMsgQueue.splice(t,1),!0;return!1},t.prototype.attach=function(t){var r=this;e.prototype.attach.call(this,t),this.topWindow=t.top,this.isWindowUnloaded=!1,this.unloadSandbox.on(this.unloadSandbox.UNLOAD_EVENT,function(){for(r.isWindowUnloaded=!0;r.iframeInternalMsgQueue.length;){var e=r.iframeInternalMsgQueue[0];f["default"].clearTimeout.call(r.window,e.timeoutId),e.sendFunc()}});var n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,S["default"])(r,"_onMessage",t)},o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,S["default"])(r,"_onWindowMessage",t)};this.listeners.addInternalEventListener(t,["message"],n),this.listeners.setEventListenerWrapper(t,["message"],o),f["default"].objectDefineProperty.call(t.Object,t,this.RECEIVE_MSG_FN,{value:n,configurable:!0}),(0,w.overrideDescriptor)(t.MessageEvent.prototype,"data",{getter:function(){var e=this.target,t=f["default"].messageEventDataGetter.call(this);return t&&t.type!==_.service&&(0,v.isWindow)(e)?t.message:t}});var i=f["default"].isEventPropsLocatedInProto?t.Window.prototype:t;(0,w.overrideDescriptor)(i,"onmessage",{getter:function(){return r.storedOnMessageHandler},setter:function(e){r.storedOnMessageHandler="function"==typeof e?e:null,f["default"].winOnMessageSetter.call(t,r.storedOnMessageHandler?function(t){return r._onWindowMessage(t,e)}:null)}})},t.prototype.postMessage=function(e,r){var n=r[1];return(0,v.isCrossDomainWindows)(this.window,e)?r[1]=(0,y.getCrossDomainProxyUrl)():(0,y.isSupportedProtocol)(e.location.toString())&&(0,y.isSupportedProtocol)(this.window.location.toString())?r[1]=(0,y.formatUrl)({protocol:this.window.location.protocol,host:this.window.location.host}):r[1]="*",r[0]=t._wrapMessage(_.user,r[0],n),(0,S["default"])(e,"postMessage",r)},t.prototype.sendServiceMsg=function(e,r){var n=this,o=t._wrapMessage(_.service,e),i=!(0,v.isCrossDomainWindows)(r,this.window)&&!!r[this.RECEIVE_MSG_FN];if(i){var s=function u(e){if(e||n._removeInternalMsgFromQueue(u))try{r[n.RECEIVE_MSG_FN]({data:(0,g.parse)((0,g.stringify)(o)),source:n.window})}catch(t){}};if(this.isWindowUnloaded)s(!0);else{
var a=(0,v.getTopSameDomainWindow)(this.window),l=f["default"].setTimeout.call(a,s,10);this.iframeInternalMsgQueue.push({timeoutId:l,sendFunc:s})}return null}return r.postMessage(o,"*")},t.prototype.pingIframe=function(e,t,r){var n=this;return new u["default"](function(o,i){var s=null,a=null,l=null,u=function(){l=f["default"].contentWindowGetter.call(e),l&&n.sendServiceMsg({cmd:n.pingCmd,isPingRequest:!0},l)},c=function(){f["default"].clearInterval.call(n.window,s),f["default"].clearTimeout.call(n.window,a),n.pingCallback=null,n.pingCmd=null,s=null,a=null};a=f["default"].setTimeout.call(n.window,function(){c(),i()},r?n.PING_IFRAME_MIN_TIMEOUT:n.PING_IFRAME_TIMEOUT),n.pingCallback=function(){c(),o()},n.pingCmd=t,u(),s=f["default"].setInterval.call(n.window,u,n.PING_DELAY)})},t}(p["default"]);e["default"]=x,t.exports=e["default"]},"selection.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=r("./focus-blur"),a=o(s),l=r("./listeners"),u=o(l),c=r("../native-methods"),p=o(c),d=r("../../utils/browser"),f=n(d),h=r("../../utils/dom"),m=n(h),y=r("../../../processing/dom/internal-properties"),g=o(y),v=f.isFirefox&&f.version>50,E=function(){function e(t){i(this,e),this.focusBlurSandbox=t.focusBlur,this.timersSandbox=t.timers,this.listeners=t.listeners,this.eventSimulator=t.eventSimulator;var r=this,n=this.eventSimulator,o=this.listeners,s=this.timersSandbox;this.setSelectionRangeWrapper=function(){var t=arguments[0],o=arguments[1],i=arguments[2]||"none",s=this,a=m.isTextAreaElement(s)?p["default"].textAreaSetSelectionRange:p["default"].setSelectionRange,l=m.getActiveElement(m.findDocument(s)),u=m.findDocument(s),c=!1,d=function(){var l=e._needChangeInputType(s),u=e._needForInternalSelection(s),p=s.type,d=void 0;l&&(s.type="text");try{d=a.call(s,t,o,i)}catch(h){d=a.call(s,0,0,i)}return u&&(s[g["default"].selection]={selectionStart:s.selectionStart,selectionEnd:s.selectionEnd,selectionDirection:s.selectionDirection}),l&&(s.type=p,c&&(r.focusBlurSandbox.blur(s,null,!0),r.focusBlurSandbox.focus(s,null,!0),m.getActiveElement(m.findDocument(s))!==s&&r.focusBlurSandbox.focus(s,null,!0))),f.isIE&&f.version>11&&n.selectionchange(s),d};if(l===s)return c=!0,d();var h=f.isIE11||f.isMSEdge&&f.version>16&&!u.hasFocus();return r.wrapSetterSelection(s,d,h)},this.selectWrapper=function(){var e=this.parentElement();if(!e||m.getActiveElement(m.findDocument(e))===e)return p["default"].select.call(this);var t=null,r=!1,i=function(t){t.target!==e&&"none"!==e.style.display||(r=!0)};return o.addInternalEventListener(document,["focus"],i),t=p["default"].select.call(this),s.setTimeout.call(window,function(){s.setTimeout.call(window,function(){o.removeInternalEventListener(document,["focus"],i),r||n.focus(e)},0)},0),t}}return e._isNumberOrEmailInput=function(e){return m.isInputElement(e)&&/^(number|email)$/.test(e.type)},e._needChangeInputType=function(t){return(f.isWebKit||v)&&e._isNumberOrEmailInput(t)},e._needForInternalSelection=function(t){return e._isNumberOrEmailInput(t)&&v},e.prototype.setSelection=function(e,t,r,n){e.setSelectionRange?e.setSelectionRange(t,r,n):(e.selectionStart=t,e.selectionEnd=r)},e.prototype.getSelection=function(t){var r=e._needChangeInputType(t),n=m.getActiveElement(m.findDocument(t)),o=n===t,i=t.type,s=null;r&&(!v&&o&&this.focusBlurSandbox.blur(t,null,!0),t.type="text");var a=t[g["default"].selection];return s={start:a?a.selectionStart:t.selectionStart,end:a?a.selectionEnd:t.selectionEnd,direction:a?a.selectionDirection:t.selectionDirection},r&&(t.type=i,o&&this.focusBlurSandbox.focus(t,null,!0)),s},e.prototype.wrapSetterSelection=function(e,t,r,n){var o=this,i=m.findDocument(e),s=m.getActiveElement(i),l=null,c=!1;r=r&&s!==e;var p=function(t){t.target!==e&&"none"!==e.style.display||(c=!0)};return r&&this.listeners.addInternalEventListener(document,["focus"],p),u["default"].beforeDispatchEvent(e),u["default"].beforeDispatchEvent(e),l=t(),u["default"].afterDispatchEvent(e),u["default"].afterDispatchEvent(e),r&&(s=m.getActiveElement(i),f.isWebKit&&s!==e&&(c&&(e[a["default"].getInternalEventFlag("focus")]=!0),e.focus()),f.isIE&&f.version<12?this.timersSandbox.setTimeout.call(window,function(){o.timersSandbox.setTimeout.call(window,function(){o.listeners.removeInternalEventListener(document,["focus"],p),c||o.eventSimulator.focus(e)},0)},0):(this.listeners.removeInternalEventListener(document,["focus"],p),c||(n&&f.isFirefox?this.focusBlurSandbox.focus(e,null,!0,!1,!0):this.eventSimulator.focus(e)))),l},e}();e["default"]=E,t.exports=e["default"]},"simulator.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=r("../../utils/extend"),a=o(s),l=r("../native-methods"),u=o(l),c=r("../../utils/browser"),p=n(c),d=r("../../utils/dom"),f=n(d),h=r("../../utils/event"),m=n(h),y=r("../../utils/position"),g=r("../../utils/style"),v=25,E=.5,b={noButton:-1,leftButton:0,rightButton:2},S={click:p.isIE?0:1,dblclick:p.isIE?0:2,mousedown:1,mouseup:1},w=/^key\w+$/,_=/^((mouse\w+)|((dbl)?click)|(contextmenu)|(drag\w*)|(drop))$/,x=/^touch\w+$/,T=/^focus(in|out)$/,C=1,A=function(){function e(){i(this,e),this.DISPATCHED_EVENT_FLAG="hammerhead|dispatched-event",this.touchIdentifier=u["default"].dateNow(),this.savedWindowEvents=[],this.savedNativeClickCount=0,this.browserWithNewEventsStyle=!p.isIE11}return e._dispatchStorageEvent=function(e,t){var r=u["default"].documentCreateEvent.call(document,"StorageEvent");return r.initStorageEvent("storage",t.canBubble,t.cancelable,t.key,t.oldValue,t.newValue,t.url,null),u["default"].objectDefineProperty.call(window.Object,r,"storageArea",{get:function(){return t.storageArea},configurable:!0}),null===t.key&&u["default"].objectDefineProperty.call(window.Object,r,"key",{get:function(){return null},configurable:!0}),e.dispatchEvent(r)},e._dispatchTouchEvent=function(e,t){var r=u["default"].documentCreateEvent.call(document,"TouchEvent");return r.initTouchEvent?p.isIOS?r.initTouchEvent(t.type,t.canBubble,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.pageX,t.pageY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.touches,t.targetTouches,t.changedTouches,void 0===t.scale?1:t.scale,void 0===t.rotation?0:t.rotation):12===r.initTouchEvent.length?r.initTouchEvent(t.type,t.canBubble,t.cancelable,t.view,t.detail,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.touches,t.targetTouches,t.changedTouches):r.initTouchEvent(t.touches,t.targetTouches,t.changedTouches,t.type,t.view,t.screenX,t.screenY,t.pageX-t.view.pageXOffset,t.pageY-t.view.pageYOffset,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey):r=new u["default"].WindowTouchEvent(t.type,{touches:t.touches,targetTouches:t.targetTouches,changedTouches:t.changedTouches,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,bubbles:t.canBubble,cancelable:t.cancelable,cancelBubble:!1,defaultPrevented:!1,detail:t.detail,view:t.view}),e.dispatchEvent(r)},e._getUIEventArgs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="detail"in t?t.detail:S[e];return{type:e,canBubble:t.canBubble!==!1,cancelable:t.cancelable!==!1,view:t.view||window,detail:r||0,ctrlKey:t.ctrlKey||!1,altKey:t.altKey||!1,shiftKey:t.shiftKey||!1,metaKey:t.metaKey||!1}},e._getStorageEventArgs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a["default"])(e,{canBubble:e.canBubble!==!1,cancelable:e.cancelable!==!1})},e._getMouseEventArgs=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a["default"])(e._getUIEventArgs(t,r),{screenX:r.screenX||0,screenY:r.screenY||0,clientX:r.clientX||0,clientY:r.clientY||0,button:void 0===r.button?m.BUTTON.left:r.button,buttons:void 0===r.buttons?m.BUTTONS_PARAMETER.leftButton:r.buttons,relatedTarget:r.relatedTarget||null,which:r.which})},e._getKeyEventArgs=function(t,r){var n={keyCode:r.keyCode||0,charCode:r.charCode||0,which:"press"===t?r.charCode:r.keyCode};return"keyIdentifier"in r&&(n.keyIdentifier=r.keyIdentifier),"key"in r&&(n.key=r.key),(0,a["default"])(e._getUIEventArgs(t,r),n)},e._getModifiersAsString=function(e){var t="";for(var r in m.KEYBOARD_MODIFIERS_PARAMETER)u["default"].objectHasOwnProperty.call(m.KEYBOARD_MODIFIERS_PARAMETER,r)&&e[r]&&(t+=m.KEYBOARD_MODIFIERS_PARAMETER[r]+" ");return t},e._prepareMouseEventOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0===e.buttons?m.BUTTONS_PARAMETER.noButton:e.buttons,r=m.BUTTON.left;return e.buttons=t,e.button=e.button||r,p.isWebKit&&(e.which=m.WHICH_PARAMETER.leftButton,e.buttons===m.BUTTONS_PARAMETER.noButton&&(e.which=m.WHICH_PARAMETER.noButton),e.buttons===m.BUTTONS_PARAMETER.rightButton&&(e.which=m.WHICH_PARAMETER.rightButton)),e},e.prototype._simulateEvent=function(t,r,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=null,l=null,u="click"===r&&f.isAnchorElement(t),c=(0,a["default"])(n?{clientX:n.clientX,clientY:n.clientY,screenX:n.screenX,screenY:n.screenY,altKey:!u&&n.alt,shiftKey:!u&&n.shift,ctrlKey:!u&&n.ctrl,metaKey:n.meta,button:n.button,which:n.which,buttons:n.buttons,relatedTarget:n.relatedTarget}:{},i);return c.relatedTarget||(c.relatedTarget=document.body),"storage"===r?(c=(0,a["default"])(c,n),s=e._getStorageEventArgs(c),l=e._dispatchStorageEvent):_.test(r)?(n&&void 0!==n.button&&(c=(0,a["default"])(c,{button:n.button})),s=e._getMouseEventArgs(r,c),l=function(e,t){return o._dispatchMouseRelatedEvents(e,t,n?n.dataTransfer:void 0)}):w.test(r)?(!n||void 0===n.keyCode&&void 0===n.charCode||(c=(0,a["default"])(c,{key:n.key||void 0,keyCode:n.keyCode||0,charCode:n.charCode||0}),"keyIdentifier"in n&&(c.keyIdentifier=n.keyIdentifier),"key"in n&&(c.key=n.key)),s=e._getKeyEventArgs(r,c),l=function(e,t){return o._dispatchKeyEvent(e,t)}):x.test(r)&&(s=this._getTouchEventArgs(r,(0,a["default"])(c,{target:t})),l=e._dispatchTouchEvent),l(t,s)},e.prototype._getTouchEventArgs=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,a["default"])(e._getUIEventArgs(t,r),{screenX:r.screenX||0,screenY:r.screenY||0,clientX:r.clientX||0,clientY:r.clientY||0,pageX:r.clientX||0,pageY:r.clientY||0,identifier:this._getTouchIdentifier(t)});if(u["default"].documentCreateTouch?p.isIOS?n.touch=u["default"].documentCreateTouch.call(document,n.view,r.target,n.identifier,n.clientX,n.clientY,0,0):n.touch=u["default"].documentCreateTouch.call(document,n.view,r.target,n.identifier,n.pageX,n.pageY,n.screenX,n.screenY,n.clientX,n.clientY,null,null,void 0===n.rotation?0:n.rotation):n.touch=new u["default"].WindowTouch({identifier:n.identifier,target:r.target,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,rotationAngle:0,radiusX:v,radiusY:v,force:E}),n.changedTouches=[n.touch],n.touches="touchend"===n.type?[]:n.changedTouches,u["default"].documentCreateTouchList){var o,i;n.changedTouches=(o=u["default"].documentCreateTouchList).call.apply(o,[document].concat(n.changedTouches)),n.touches=(i=u["default"].documentCreateTouchList).call.apply(i,[document].concat(n.touches))}return n.targetTouches=n.touches,n},e.prototype._getTouchIdentifier=function(e){return"touchstart"===e&&this.touchIdentifier++,this.touchIdentifier},e.prototype._raiseNativeClick=function(e,t){var r=f.isElementInIframe(e)&&f.getIframeByElement(e),n=r?u["default"].contentWindowGetter.call(r):window,o=n.event;p.isIE11&&delete n.event,t.call(e),p.isIE11&&o&&u["default"].objectDefineProperty.call(window.Object,n,"event",{get:function(){return o},configurable:!0})},e.prototype._dispatchKeyEvent=function(t,r){var n=null;if(this.browserWithNewEventsStyle&&u["default"].WindowKeyboardEvent){var o={bubbles:r.canBubble,cancelable:r.cancelable,cancelBubble:!1,defaultPrevented:!1,view:r.view,detail:r.detail,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,keyCode:r.keyCode,charCode:r.charCode,which:r.which};"keyIdentifier"in r&&(o.keyIdentifier=r.keyIdentifier),"key"in r&&(o.key=r.key),n=new u["default"].WindowKeyboardEvent(r.type,o)}else u["default"].documentCreateEvent&&(n=u["default"].documentCreateEvent.call(document,"KeyboardEvent"),n.initKeyboardEvent(r.type,r.canBubble,r.cancelable,r.view,"",0,e._getModifiersAsString(r),!1,""));if(n){u["default"].objectDefineProperty.call(window.Object,n,"keyCode",{configurable:!0,enumerable:!0,get:function(){return r.keyCode}}),u["default"].objectDefineProperty.call(window.Object,n,"charCode",{configurable:!0,enumerable:!0,get:function(){return r.charCode}}),u["default"].objectDefineProperty.call(window.Object,n,"which",{configurable:!0,enumerable:!0,get:function(){return r.which}}),"key"in r&&u["default"].objectDefineProperty.call(window.Object,n,"key",{configurable:!0,enumerable:!0,get:function(){return r.key}}),"keyIdentifier"in r&&u["default"].objectDefineProperty.call(window.Object,n,"keyIdentifier",{configurable:!0,enumerable:!0,get:function(){return r.keyIdentifier}});var i=!1,s=!0;this.browserWithNewEventsStyle&&(n.preventDefault=function(){return i=!0,u["default"].preventDefault.call(n),!1}),p.isMSEdge&&u["default"].objectDefineProperty.call(window.Object,n,"returnValue",{get:function(){return s},set:function(e){e===!1&&n.preventDefault(),s=e}});var a=this._raiseDispatchEvent(t,n,r);return p.isMSEdge?s&&!i:p.isIE?a:!i}return null},e.prototype._dispatchPointerEvent=function(e,t){var r=null,n=(0,y.getOffsetPosition)(e),o=(0,g.getBordersWidth)(e),i=(0,y.offsetToClientCoords)({x:n.left+o.left,y:n.top+o.top}),s=t.type.replace("mouse",""),l="pointer"+s,c=(0,a["default"])({width:1,height:1,pressure:0,tiltX:0,tiltY:0,pointerId:1,pointerType:"mouse",timeStamp:u["default"].dateNow(),isPrimary:!0},t);c.type=l,c.offsetX=t.clientX-i.x,c.offsetY=t.clientY-i.y,"move"!==s&&"over"!==s&&"out"!==s||(c.button=t.buttons===m.BUTTONS_PARAMETER.noButton?b.noButton:c.button),p.isIE11?(c.rotation=0,r=u["default"].documentCreateEvent.call(document,"PointerEvent"),r.initPointerEvent(c.type,c.canBubble,c.cancelable,window,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,null,c.offsetX,c.offsetY,c.width,c.height,c.pressure,c.rotation,c.tiltX,c.tiltY,c.pointerId,c.pointerType,c.timeStamp,c.isPrimary),u["default"].objectDefineProperty.call(window.Object,r,"target",{get:function(){return e},configurable:!0}),u["default"].objectDefineProperty.call(window.Object,r,"relatedTarget",{get:function(){return t.relatedTarget},configurable:!0}),u["default"].objectDefineProperty.call(window.Object,r,"buttons",{get:function(){return t.buttons}})):(c.bubbles=!0,c.cancelable=!0,r=new u["default"].WindowPointerEvent(l,c)),this._raiseDispatchEvent(e,r,c)},e.prototype._dispatchMouseRelatedEvents=function(e,t,r){if("mouseover"!==t.type&&"mouseenter"!==t.type&&(0,y.shouldIgnoreMouseEventInsideIframe)(e,t.clientX,t.clientY))return!0;var n=/mouse(down|up|move|over|out)/;if(p.isIE&&("click"===t.type||"mouseup"===t.type||"mousedown"===t.type)){var o=f.closest(e.parentNode,"button");e.parentNode&&o&&"submit"===u["default"].getAttribute.call(o,"type")&&(e=o)}return m.hasPointerEvents&&n.test(t.type)&&this._dispatchPointerEvent(e,t),this._dispatchMouseEvent(e,t,r)},e.prototype._dispatchMouseEvent=function(e,t,r){var n=null;return this.browserWithNewEventsStyle&&u["default"].WindowMouseEvent?n=new u["default"].WindowMouseEvent(t.type,{bubbles:t.canBubble,cancelable:t.cancelable,view:window,detail:t.detail,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,relatedTarget:t.relatedTarget}):(n=u["default"].documentCreateEvent.call(document,"MouseEvents"),n.initMouseEvent(t.type,t.canBubble,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),u["default"].objectDefineProperty.call(window.Object,n,"buttons",{get:function(){return t.buttons}})),void 0!==t.which&&p.isWebKit&&u["default"].objectDefineProperty.call(window.Object,n,"which",{get:function(){return t.which}}),r&&u["default"].objectDefineProperty.call(window.Object,n,"dataTransfer",{configurable:!0,enumerable:!0,get:function(){return r}}),this._raiseDispatchEvent(e,n,t)},e.prototype._dispatchFocusEvent=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null,o=T.test(t);return this.browserWithNewEventsStyle&&u["default"].WindowFocusEvent?n=new u["default"].WindowFocusEvent(t,{bubbles:o,cancelable:!1,cancelBubble:!1,relatedTarget:r,defaultPrevented:!1}):u["default"].documentCreateEvent&&(n=u["default"].documentCreateEvent.call(document,"FocusEvent"),n.initFocusEvent(t,o,!0,null,0,o?r:null)),n?(n[this.DISPATCHED_EVENT_FLAG]=!0,this._raiseDispatchEvent(e,n)):null},e.prototype._dispatchTextEvent=function(e,t){if(u["default"].WindowTextEvent&&u["default"].documentCreateEvent){var r=u["default"].documentCreateEvent.call(document,"TextEvent"),n={eventType:p.isIE11?"textinput":"textInput",bubbles:!0,cancelable:!0,view:window,data:t,inputMethod:C,locale:navigator.language};return r.initTextEvent(n.eventType,n.bubbles,n.cancelable,n.view,n.data,n.inputMethod,n.locale),this._raiseDispatchEvent(e,r)}return null},e.prototype._dispatchEvent=function(e,t,r,n){var o=null;return u["default"].documentCreateEvent&&(o=u["default"].documentCreateEvent.call(document,"Events"),o.initEvent(t,r,!0)),o?(n&&(o[n]=!0),this._raiseDispatchEvent(e,o)):null},e.prototype._raiseDispatchEvent=function(e,t){var r=f.isElementInIframe(e)&&f.getIframeByElement(e),n=r?u["default"].contentWindowGetter.call(r):window;p.isIE11&&r&&n&&u["default"].objectDefineProperty.call(window.Object,n,"event",{get:function(){return window.event},configurable:!0});var o=e.dispatchEvent(t);return p.isIE11&&n&&delete n.event,o},e.prototype.click=function(e,t){return this._simulateEvent(e,"click",t,{button:m.BUTTON.left,buttons:m.BUTTONS_PARAMETER.noButton})},e.prototype.nativeClick=function(e,t){this._raiseNativeClick(e,t)},e.prototype.dblclick=function(e,t){return this._simulateEvent(e,"dblclick",t,{button:m.BUTTON.left,buttons:m.BUTTONS_PARAMETER.noButton})},e.prototype.rightclick=function(e,t){return this._simulateEvent(e,"click",t,{button:m.BUTTON.right,buttons:m.BUTTONS_PARAMETER.rightButton})},e.prototype.contextmenu=function(e,t){return this._simulateEvent(e,"contextmenu",t,{button:m.BUTTON.right,buttons:m.BUTTONS_PARAMETER.noButton})},e.prototype.mousedown=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0===t.button?m.BUTTON.left:t.button,n=r===m.BUTTON.left?m.BUTTONS_PARAMETER.leftButton:m.BUTTONS_PARAMETER.rightButton;return t.button=r,t.buttons=void 0===t.buttons?n:t.buttons,this._simulateEvent(e,"mousedown",t)},e.prototype.mouseup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0===t.button?m.BUTTON.left:t.button;return this._simulateEvent(e,"mouseup",t,{button:r,buttons:m.BUTTONS_PARAMETER.noButton})},e.prototype.mouseover=function(t,r){return r=e._prepareMouseEventOptions(r),this._simulateEvent(t,"mouseover",r)},e.prototype.mousemove=function(t,r){return r=e._prepareMouseEventOptions(r),this._simulateEvent(t,"mousemove",r,{cancelable:!1})},e.prototype.mouseout=function(t,r){return r=e._prepareMouseEventOptions(r),this._simulateEvent(t,"mouseout",r)},e.prototype.mouseenter=function(t,r){return r=e._prepareMouseEventOptions(r),this._simulateEvent(t,"mouseenter",r,{canBubble:!1})},e.prototype.mouseleave=function(t,r){return r=e._prepareMouseEventOptions(r),this._simulateEvent(t,"mouseleave",r,{canBubble:!1})},e.prototype.keypress=function(e,t){return this._simulateEvent(e,"keypress",t)},e.prototype.keyup=function(e,t){return this._simulateEvent(e,"keyup",t)},e.prototype.keydown=function(e,t){return this._simulateEvent(e,"keydown",t)},e.prototype.blur=function(e,t){return this._dispatchFocusEvent(e,"blur",t)},e.prototype.focus=function(e,t){return this._dispatchFocusEvent(e,"focus",t)},e.prototype.focusin=function(e,t){return this._dispatchFocusEvent(e,"focusin",t)},e.prototype.focusout=function(e,t){return this._dispatchFocusEvent(e,"focusout",t)},e.prototype.storage=function(e,t){return this._simulateEvent(e,"storage",t)},e.prototype.change=function(e){return this._dispatchEvent(e,"change",!0,this.DISPATCHED_EVENT_FLAG)},e.prototype.textInput=function(e,t){return this._dispatchTextEvent(e,t)},e.prototype.input=function(e){return this._dispatchEvent(e,"input",!0)},e.prototype.submit=function(e){return this._dispatchEvent(e,"submit",!0)},e.prototype.selectionchange=function(e){return this._dispatchEvent(e,"selectionchange",!1)},e.prototype.touchstart=function(e,t){return this._simulateEvent(e,"touchstart",t)},e.prototype.touchend=function(e,t){return this._simulateEvent(e,"touchend",t)},e.prototype.touchmove=function(e,t){return this._simulateEvent(e,"touchmove",t)},e.prototype.dragstart=function(e,t){return this._simulateEvent(e,"dragstart",t)},e.prototype.drag=function(e,t){return this._simulateEvent(e,"drag",t)},e.prototype.dragenter=function(e,t){return this._simulateEvent(e,"dragenter",t)},e.prototype.dragover=function(e,t){return this._simulateEvent(e,"dragover",t)},e.prototype.dragleave=function(e,t){return this._simulateEvent(e,"dragleave",t)},e.prototype.drop=function(e,t){return this._simulateEvent(e,"drop",t)},e.prototype.dragend=function(e,t){return this._simulateEvent(e,"dragend",t)},e.prototype.isSavedWindowsEventsExists=function(){return this.savedWindowEvents&&this.savedWindowEvents.length},e}();e["default"]=A,t.exports=e["default"]},"unload.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("../base"),l=n(a),u=r("../native-methods"),c=n(u),p=r("../../utils/create-property-desc.js"),d=n(p),f=r("../../utils/browser"),h=r("../../utils/property-overriding"),m=function(e){function t(r){o(this,t);var n=i(this,e.call(this));return n.BEFORE_UNLOAD_EVENT="hammerhead|event|before-unload",n.BEFORE_BEFORE_UNLOAD_EVENT="hammerhead|event|before-before-unload",n.UNLOAD_EVENT="hammerhead|event|unload",n.listeners=r,n.storedBeforeUnloadReturnValue="",n.prevented=!1,n.storedBeforeUnloadHandler=null,n.beforeUnloadEventName=f.isIOS?"pagehide":"beforeunload",n}return s(t,e),t.prototype._emitBeforeUnloadEvent=function(){this.emit(this.BEFORE_UNLOAD_EVENT,{returnValue:this.storedBeforeUnloadReturnValue,prevented:this.prevented})},t.prototype._onBeforeUnloadHandler=function(e,t){var r=this,n=e;!e&&window.event&&window.event.type===this.beforeUnloadEventName&&(n=window.event),n&&(c["default"].objectDefineProperty.call(this.window.Object,n,"returnValue",(0,d["default"])({get:function(){return r.storedBeforeUnloadReturnValue},set:function(e){r.storedBeforeUnloadReturnValue=e,r.prevented=!f.isFirefox||""!==e}})),c["default"].objectDefineProperty.call(this.window.Object,n,"preventDefault",(0,d["default"])({get:function(){return function(){return r.prevented=!0,!0}},set:function(){}})));var o=e?t(e):t();void 0!==o&&(this.storedBeforeUnloadReturnValue=o,this.prevented=!0)},t.prototype._reattachBeforeUnloadListener=function(){c["default"].windowRemoveEventListener.call(this.window,this.beforeUnloadEventName,this),c["default"].windowAddEventListener.call(this.window,this.beforeUnloadEventName,this)},t.prototype.attach=function(t){var r=this;e.prototype.attach.call(this,t),this.listeners.setEventListenerWrapper(t,[this.beforeUnloadEventName],function(e,t){return r._onBeforeUnloadHandler(e,t)}),this.listeners.addInternalEventListener(t,["unload"],function(){return r.emit(r.UNLOAD_EVENT)}),c["default"].windowAddEventListener.call(t,this.beforeUnloadEventName,this),this.listeners.addInternalEventListener(t,[this.beforeUnloadEventName],function(){return r.emit(r.BEFORE_BEFORE_UNLOAD_EVENT)}),this.listeners.on(this.listeners.EVENT_LISTENER_ATTACHED_EVENT,function(e){e.el===t&&e.eventType===r.beforeUnloadEventName&&r._reattachBeforeUnloadListener()});var n=c["default"].isEventPropsLocatedInProto?t.Window.prototype:t;(0,h.overrideDescriptor)(n,"on"+this.beforeUnloadEventName,{getter:function(){return r.storedBeforeUnloadHandler},setter:function(e){return r.setOnBeforeUnload(t,e)}})},t.prototype.setOnBeforeUnload=function(e,t){var r=this,n=f.isIOS?c["default"].winOnPageHideSetter:c["default"].winOnBeforeUnloadSetter;"function"==typeof t?(this.storedBeforeUnloadHandler=t,n.call(e,function(e){return r._onBeforeUnloadHandler(e,t)}),this._reattachBeforeUnloadListener()):(this.storedBeforeUnloadHandler=null,n.call(e,null))},t.prototype.handleEvent=function(){this._emitBeforeUnloadEvent()},t}(l["default"]);e["default"]=m,t.exports=e["default"]}},"fetch.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("./base"),u=o(l),c=r("./native-methods"),p=o(c),d=r("../../request-pipeline/xhr/headers"),f=o(d),h=r("../utils/url"),m=r("../utils/destination-location"),y=r("../utils/dom"),g=r("../../request-pipeline/xhr/same-origin-check-failed-status-code"),v=o(g),E=r("../utils/property-overriding"),b=r("../utils/browser"),S=n(b),w=p["default"].Request?new p["default"].Request(window.location.toString()).credentials:void 0,_=function(e){function t(r){i(this,t);var n=s(this,e.call(this));return n.cookieSandbox=r,n.FETCH_REQUEST_SENT_EVENT="hammerhead|event|fetch-request-sent-event",n}return a(t,e),t._addSpecialHeadersToRequestInit=function(e){var t=e.headers,r=e.credentials||w,n=(0,m.getOriginHeader)();if((0,y.isFetchHeaders)(t))p["default"].headersSet.call(t,f["default"].origin,n),p["default"].headersSet.call(t,f["default"].fetchRequestCredentials,r);else{var o,i=(o={},o[f["default"].origin]=n,o[f["default"].fetchRequestCredentials]=r,o);if(t)for(var s=0,a=p["default"].objectKeys(t);s<a.length;s++){var l=a[s];i[l]=t[l]}e.headers=i}return e},t._processArguments=function(e){var r=e[0],n="string"==typeof r,o=(0,y.isFetchRequest)(r),i=e[1];o?i&&(e[1]=t._addSpecialHeadersToRequestInit(i)):(e[0]=(0,h.getProxyUrl)(n?r:String(r)),i=i||{},e[1]=t._addSpecialHeadersToRequestInit(i))},t._sameOriginCheck=function(e){var t=null,r=null;if((0,y.isFetchRequest)(e[0]))t=(0,h.parseProxyUrl)(e[0].url).destUrl,r=e[0].mode;else{var n=(0,h.parseProxyUrl)(e[0]);t=n?n.destUrl:e[0],r=(e[1]||{}).mode}return"same-origin"!==r||(0,m.sameOriginCheck)((0,m.get)(),t,!0)},t._getResponseType=function(e){var t=p["default"].responseUrlGetter.call(e),r=(0,h.parseProxyUrl)(t),n=r&&r.destUrl,o=(0,m.sameOriginCheck)((0,m.get)(),n,!0);return o?"basic":0===e.status?"opaque":"cors"},t._entriesFilteredNext=function(e,r){var n=r.apply(e);return n.done?n:n.value[0]===f["default"].origin||n.value[0]===f["default"].fetchRequestCredentials?t._entriesFilteredNext(e,r):n},t._entriesWrapper=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=p["default"].headersEntries.apply(this,r),i=o.next;return o.next=function(){return t._entriesFilteredNext(o,i)},o},t._valuesWrapper=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=p["default"].headersEntries.apply(this,r),i=o.next;return o.next=function(){var e=t._entriesFilteredNext(o,i);return e.done||(e.value=e.value[1]),e},o},t.prototype.attach=function(r){if(e.prototype.attach.call(this,r,r.document),p["default"].fetch){var n=this;r.Request=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];t._processArguments(n),r.Headers.prototype.entries=r.Headers.prototype[Symbol.iterator]=p["default"].headersEntries;var i=1===n.length?new p["default"].Request(n[0]):new p["default"].Request(n[0],n[1]);return r.Headers.prototype.entries=r.Headers.prototype[Symbol.iterator]=t._entriesWrapper,i},r.Request.prototype=p["default"].Request.prototype,r.fetch=function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];if(!o.length&&!S.isSafari)return p["default"].fetch.apply(this);try{t._processArguments(o)}catch(s){return p["default"].promiseReject.call(n.window.Promise,s)}if(!t._sameOriginCheck(o))return p["default"].promiseReject.call(n.window.Promise,new TypeError);r.Headers.prototype.entries=r.Headers.prototype[Symbol.iterator]=p["default"].headersEntries;var a=p["default"].fetch.apply(this,o);return r.Headers.prototype.entries=r.Headers.prototype[Symbol.iterator]=t._entriesWrapper,n.emit(n.FETCH_REQUEST_SENT_EVENT,a),p["default"].promiseThen.call(a,function(e){return n.cookieSandbox.syncCookie(),e})};var o=p["default"].fetch.toString();r.fetch.toString=function(){return o},(0,E.overrideDescriptor)(r.Response.prototype,"type",{getter:function(){return t._getResponseType(this)}}),(0,E.overrideDescriptor)(r.Response.prototype,"status",{getter:function(){var e=p["default"].responseStatusGetter.call(this);return e===v["default"]?0:e}}),(0,E.overrideDescriptor)(r.Response.prototype,"url",{getter:function(){var e=p["default"].responseUrlGetter.call(this),t=e&&(0,h.parseProxyUrl)(e);return t?t.destUrl:e}}),r.Headers.prototype.entries=r.Headers.prototype[Symbol.iterator]=t._entriesWrapper,r.Headers.prototype.values=t._valuesWrapper,r.Headers.prototype.forEach=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];return"function"==typeof n&&(t[0]=function(e,t){t!==f["default"].origin&&t!==f["default"].fetchRequestCredentials&&n.apply(this,arguments)}),p["default"].headersForEach.apply(this,t)}}},t}(u["default"]);e["default"]=_,t.exports=e["default"]},"ie-debug.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("./base"),l=n(a),u=r("../utils/browser"),c="__BROWSERTOOLS_CONSOLE_SAFEFUNC",p=function(e){function t(){o(this,t);var r=i(this,e.call(this));
return r._isDebuggerInitiator=!1,r}return s(t,e),t.prototype._createFuncWrapper=function(e){var t=this;return"function"==typeof e?function(e,r){var n=t;return function(){n._isDebuggerInitiator=!0;try{var t=e(arguments);return n._isDebuggerInitiator=!1,t}catch(o){r(o)}n._isDebuggerInitiator=!1}}:e},t.prototype.isDebuggerInitiator=function(){return this._isDebuggerInitiator},t.prototype.attach=function(e){var t=this;if(u.isIE){var r=this.nativeMethods.objectGetOwnPropertyDescriptor(e,c),n=void 0;r&&!r.value||(r&&(n=this._createFuncWrapper(r.value)),this.nativeMethods.objectDefineProperty(e,c,{set:function(e){n=t._createFuncWrapper(e)},get:function(){return n}}))}},t}(l["default"]);e["default"]=p,t.exports=e["default"]},"iframe.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../processing/dom/internal-properties"),u=o(l),c=r("./base"),p=o(c),d=r("../settings"),f=o(d),h=r("../sandbox/native-methods"),m=o(h),y=r("../../processing/dom"),g=r("../utils/dom"),v=r("../utils/browser"),E=r("../json"),b=n(E),S="hammerhead|iframe-window-inited",w=function(e){function t(r,n){i(this,t);var o=s(this,e.call(this));return o.RUN_TASK_SCRIPT_EVENT="hammerhead|event|run-task-script",o.EVAL_HAMMERHEAD_SCRIPT_EVENT="hammerhead|event|eval-hammerhead-script",o.EVAL_EXTERNAL_SCRIPT_EVENT="hammerhead|event|eval-external-script",o.IFRAME_DOCUMENT_CREATED_EVENT="hammerhead|event|iframe-document-created",o.cookieSandbox=n,o.on(o.RUN_TASK_SCRIPT_EVENT,o.iframeReadyToInitHandler),r.on(r.IFRAME_ADDED_TO_DOM_EVENT,function(e){return o.processIframe(e.iframe)}),o.iframeNativeMethodsBackup=null,o}return a(t,e),t.prototype._shouldSaveIframeNativeMethods=function(e){if(!v.isWebKit)return!1;var t=this.nativeMethods.getAttribute.call(e,"src");return(0,y.isJsProtocol)(t)},t.prototype._ensureIframeNativeMethodsForChrome=function(e){var t=m["default"].contentWindowGetter.call(e),r=m["default"].contentDocumentGetter.call(e);!this.iframeNativeMethodsBackup&&this._shouldSaveIframeNativeMethods(e)?this.iframeNativeMethodsBackup=new this.nativeMethods.constructor(r,t):this.iframeNativeMethodsBackup&&(this.iframeNativeMethodsBackup.restoreDocumentMeths(t,r),this.iframeNativeMethodsBackup=null)},t.prototype._ensureIframeNativeMethodsForIE=function(e){var t=m["default"].contentWindowGetter.call(e),r=m["default"].contentDocumentGetter.call(e),n=t[u["default"].iframeNativeMethods];n&&(n.restoreDocumentMeths(t,r),delete t[u["default"].iframeNativeMethods])},t.prototype._ensureIframeNativeMethods=function(e){this._ensureIframeNativeMethodsForChrome(e),this._ensureIframeNativeMethodsForIE(e)},t.prototype._emitEvents=function(e){this.emit(this.EVAL_HAMMERHEAD_SCRIPT_EVENT,{iframe:e}),this.emit(this.EVAL_EXTERNAL_SCRIPT_EVENT,{iframe:e}),this.emit(this.RUN_TASK_SCRIPT_EVENT,{iframe:e})},t.prototype._raiseReadyToInitEvent=function(e){if((0,g.isIframeWithoutSrc)(e)){var r=m["default"].contentWindowGetter.call(e),n=m["default"].contentDocumentGetter.call(e);t.isIframeInitialized(e)?r[S]||r[u["default"].hammerhead]||(this._ensureIframeNativeMethods(e),m["default"].objectDefineProperty.call(this.window.Object,r,S,{value:!0}),this._emitEvents(e),r[u["default"].processDomMethodName]()):n.write.toString()===this.nativeMethods.documentWrite.toString()&&this.emit(this.IFRAME_DOCUMENT_CREATED_EVENT,{iframe:e})}},t.isIframeInitialized=function(e){var t=m["default"].contentWindowGetter.call(e),r=m["default"].contentDocumentGetter.call(e),n=v.isFirefox&&"uninitialized"===t.document.readyState;return!n&&!!r.documentElement||v.isIE&&t[u["default"].documentWasCleaned]},t.isWindowInited=function(e){return e[S]},t.prototype.iframeReadyToInitHandler=function(e){var t=f["default"].get().iframeTaskScriptTemplate,r=function(e){return e.replace(/\$/g,"$$$$")},n=b.stringify(this.cookieSandbox.getCookie()),o=f["default"].get().referer||this.window.location.toString(),i=b.stringify(t),s=t.replace("{{{cookie}}}",r(n)).replace("{{{referer}}}",r(o)).replace("{{{iframeTaskScriptTemplate}}}",r(i)),a=m["default"].contentWindowGetter.call(e.iframe);a.eval.call(a,s)},t.prototype.onIframeBeganToRun=function(e){this._raiseReadyToInitEvent(e)},t.prototype.processIframe=function(e){var t=this;if(!(0,g.isShadowUIElement)(e)){var r=(0,g.getTagName)(e);("iframe"===r&&m["default"].contentWindowGetter.call(e)||"frame"===r&&m["default"].frameContentWindowGetter.call(e))&&this._raiseReadyToInitEvent(e),this.nativeMethods.addEventListener.call(e,"load",function(){return t._raiseReadyToInitEvent(e)})}},t}(p["default"]);e["default"]=w,t.exports=e["default"]},"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../processing/dom/internal-properties"),u=o(l),c=r("./code-instrumentation"),p=o(c),d=r("./cookie"),f=o(d),h=r("./event/element-editing-watcher"),m=o(h),y=r("./event"),g=o(y),v=r("./event/simulator"),E=o(v),b=r("./iframe"),S=o(b),w=r("./event/listeners"),_=o(w),x=r("./event/message"),T=o(x),C=r("./node/mutation"),A=o(C),P=r("./node"),O=o(P),I=r("./base"),M=o(I),N=r("./shadow-ui"),D=o(N),L=r("./timers"),j=o(L),k=r("./event/unload"),R=o(k),U=r("./upload"),H=o(U),F=r("./xhr"),B=o(F),W=r("./fetch"),G=o(W),V=r("./storages"),q=o(V),K=r("./electron"),X=o(K),$=r("./console"),Y=o($),z=r("./style"),Q=o(z),J=r("../utils/browser"),Z=r("../utils/html"),ee=r("./code-instrumentation/properties/anchor"),te=r("./backup"),re=r("../utils/url-resolver"),ne=o(re),oe=r("./windows-storage"),ie=n(oe),se=r("../sandbox/native-methods"),ae=o(se),le=r("./ie-debug"),ue=o(le),ce=function(e){function t(){i(this,t);var r=s(this,e.call(this));(0,te.create)(window,r),ie.add(window);var n=new ue["default"],o=new _["default"],a=new A["default"],l=new R["default"](o),u=new T["default"](o,l),c=new E["default"],d=new m["default"](c),h=new j["default"],y=new f["default"](u);return r.ieDebug=n,r.cookie=y,r.storageSandbox=new q["default"](o,l,c),r.xhr=new B["default"](y),r.fetch=new G["default"](y),r.iframe=new S["default"](a,y),r.shadowUI=new D["default"](a,u,r.iframe,n),r.upload=new H["default"](o,c,r.shadowUI),r.event=new g["default"](o,c,d,l,u,r.shadowUI,h),r.node=new O["default"](a,r.iframe,r.event,r.upload,r.shadowUI,y),r.codeInstrumentation=new p["default"](r.event,r.node.win,u),r.console=new Y["default"](u),r.style=new Q["default"],r.unload=l,J.isElectron&&(r.electron=new X["default"]),r.windowStorage=ie,r}return a(t,e),t._canUseSandbox=function(e){try{e.off()}catch(t){return!1}return!0},t.prototype.onIframeDocumentRecreated=function(e){if(e){var r=ae["default"].contentWindowGetter.call(e),n=ae["default"].contentDocumentGetter.call(e),o=(0,te.get)(r);o&&t._canUseSandbox(o)?o.reattach(r,n):(r[u["default"].iframeNativeMethods]&&delete r[u["default"].iframeNativeMethods],this.nativeMethods.restoreDocumentMeths(r,n),this.iframe.onIframeBeganToRun(e))}},t.prototype.reattach=function(e,t){J.isIE&&this.nativeMethods.refreshIfNecessary(t,e),ne["default"].init(t),this.event.initDocumentListening(t),this.shadowUI.attach(e),this.codeInstrumentation.attach(e),this.node.doc.attach(e,t),this.console.attach(e)},t.prototype.attach=function(t){var r=this;e.prototype.attach.call(this,t),ne["default"].init(this.document),this.iframe.on(this.iframe.EVAL_HAMMERHEAD_SCRIPT_EVENT,function(e){ae["default"].contentWindowGetter.call(e.iframe).eval("("+initHammerheadClient.toString()+")();//# sourceURL=hammerhead.js")}),this.node.mutation.on(this.node.mutation.DOCUMENT_CLEANED_EVENT,function(e){return r.reattach(e.window,e.document)}),this.ieDebug.attach(t),this.iframe.attach(t),this.xhr.attach(t),this.fetch.attach(t),this.storageSandbox.attach(t),this.codeInstrumentation.attach(t),this.shadowUI.attach(t),this.event.attach(t),this.node.attach(t),this.upload.attach(t),this.cookie.attach(t),this.console.attach(t),this.style.attach(t),this.electron&&this.electron.attach(t),this.unload.on(this.unload.UNLOAD_EVENT,function(){return r.dispose()})},t.prototype._removeInternalProperties=function(){var e=this.event.listeners.listeningCtx.removeListeningElement;e(this.window),e(this.document);for(var t=ae["default"].querySelectorAll.call(this.document,"*"),r=ae["default"].nodeListLengthGetter.call(t),n=0;n<r;n++){var o=t[n];delete o[u["default"].processedContext],e(o)}},t.prototype.dispose=function(){this.event.hover.lastHoveredElement=null,this.event.focusBlur.lastFocusedElement=null,(0,Z.dispose)(),(0,ee.dispose)(),ne["default"].dispose(this.document),this.storageSandbox.dispose(),this._removeInternalProperties()},t}(M["default"]);e["default"]=ce,t.exports=e["default"]},"native-methods.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function e(t,r){n(this,e),r=r||window,this.refreshDocumentMeths(t,r),this.refreshElementMeths(t,r),this.refreshWindowMeths(r)}return e._getDocumentPropOwnerName=function(e,t){return e.hasOwnProperty(t)?"Document":"HTMLDocument"},e.prototype.getStoragesPropsOwner=function(e){return this.isStoragePropsLocatedInProto?e.Window.prototype:e},e.prototype.refreshDocumentMeths=function(t,r){t=t||document,r=r||window;var n=r.Document.prototype;this.createDocumentFragment=n.createDocumentFragment,this.createElement=n.createElement,this.createElementNS=n.createElementNS,this.documentOpenPropOwnerName=e._getDocumentPropOwnerName(n,"open"),this.documentClosePropOwnerName=e._getDocumentPropOwnerName(n,"close"),this.documentWritePropOwnerName=e._getDocumentPropOwnerName(n,"write"),this.documentWriteLnPropOwnerName=e._getDocumentPropOwnerName(n,"writeln"),this.documentOpen=r[this.documentOpenPropOwnerName].prototype.open,this.documentClose=r[this.documentClosePropOwnerName].prototype.close,this.documentWrite=r[this.documentWritePropOwnerName].prototype.write,this.documentWriteLn=r[this.documentWriteLnPropOwnerName].prototype.writeln,this.elementFromPoint=n.elementFromPoint,this.caretRangeFromPoint=n.caretRangeFromPoint,this.caretPositionFromPoint=n.caretPositionFromPoint,this.getElementById=n.getElementById,this.getElementsByClassName=n.getElementsByClassName,this.getElementsByName=n.getElementsByName,this.getElementsByTagName=n.getElementsByTagName,this.querySelector=n.querySelector,this.querySelectorAll=n.querySelectorAll,this.createHTMLDocument=r.DOMImplementation.prototype.createHTMLDocument,t.registerElement&&(this.registerElement=n.registerElement),this.documentAddEventListener=n.addEventListener,this.documentRemoveEventListener=n.removeEventListener,this.documentCreateEvent=n.createEvent,this.documentCreateTouch=n.createTouch,this.documentCreateTouchList=n.createTouchList,this.documentCookiePropOwnerName=e._getDocumentPropOwnerName(n,"cookie"),this.documentScriptsPropOwnerName=e._getDocumentPropOwnerName(n,"scripts");var o=r.Object.getOwnPropertyDescriptor(r[this.documentCookiePropOwnerName].prototype,"cookie");if(o.get.toString().indexOf("native code")===-1||o.get.toString.toString().indexOf("native code")===-1)try{var i=r.parent["%hammerhead%"].nativeMethods;o.get=i.documentCookieGetter,o.set=i.documentCookieSetter}catch(s){}this.documentReferrerGetter=r.Object.getOwnPropertyDescriptor(n,"referrer").get,this.documentStyleSheetsGetter=r.Object.getOwnPropertyDescriptor(n,"styleSheets").get,this.documentActiveElementGetter=r.Object.getOwnPropertyDescriptor(n,"activeElement").get,this.documentScriptsGetter=r.Object.getOwnPropertyDescriptor(r[this.documentScriptsPropOwnerName].prototype,"scripts").get,this.documentCookieGetter=o.get,this.documentCookieSetter=o.set;var a=r.Object.getOwnPropertyDescriptor(n,"documentURI");a&&(this.documentDocumentURIGetter=a.get)},e.prototype.refreshElementMeths=function(e,t){var r=this;t=t||window;var n=function(t){return r.createElement.call(e||document,t)},o=n("div");this.appendChild=o.appendChild,this.replaceChild=o.replaceChild,this.cloneNode=o.cloneNode,this.elementGetElementsByClassName=o.getElementsByClassName,this.elementGetElementsByTagName=o.getElementsByTagName,this.elementQuerySelector=o.querySelector,this.elementQuerySelectorAll=o.querySelectorAll,this.getAttribute=o.getAttribute,this.getAttributeNS=o.getAttributeNS,this.insertAdjacentHTML=o.insertAdjacentHTML,this.insertBefore=o.insertBefore,this.insertCell=n("tr").insertCell,this.insertTableRow=n("table").insertRow,this.insertTBodyRow=n("tbody").insertRow,this.removeAttribute=o.removeAttribute,this.removeAttributeNS=o.removeAttributeNS,this.removeChild=o.removeChild,this.setAttribute=o.setAttribute,this.setAttributeNS=o.setAttributeNS,this.hasAttribute=o.hasAttribute,this.hasAttributeNS=o.hasAttributeNS,this.hasAttributes=o.hasAttributes,this.anchorToString=t.HTMLAnchorElement.prototype.toString,this.matches=o.matches||o.msMatchesSelector,this.closest=o.closest,this.addEventListener=o.addEventListener,this.removeEventListener=o.removeEventListener,this.blur=o.blur,this.click=o.click,this.dispatchEvent=o.dispatchEvent,this.focus=o.focus,this.select=window.TextRange?n("body").createTextRange().select:null,this.setSelectionRange=n("input").setSelectionRange,this.textAreaSetSelectionRange=n("textarea").setSelectionRange,this.svgFocus=t.SVGElement?t.SVGElement.prototype.focus:this.focus,this.svgBlur=t.SVGElement?t.SVGElement.prototype.blur:this.blur,this.htmlElementStylePropOwnerName=t.Element.prototype.hasOwnProperty("style")?"Element":"HTMLElement";var i=t.Object.getOwnPropertyDescriptor(t[this.htmlElementStylePropOwnerName].prototype,"style");this.htmlElementStyleGetter=i.get,i.set&&(this.htmlElementStyleSetter=i.set);var s=t.Object.getOwnPropertyDescriptor(t.CSSStyleDeclaration.prototype,"cssText");this.styleCssTextGetter=s.get,this.styleCssTextSetter=s.set},e.prototype.refreshWindowMeths=function(e){e=e||window;var t=e.constructor.prototype;this.eval=e.eval,this.formSubmit=e.HTMLFormElement.prototype.submit,this.documentFragmentQuerySelector=e.DocumentFragment.prototype.querySelector,this.documentFragmentQuerySelectorAll=e.DocumentFragment.prototype.querySelectorAll,this.preventDefault=e.Event.prototype.preventDefault,this.historyPushState=e.history.pushState,this.historyReplaceState=e.history.replaceState,this.windowDispatchEvent=e.dispatchEvent,this.postMessage=e.postMessage||t.postMessage,this.windowOpen=e.open||t.open,this.setTimeout=e.setTimeout||t.setTimeout,this.setInterval=e.setInterval||t.setInterval,this.clearTimeout=e.clearTimeout||t.clearTimeout,this.clearInterval=e.clearInterval||t.clearInterval,e.navigator.registerProtocolHandler&&(this.registerProtocolHandler=e.navigator.registerProtocolHandler),e.navigator.sendBeacon&&(this.sendBeacon=e.navigator.sendBeacon),this.xhrAbort=e.XMLHttpRequest.prototype.abort,this.xhrOpen=e.XMLHttpRequest.prototype.open,this.xhrSend=e.XMLHttpRequest.prototype.send,this.xhrAddEventListener=e.XMLHttpRequest.prototype.addEventListener,this.xhrRemoveEventListener=e.XMLHttpRequest.prototype.removeEventListener,this.xhrGetResponseHeader=e.XMLHttpRequest.prototype.getResponseHeader,this.xhrGetAllResponseHeaders=e.XMLHttpRequest.prototype.getAllResponseHeaders,this.xhrSetRequestHeader=e.XMLHttpRequest.prototype.setRequestHeader,this.xhrOverrideMimeType=e.XMLHttpRequest.prototype.overrideMimeType,this.xhrDispatchEvent=e.XMLHttpRequest.prototype.dispatchEvent;try{this.registerServiceWorker=e.navigator.serviceWorker.register,this.getRegistrationServiceWorker=e.navigator.serviceWorker.getRegistration}catch(r){this.registerServiceWorker=null,this.getRegistrationServiceWorker=null}this.createContextualFragment=e.Range.prototype.createContextualFragment;var n=e.performance,o=e.performance.now||e.Performance.prototype.now;this.performanceNow=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.apply(n,t)},this.fetch=e.fetch,this.Request=e.Request,e.Headers&&(this.Headers=e.Headers,this.headersSet=e.Headers.prototype.set,this.headersEntries=e.Headers.prototype.entries,this.headersForEach=e.Headers.prototype.forEach),this.windowAddEventListener=e.addEventListener||t.addEventListener,this.windowRemoveEventListener=e.removeEventListener||t.removeEventListener,this.WindowPointerEvent=e.PointerEvent||t.PointerEvent,this.WindowMSPointerEvent=e.MSPointerEvent||t.MSPointerEvent,this.WindowTouch=e.Touch||t.Touch,this.WindowTouchEvent=e.TouchEvent||t.TouchEvent,this.WindowKeyboardEvent=e.KeyboardEvent||t.KeyboardEvent,this.WindowFocusEvent=e.FocusEvent||t.FocusEvent,this.WindowTextEvent=e.TextEvent||t.TextEvent,this.WindowMouseEvent=e.MouseEvent||t.MouseEvent,this.canvasContextDrawImage=e.CanvasRenderingContext2D.prototype.drawImage,this.formDataAppend=e.FormData.prototype.append,this.date=e.Date,this.dateNow=e.Date.now,this.math=e.Math,this.mathRandom=e.Math.random,this.objectToString=e.Object.prototype.toString,this.objectAssign=e.Object.assign,this.objectKeys=e.Object.keys,this.objectDefineProperty=e.Object.defineProperty,this.objectDefineProperties=e.Object.defineProperties,this.objectCreate=e.Object.create,this.objectIsExtensible=e.Object.isExtensible,this.objectIsFrozen=e.Object.isFrozen,this.objectGetOwnPropertyDescriptor=e.Object.getOwnPropertyDescriptor,this.objectHasOwnProperty=e.Object.hasOwnProperty,this.objectGetOwnPropertyNames=e.Object.getOwnPropertyNames,this.objectGetPrototypeOf=e.Object.getPrototypeOf,this.arraySlice=e.Array.prototype.slice,this.arrayConcat=e.Array.prototype.concat,this.arrayFilter=e.Array.prototype.filter,this.arrayMap=e.Array.prototype.map,this.arrayJoin=e.Array.prototype.join,this.DOMParserParseFromString=e.DOMParser.prototype.parseFromString,this.arrayBufferIsView=e.ArrayBuffer.prototype.constructor.isView;var i=e.Object.getOwnPropertyDescriptor(e.HTMLObjectElement.prototype,"data"),s=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"type"),a=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"value"),l=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"required"),u=e.Object.getOwnPropertyDescriptor(e.HTMLTextAreaElement.prototype,"value"),c=e.Object.getOwnPropertyDescriptor(e.HTMLImageElement.prototype,"src"),p=e.Object.getOwnPropertyDescriptor(e.HTMLScriptElement.prototype,"src"),d=e.Object.getOwnPropertyDescriptor(e.HTMLScriptElement.prototype,"integrity"),f=e.Object.getOwnPropertyDescriptor(e.HTMLEmbedElement.prototype,"src"),h=e.Object.getOwnPropertyDescriptor(e.HTMLSourceElement.prototype,"src"),m=e.Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src"),y=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"src"),g=e.Object.getOwnPropertyDescriptor(e.HTMLFrameElement.prototype,"src"),v=e.Object.getOwnPropertyDescriptor(e.HTMLIFrameElement.prototype,"src"),E=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"href"),b=e.Object.getOwnPropertyDescriptor(e.HTMLLinkElement.prototype,"href"),S=e.Object.getOwnPropertyDescriptor(e.HTMLLinkElement.prototype,"integrity"),w=e.Object.getOwnPropertyDescriptor(e.HTMLLinkElement.prototype,"rel"),_=e.Object.getOwnPropertyDescriptor(e.HTMLAreaElement.prototype,"href"),x=e.Object.getOwnPropertyDescriptor(e.HTMLBaseElement.prototype,"href"),T=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"host"),C=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"hostname"),A=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"pathname"),P=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"port"),O=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"protocol"),I=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"search"),M=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"target"),N=e.Object.getOwnPropertyDescriptor(e.HTMLFormElement.prototype,"target"),D=e.Object.getOwnPropertyDescriptor(e.HTMLAreaElement.prototype,"target"),L=e.Object.getOwnPropertyDescriptor(e.HTMLBaseElement.prototype,"target"),j=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"formTarget"),k=e.Object.getOwnPropertyDescriptor(e.HTMLButtonElement.prototype,"formTarget"),R=e.Object.getOwnPropertyDescriptor(e.SVGImageElement.prototype,"href"),U=e.Object.getOwnPropertyDescriptor(e.SVGAnimatedString.prototype,"animVal"),H=e.Object.getOwnPropertyDescriptor(e.SVGAnimatedString.prototype,"baseVal"),F=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"autocomplete"),B=e.Object.getOwnPropertyDescriptor(e.HTMLFormElement.prototype,"action"),W=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"formAction"),G=e.Object.getOwnPropertyDescriptor(e.HTMLButtonElement.prototype,"formAction"),V=e.Object.getOwnPropertyDescriptor(e.Node.prototype,"textContent"),q=e.Object.getOwnPropertyDescriptor(e.HTMLElement.prototype,"innerText"),K=e.Object.getOwnPropertyDescriptor(e.HTMLScriptElement.prototype,"text"),X=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"text"),$=e.Object.getOwnPropertyDescriptor(e.HTMLIFrameElement.prototype,"sandbox");this.elementHTMLPropOwnerName=e.Element.prototype.hasOwnProperty("innerHTML")?"Element":"HTMLElement";var Y=e.Object.getOwnPropertyDescriptor(e[this.elementHTMLPropOwnerName].prototype,"innerHTML"),z=e.Object.getOwnPropertyDescriptor(e[this.elementHTMLPropOwnerName].prototype,"outerHTML");this.objectDataSetter=i.set,this.inputTypeSetter=s.set,this.inputValueSetter=a.set,this.inputRequiredSetter=l.set,this.textAreaValueSetter=u.set,this.imageSrcSetter=c.set,this.scriptSrcSetter=p.set,this.embedSrcSetter=f.set,this.sourceSrcSetter=h.set,this.mediaSrcSetter=m.set,this.inputSrcSetter=y.set,this.frameSrcSetter=g.set,this.iframeSrcSetter=v.set,this.anchorHrefSetter=E.set,this.linkHrefSetter=b.set,this.linkRelSetter=w.set,this.areaHrefSetter=_.set,this.baseHrefSetter=x.set,this.anchorHostSetter=T.set,this.anchorHostnameSetter=C.set,this.anchorPathnameSetter=A.set,this.anchorPortSetter=P.set,this.anchorProtocolSetter=O.set,this.anchorSearchSetter=I.set,this.anchorTargetSetter=M.set,this.formTargetSetter=N.set,this.areaTargetSetter=D.set,this.baseTargetSetter=L.set,this.inputFormTargetSetter=j.set,this.buttonFormTargetSetter=k.set,this.svgAnimStrBaseValSetter=H.set,this.inputAutocompleteSetter=F.set,this.formActionSetter=B.set,this.inputFormActionSetter=W.set,this.buttonFormActionSetter=G.set,this.iframeSandboxSetter=$.set,this.htmlElementOnloadSetter=e.Object.getOwnPropertyDescriptor(e.HTMLElement.prototype,"onload").set,this.nodeTextContentSetter=V.set,this.htmlElementInnerTextSetter=q.set,this.scriptTextSetter=K.set,this.anchorTextSetter=X.set,this.elementInnerHTMLSetter=Y.set,this.elementOuterHTMLSetter=z.set,d&&S&&(this.scriptIntegritySetter=d.set,this.linkIntegritySetter=S.set),this.isEventPropsLocatedInProto=e.Window.prototype.hasOwnProperty("onerror");var Q=this.isEventPropsLocatedInProto?e.Window.prototype:e;this.winOnBeforeUnloadSetter=e.Object.getOwnPropertyDescriptor(Q,"onbeforeunload").set,this.winOnPageHideSetter=e.Object.getOwnPropertyDescriptor(Q,"onpagehide").set,this.winOnMessageSetter=e.Object.getOwnPropertyDescriptor(Q,"onmessage").set,this.winOnErrorSetter=e.Object.getOwnPropertyDescriptor(Q,"onerror").set;var J=e.Object.getOwnPropertyDescriptor(Q,"onunhandledrejection");if(J&&(this.winOnUnhandledRejectionSetter=J.set),e.WebSocket){var Z=e.Object.getOwnPropertyDescriptor(e.WebSocket.prototype,"url");Z&&Z.get&&Z.configurable&&(this.webSocketUrlGetter=Z.get)}this.messageEventOriginGetter=e.Object.getOwnPropertyDescriptor(e.MessageEvent.prototype,"origin").get,this.htmlCollectionLengthGetter=e.Object.getOwnPropertyDescriptor(e.HTMLCollection.prototype,"length").get,this.nodeListLengthGetter=e.Object.getOwnPropertyDescriptor(e.NodeList.prototype,"length").get,this.elementChildElementCountGetter=e.Object.getOwnPropertyDescriptor(e.Element.prototype,"childElementCount").get,this.inputFilesGetter=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"files").get,this.styleSheetHrefGetter=e.Object.getOwnPropertyDescriptor(e.StyleSheet.prototype,"href").get,this.xhrStatusGetter=e.Object.getOwnPropertyDescriptor(e.XMLHttpRequest.prototype,"status").get,this.objectDataGetter=i.get,this.inputTypeGetter=s.get,this.inputValueGetter=a.get,this.inputRequiredGetter=l.get,this.textAreaValueGetter=u.get,this.imageSrcGetter=c.get,this.scriptSrcGetter=p.get,this.embedSrcGetter=f.get,this.sourceSrcGetter=h.get,this.mediaSrcGetter=m.get,this.inputSrcGetter=y.get,this.frameSrcGetter=g.get,this.iframeSrcGetter=v.get,this.anchorHrefGetter=E.get,this.linkHrefGetter=b.get,this.linkRelGetter=w.get,this.areaHrefGetter=_.get,this.baseHrefGetter=x.get,this.anchorHostGetter=T.get,this.anchorHostnameGetter=C.get,this.anchorPathnameGetter=A.get,this.anchorPortGetter=P.get,this.anchorProtocolGetter=O.get,this.anchorSearchGetter=I.get,this.anchorTargetGetter=M.get,this.formTargetGetter=N.get,this.areaTargetGetter=D.get,this.baseTargetGetter=L.get,this.inputFormTargetGetter=j.get,this.buttonFormTargetGetter=k.get,this.svgImageHrefGetter=R.get,this.svgAnimStrAnimValGetter=U.get,this.svgAnimStrBaseValGetter=H.get,this.inputAutocompleteGetter=F.get,this.formActionGetter=B.get,this.inputFormActionGetter=W.get,this.buttonFormActionGetter=G.get,this.iframeSandboxGetter=$.get,this.contentWindowGetter=e.Object.getOwnPropertyDescriptor(e.HTMLIFrameElement.prototype,"contentWindow").get,this.contentDocumentGetter=e.Object.getOwnPropertyDescriptor(e.HTMLIFrameElement.prototype,"contentDocument").get,this.frameContentWindowGetter=e.Object.getOwnPropertyDescriptor(e.HTMLFrameElement.prototype,"contentWindow").get,this.nodeTextContentGetter=V.get,this.htmlElementInnerTextGetter=q.get,this.scriptTextGetter=K.get,this.anchorTextGetter=X.get,this.elementInnerHTMLGetter=Y.get,this.elementOuterHTMLGetter=z.get,this.nodeFirstChildGetter=e.Object.getOwnPropertyDescriptor(e.Node.prototype,"firstChild").get,this.nodeLastChildGetter=e.Object.getOwnPropertyDescriptor(e.Node.prototype,"lastChild").get,this.nodeNextSiblingGetter=e.Object.getOwnPropertyDescriptor(e.Node.prototype,"nextSibling").get,this.nodePrevSiblingGetter=e.Object.getOwnPropertyDescriptor(e.Node.prototype,"previousSibling").get,this.elementFirstElementChildGetter=e.Object.getOwnPropertyDescriptor(e.Element.prototype,"firstElementChild").get,this.elementLastElementChildGetter=e.Object.getOwnPropertyDescriptor(e.Element.prototype,"lastElementChild").get,this.elementNextElementSiblingGetter=e.Object.getOwnPropertyDescriptor(e.Element.prototype,"nextElementSibling").get,this.elementPrevElementSiblingGetter=e.Object.getOwnPropertyDescriptor(e.Element.prototype,"previousElementSibling").get;var ee=e.Object.getOwnPropertyDescriptor(e.HTMLAnchorElement.prototype,"origin");d&&S&&(this.scriptIntegrityGetter=d.get,this.linkIntegrityGetter=S.get),ee&&(this.anchorOriginGetter=ee.get);var te=e.Object.getOwnPropertyDescriptor(e.CSSStyleSheet.prototype,"href");te&&(this.cssStyleSheetHrefGetter=te.get);var re=e.Object.getOwnPropertyDescriptor(e.Node.prototype,"baseURI");re&&(this.nodeBaseURIGetter=re.get),this.elementAttributesPropOwnerName=e.Element.prototype.hasOwnProperty("attributes")?"Element":"Node",this.elementAttributesGetter=e.Object.getOwnPropertyDescriptor(e[this.elementAttributesPropOwnerName].prototype,"attributes").get,e.PerformanceNavigationTiming&&(this.performanceEntryNameGetter=e.Object.getOwnPropertyDescriptor(e.PerformanceEntry.prototype,"name").get);var ne=e.Object.getOwnPropertyDescriptor(e.MessageEvent.prototype,"data");ne&&(this.messageEventDataGetter=ne.get);var oe=e.Object.getOwnPropertyDescriptor(e.HTMLHtmlElement.prototype,"manifest");oe&&(this.htmlManifestGetter=oe.get,this.htmlManifestSetter=oe.set),e.fetch&&(this.responseStatusGetter=e.Object.getOwnPropertyDescriptor(e.Response.prototype,"status").get,this.responseTypeGetter=e.Object.getOwnPropertyDescriptor(e.Response.prototype,"type").get,this.responseUrlGetter=e.Object.getOwnPropertyDescriptor(e.Response.prototype,"url").get),e.Promise&&(this.promiseThen=e.Promise.prototype.then,this.promiseReject=e.Promise.reject);var ie=e.Object.getOwnPropertyDescriptor(e.XMLHttpRequest.prototype,"responseURL");ie&&(this.xhrResponseURLGetter=ie.get),this.isStoragePropsLocatedInProto=e.Window.prototype.hasOwnProperty("localStorage");var se=this.getStoragesPropsOwner(e);this.winLocalStorageGetter=e.Object.getOwnPropertyDescriptor(se,"localStorage").get,this.winSessionStorageGetter=e.Object.getOwnPropertyDescriptor(se,"sessionStorage").get,this.mutationRecordNextSiblingGetter=e.Object.getOwnPropertyDescriptor(e.MutationRecord.prototype,"nextSibling").get,this.mutationRecordPrevSiblingGetter=e.Object.getOwnPropertyDescriptor(e.MutationRecord.prototype,"previousSibling").get,this.styleGetPropertyValue=e.CSSStyleDeclaration.prototype.getPropertyValue,this.styleSetProperty=e.CSSStyleDeclaration.prototype.setProperty,this.styleRemoveProperty=e.CSSStyleDeclaration.prototype.removeProperty,this.console=e.console,this.console&&(this.consoleMeths={log:e.console.log,warn:e.console.warn,error:e.console.error,info:e.console.info}),this.tokenListAdd=e.DOMTokenList.prototype.add,this.tokenListRemove=e.DOMTokenList.prototype.remove,this.tokenListReplace=e.DOMTokenList.prototype.replace,this.tokenListSupports=e.DOMTokenList.prototype.supports,this.tokenListToggle=e.DOMTokenList.prototype.toggle,this.tokenListContains=e.DOMTokenList.prototype.contains,this.refreshClasses(e)},e.prototype.refreshClasses=function(e){this.windowClass=e.Window,this.documentClass=e.Document,this.locationClass=e.Location,this.elementClass=e.Element,this.svgElementClass=e.SVGElement,this.Worker=e.Worker,this.ArrayBuffer=e.ArrayBuffer,this.Uint8Array=e.Uint8Array,this.DataView=e.DataView,this.Blob=e.Blob,this.XMLHttpRequest=e.XMLHttpRequest,this.Image=e.Image,this.Function=e.Function,this.functionToString=e.Function.toString,this.FontFace=e.FontFace,this.StorageEvent=e.StorageEvent,this.MutationObserver=e.MutationObserver,this.EventSource=e.EventSource,this.Proxy=e.Proxy,this.WebSocket=e.WebSocket,this.HTMLCollection=e.HTMLCollection,this.NodeList=e.NodeList,this.Node=e.Node,e.Proxy&&(this.Proxy=e.Proxy),e.DataTransfer&&(this.DataTransfer=e.DataTransfer),e.DataTransferItemList&&(this.DataTransferItemList=e.DataTransferItemList),e.DataTransferItem&&(this.DataTransferItem=e.DataTransferItem),e.FileList&&(this.FileList=e.FileList)},e.prototype.refreshElectronMeths=function(e){return(!this.createScript||this.createScript.toString()===e.createScript.toString())&&(this.createScript=e.createScript,this.runInDebugContext=e.runInDebugContext,this.runInContext=e.runInContext,this.runInNewContext=e.runInNewContext,this.runInThisContext=e.runInThisContext,!0);
},e._ensureDocumentMethodRestore=function(e,t,r,n){t[r]=n,e[r]!==t[r]&&(e[r]=n)},e.prototype.restoreDocumentMeths=function(t,r){var n=t.Document.prototype;e._ensureDocumentMethodRestore(r,n,"createDocumentFragment",this.createDocumentFragment),e._ensureDocumentMethodRestore(r,n,"createElement",this.createElement),e._ensureDocumentMethodRestore(r,n,"createElementNS",this.createElementNS),e._ensureDocumentMethodRestore(r,n,"elementFromPoint",this.elementFromPoint),e._ensureDocumentMethodRestore(r,n,"caretRangeFromPoint",this.caretRangeFromPoint),e._ensureDocumentMethodRestore(r,n,"caretPositionFromPoint",this.caretPositionFromPoint),e._ensureDocumentMethodRestore(r,n,"getElementById",this.getElementById),e._ensureDocumentMethodRestore(r,n,"getElementsByClassName",this.getElementsByClassName),e._ensureDocumentMethodRestore(r,n,"getElementsByName",this.getElementsByName),e._ensureDocumentMethodRestore(r,n,"getElementsByTagName",this.getElementsByTagName),e._ensureDocumentMethodRestore(r,n,"querySelector",this.querySelector),e._ensureDocumentMethodRestore(r,n,"querySelectorAll",this.querySelectorAll),e._ensureDocumentMethodRestore(r,n,"addEventListener",this.documentAddEventListener),e._ensureDocumentMethodRestore(r,n,"removeEventListener",this.documentRemoveEventListener),e._ensureDocumentMethodRestore(r,n,"createEvent",this.documentCreateEvent),e._ensureDocumentMethodRestore(r,n,"createTouch",this.documentCreateTouch),e._ensureDocumentMethodRestore(r,n,"createTouchList",this.documentCreateTouchList),e._ensureDocumentMethodRestore(r,t[this.documentOpenPropOwnerName].prototype,"open",this.documentOpen),e._ensureDocumentMethodRestore(r,t[this.documentClosePropOwnerName].prototype,"close",this.documentClose),e._ensureDocumentMethodRestore(r,t[this.documentWritePropOwnerName].prototype,"write",this.documentWrite),e._ensureDocumentMethodRestore(r,t[this.documentWriteLnPropOwnerName].prototype,"writeln",this.documentWriteLn)},e.prototype.refreshIfNecessary=function(e,t){var r=this,n=function(e){try{return e()}catch(t){return!0}},o=n(function(){return!e.createElement||r.createElement.toString()===document.createElement.toString()}),i=n(function(){var t=r.createElement.call(e,"div");return t.getAttribute.toString()===r.getAttribute.toString()}),s=n(function(){return r.setTimeout.call(t,function(){},0),window.XMLHttpRequest.prototype.open.toString()===r.xhrOpen.toString()});o&&this.refreshDocumentMeths(e,t),i&&this.refreshElementMeths(e,t),s&&this.refreshWindowMeths(t)},e}();e["default"]=new o,t.exports=e["default"]},node:{attributes:{"index.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e.length)for(var t=0;t<e.length;t++)delete e[e[t].name],delete e[t]}function i(e,t){for(var r=0,n={},o=0;o<t.length;o++){var i=t[o];if(!(0,c.isHammerheadAttr)(i.name)){var s=t[h["default"].getStoredAttrName(i.name)];if(s){if(h["default"].isAddedAutocompleteAttr(i.name,s.value))continue;i=d["default"].cloneNode.call(i),i.value=s.value}n[i.name]={value:i,configurable:!0},n[r]={value:i,configurable:!0},r++}}n.length={value:r,configurable:!0},d["default"].objectDefineProperties.call(window.Object,e,n)}function s(e){if(e[m])return a(e),e[m];var t=d["default"].elementAttributesGetter.call(e);if(!t)return t;for(var r=0;r<t.length;r++){var n=t[r];if((0,c.isHammerheadAttr)(n.name))return u["default"].prototype=t,e[m]=new u["default"](e,t),e[m]}return t}function a(e){var t=e[m];t&&(o(t),i(t,d["default"].elementAttributesGetter.call(e)))}e.__esModule=!0,e.assignAttributes=i,e.getAttributes=s,e.refreshAttributesWrapper=a;var l=r("./wrapper"),u=n(l),c=r("../../../utils/dom"),p=r("../../native-methods"),d=n(p),f=r("../../../../processing/dom"),h=n(f),m="hammerhead|element-attribute-wrappers"},"wrapper.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){return function(){var n=t[r].apply(t,arguments);return(0,u.refreshAttributesWrapper)(e),n}}e.__esModule=!0;var s=r("../../../utils/fn-bind"),a=n(s),l=r("../../../utils/feature-detection"),u=r("./index"),c=["setNamedItem","setNamedItemNS","removeNamedItem","removeNamedItemNS","getNamedItem","getNamedItemNS"],p=function d(e,t){var r=this;o(this,d),(0,u.assignAttributes)(this,t),this.item=function(e){return r[e]};for(var n in t)"function"==typeof this[n]&&"item"!==n&&(this[n]=c.indexOf(n)!==-1?i(e,t,n):(0,a["default"])(t[n],t));l.attrGetNamedItemIsNotEnumerable&&(this.getNamedItem=i(e,t,"getNamedItem"))};e["default"]=p,t.exports=e["default"]}},document:{"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../base"),u=o(l),c=r("../../iframe"),p=o(c),d=r("../../native-methods"),f=o(d),h=r("../../../dom-processor"),m=o(h),y=r("../../../utils/url"),g=n(y),v=r("../../../settings"),E=o(v),b=r("../../../utils/browser"),S=r("../../../utils/dom"),w=r("./writer"),_=o(w),x=r("./../../shadow-ui"),T=o(x),C=r("../../../../processing/dom/internal-properties"),A=o(C),P=r("../../code-instrumentation/location"),O=o(P),I=r("../../../utils/property-overriding"),M=function(e){function t(r,n,o){i(this,t);var a=s(this,e.call(this));return a.nodeSandbox=r,a.documentWriter=null,a.shadowUI=n,a.cookieSandbox=o,a}return a(t,e),t.forceProxySrcForImageIfNecessary=function(e){(0,S.isImgElement)(e)&&E["default"].get().forceProxySrcForImage&&(e[A["default"].forceProxySrcForImage]=!0)},t._isDocumentInDesignMode=function(e){return"on"===e.designMode},t.prototype._isUninitializedIframeWithoutSrc=function(e){var t=(0,S.getFrameElement)(e);return e!==e.top&&t&&(0,S.isIframeWithoutSrc)(t)&&!p["default"].isIframeInitialized(t)},t.prototype._beforeDocumentCleaned=function(){this.nodeSandbox.mutation.onBeforeDocumentCleaned({document:this.document})},t.prototype._onDocumentClosed=function(){this.nodeSandbox.mutation.onDocumentClosed({document:this.document})},t._shouldEmitDocumentCleanedEvents=function(e){if(b.isIE){if("loading"!==e.readyState)return!0;var t=e.defaultView;if(t[A["default"].documentWasCleaned])return!1;var r=t&&(0,S.getFrameElement)(t);return r&&(0,S.isIframeWithoutSrc)(r)}return"loading"!==e.readyState&&"uninitialized"!==e.readyState},t.prototype._performDocumentWrite=function(e,r){var n=t._shouldEmitDocumentCleanedEvents(this.document);n&&this._beforeDocumentCleaned();var o=this.documentWriter.write(e,r,n);return n||this.nodeSandbox.processNodes(null,this.document),o},t.prototype._needToUpdateDocumentWriter=function(e,t){try{return!this.documentWriter||this.window!==e||this.document!==t}catch(r){return!0}},t._definePropertyDescriptor=function(e,t,r,n){n.configurable?f["default"].objectDefineProperty.call(window.Object,e,r,n):t.hasOwnProperty(r)||f["default"].objectDefineProperty.call(window.Object,t,r,n)},t.prototype.iframeDocumentOpen=function(e,t,r){var n=e.frameElement,o=f["default"].documentOpen.apply(t,r);return f["default"].objectDefineProperty(e,A["default"].documentWasCleaned,{value:!0,configurable:!0}),this.nodeSandbox.iframeSandbox.onIframeBeganToRun(n),o},t._ensureDocumentMethodOverride=function(e,t,r){e[r]!==t[r]&&(e[r]=t[r])},t.prototype.attach=function(r,n){var o=this;this._needToUpdateDocumentWriter(r,n)&&(this.documentWriter=new _["default"](r,n),this.nodeSandbox.mutation.on(this.nodeSandbox.mutation.BEFORE_DOCUMENT_CLEANED_EVENT,function(){o.documentWriter=new _["default"](r,n)})),e.prototype.attach.call(this,r,n);var i=this,s=r.Document.prototype,a={open:function(){var e=i._isUninitializedIframeWithoutSrc(r);e||i._beforeDocumentCleaned();for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if(b.isIE)return r.parent[A["default"].hammerhead].sandbox.node.doc.iframeDocumentOpen(r,this,n);var s=f["default"].documentOpen.apply(this,n),a=r[A["default"].hammerhead]?r[A["default"].hammerhead].nativeMethods.objectDefineProperty:r.Object.defineProperty;return a(r,A["default"].documentWasCleaned,{value:!0,configurable:!0}),e?i.attach(r,this):i.nodeSandbox.mutation.onDocumentCleaned({window:r,document:this}),s},close:function(){b.isIE&&!p["default"].isWindowInited(r)&&f["default"].restoreDocumentMeths(r,this),t._isDocumentInDesignMode(this)&&T["default"].removeSelfRemovingScripts(this);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var s=f["default"].documentClose.apply(this,n);i._isUninitializedIframeWithoutSrc(r)||i._onDocumentClosed();var a=(0,S.getFrameElement)(r);return a&&i.nodeSandbox.iframeSandbox.onIframeBeganToRun(a),s},write:function(){return i._performDocumentWrite(arguments)},writeln:function(){return i._performDocumentWrite(arguments,!0)}};r[f["default"].documentOpenPropOwnerName].prototype.open=a.open,r[f["default"].documentClosePropOwnerName].prototype.close=a.close,r[f["default"].documentWritePropOwnerName].prototype.write=a.write,r[f["default"].documentWriteLnPropOwnerName].prototype.writeln=a.writeln,t._ensureDocumentMethodOverride(n,a,"open"),t._ensureDocumentMethodOverride(n,a,"close"),t._ensureDocumentMethodOverride(n,a,"write"),t._ensureDocumentMethodOverride(n,a,"writeln"),n.open!==a.open&&(n.open=a.open),s.createElement=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=f["default"].createElement.apply(this,r);return t.forceProxySrcForImageIfNecessary(o),m["default"].processElement(o,g.convertToProxyUrl),i.nodeSandbox.processNodes(o),o},s.createElementNS=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=f["default"].createElementNS.apply(this,r);return t.forceProxySrcForImageIfNecessary(o),m["default"].processElement(o,g.convertToProxyUrl),i.nodeSandbox.processNodes(o),o},s.createDocumentFragment=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=f["default"].createDocumentFragment.apply(this,t);return i.nodeSandbox.processNodes(n),n};var l=r.HTMLDocument.prototype,u="";f["default"].documentDocumentURIGetter&&(0,I.overrideDescriptor)(s,"documentURI",{getter:function(){var e=f["default"].documentDocumentURIGetter.call(this),t=g.parseProxyUrl(e);return t?t.destUrl:e}});var c=(0,I.createOverriddenDescriptor)(s,"referrer",{getter:function(){var e=f["default"].documentReferrerGetter.call(this),t=g.parseProxyUrl(e);return t?t.destUrl:""}});t._definePropertyDescriptor(s,l,"referrer",c);var d=(0,I.createOverriddenDescriptor)(s,"URL",{getter:function(){return O["default"].getLocationWrapper(this).href}});t._definePropertyDescriptor(s,l,"URL",d);var h=f["default"].objectHasOwnProperty.call(s,"domain")?s:l,y=(0,I.createOverriddenDescriptor)(h,"domain",{getter:function(){return u||O["default"].getLocationWrapper(r).hostname},setter:function(e){u=e}});t._definePropertyDescriptor(h,l,"domain",y),(0,I.overrideDescriptor)(s,"styleSheets",{getter:function(){var e=f["default"].documentStyleSheetsGetter.call(this);return i.shadowUI._filterStyleSheetList(e,e.length)}});var v=r[f["default"].documentCookiePropOwnerName].prototype;(0,I.overrideDescriptor)(v,"cookie",{getter:function(){return i.cookieSandbox.getCookie()},setter:function(e){i.cookieSandbox.setCookie(this,String(e))}}),(0,I.overrideDescriptor)(s,"activeElement",{getter:function(){var e=f["default"].documentActiveElementGetter.call(this);return e&&(0,S.isShadowUIElement)(e)?i.shadowUI.getLastActiveElement()||this.body:e}});var E=r[f["default"].documentScriptsPropOwnerName].prototype;(0,I.overrideDescriptor)(E,"scripts",{getter:function(){var e=f["default"].documentScriptsGetter.call(this),t=f["default"].htmlCollectionLengthGetter.call(e);return i.shadowUI._filterNodeList(e,t)}})},t}(u["default"]);e["default"]=M,t.exports=e["default"]},"writer.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=r("../../native-methods"),a=o(s),l=r("../../../utils/html"),u=n(l),c=r("../../../utils/dom"),p=r("../../../utils/browser"),d=r("../../../../processing/script"),f=r("../../../../processing/style"),h=o(f),m=r("../../../utils/url"),y=r("../../../../processing/dom/internal-properties"),g=o(y),v=r("../../../../utils/create-self-removing-script"),E=o(v),b="hammerhead_write_marker_begin",S="hammerhead_write_marker_end",w="<"+b+"></"+b+">",_="<"+S+"></"+S+">",x=new RegExp("^[\\S\\s]*"+w,"g"),T=new RegExp(_+"[\\S\\s]*$","g"),C=/^<[^>]+>/g,A=/<\/[^<>]+>$/g,P=/<\/?(?:[A-Za-z][^>]*)?$/g,O="hammerhead|unclosed-element-flag",I=(0,E["default"])('\n    var hammerhead = window["'+g["default"].hammerhead+'"];\n    var sandbox    = hammerhead && hammerhead.sandbox;\n\n    if (!sandbox) {\n        try {\n            sandbox = window.parent["'+g["default"].hammerhead+"\"].get('./sandbox/backup').get(window);\n        } catch(e) {}\n    }\n\n    if (sandbox) {\n        Object.defineProperty(window, \""+g["default"].documentWasCleaned+'", { value: true, configurable: true });\n        \n        sandbox.node.mutation.onDocumentCleaned({\n            window: window,\n            document: document\n        });\n\n        /* NOTE: B234357 */\n        sandbox.node.processNodes(null, document);\n    }\n'),M=function(){function e(t,r){i(this,e),this.window=t,this.document=r,this.pending="",this.parentTagChain=[],this.isBeginMarkerInDOM=!1,this.isEndMarkerInDOM=!1,this.isClosingContentEl=!1,this.isNonClosedComment=!1,this.isAddContentToEl=!1,this.contentForProcessing="",this.nonClosedEl=null,this.cachedStartsWithClosingTagRegExps={}}return e.prototype._cutPending=function(e){var t=e.match(P);return this.pending=t?t[0]:"",this.pending?e.substring(0,e.length-this.pending.length):e},e.prototype._wrapHtmlChunk=function(e){var t=this.parentTagChain.length?"<"+this.parentTagChain.join("><")+">":"";return this.isNonClosedComment&&(t+="<!--"),t+w+e+_},e.prototype._unwrapHtmlChunk=function(e){return e?(e=e.replace(x,"").replace(T,""),this.isBeginMarkerInDOM||(e=this.isNonClosedComment?e.slice(4):e.replace(C,"")),this.isEndMarkerInDOM||(e=this.isNonClosedComment?e.slice(0,-3):e.replace(A,"")),!this.isBeginMarkerInDOM&&this.isEndMarkerInDOM&&(this.isNonClosedComment=!1),e):e},e._setUnclosedElementFlag=function(e){((0,c.isScriptElement)(e)||(0,c.isStyleElement)(e))&&(e[O]=!0)},e.hasUnclosedElementFlag=function(e){return!!e[O]},e._searchBeginMarker=function(e){var t=a["default"].elementQuerySelector.call(e,b);if(t)return t;for(t=e;a["default"].elementFirstElementChildGetter.call(t);)t=a["default"].elementFirstElementChildGetter.call(t);return a["default"].nodeFirstChildGetter.call(t.parentNode)!==t?t=a["default"].nodeFirstChildGetter.call(t.parentNode):(0,c.isCommentNode)(a["default"].nodeFirstChildGetter.call(t))&&(t=a["default"].nodeFirstChildGetter.call(t)),t},e._searchEndMarker=function(e){var t=a["default"].elementQuerySelector.call(e,S);if(t)return t;for(t=e;a["default"].elementLastElementChildGetter.call(t);)t=a["default"].elementLastElementChildGetter.call(t);return a["default"].nodeLastChildGetter.call(t.parentNode)!==t?t=a["default"].nodeLastChildGetter.call(t.parentNode):(0,c.isCommentNode)(a["default"].nodeLastChildGetter.call(t))&&(t=a["default"].nodeLastChildGetter.call(t)),t},e.prototype._updateParentTagChain=function(e,t){var r=(0,c.getTagName)(t)!==S?t:t.parentNode;for((0,c.isCommentNode)(t)&&(this.isNonClosedComment=!0,r=t.parentNode),this.parentTagChain=[];r!==e;)this.parentTagChain.unshift((0,c.getTagName)(r)),r=r.parentNode},e.prototype._processBeginMarkerInContent=function(t){var r=t;if(e._setUnclosedElementFlag(r),this.isClosingContentEl&&((0,c.isScriptElement)(r)||(0,c.isStyleElement)(r)))this.contentForProcessing=a["default"].nodeTextContentGetter.call(this.nonClosedEl)+a["default"].nodeTextContentGetter.call(r).replace(x,""),a["default"].nodeTextContentSetter.call(r,"");else{var n=a["default"].nodeTextContentGetter.call(r);a["default"].nodeTextContentSetter.call(r,n.replace(x,""))}t=a["default"].createElement.call(document,b),a["default"].insertBefore.call(r.parentNode,t,r)},e._createStartsWithClosingTagRegExp=function(e){for(var t=[e.charAt(e.length-1),"?"],r=e.length-2;r>-1;r--)t.unshift("(?:",e.charAt(r)),t.push(")?");return t.unshift("^</"),t.push("$"),new RegExp(t.join(""),"i")},e.prototype._getStartsWithClosingTagRegExp=function(t){return t=t.toLowerCase(),this.cachedStartsWithClosingTagRegExps[t]||(this.cachedStartsWithClosingTagRegExps[t]=e._createStartsWithClosingTagRegExp(t)),this.cachedStartsWithClosingTagRegExps[t]},e.prototype._processEndMarkerInContent=function(t){var r=t,n=a["default"].nodeTextContentGetter.call(r);if(e._setUnclosedElementFlag(r),a["default"].nodeTextContentSetter.call(r,n.replace(T,"")),t=a["default"].createElement.call(document,S),this.pending){var o=this._getStartsWithClosingTagRegExp(r.tagName),i=o.test(this.pending);if(!i){var s=a["default"].nodeTextContentGetter.call(r)+this.pending;a["default"].nodeTextContentSetter.call(r,s),this.pending=""}}a["default"].appendChild.call(r.parentNode,t)},e._addOnDocumentRecreationScript=function(e){var t=a["default"].createElement.call(e.ownerDocument,"span");a["default"].insertBefore.call(e.parentNode,t,e),a["default"].elementOuterHTMLSetter.call(t,I)},e.prototype._prepareDom=function(t,r){var n=e._searchBeginMarker(t),o=e._searchEndMarker(t);this.isBeginMarkerInDOM=(0,c.getTagName)(n)===b,this.isEndMarkerInDOM=(0,c.getTagName)(o)===S,this.isAddContentToEl=n===o,this.isClosingContentEl=!this.isBeginMarkerInDOM&&!this.isAddContentToEl,this.isAddContentToEl||(this._updateParentTagChain(t,o),r&&e._addOnDocumentRecreationScript(o)),this.isBeginMarkerInDOM||this.isEndMarkerInDOM?this.isBeginMarkerInDOM&&!this.isEndMarkerInDOM?this._processEndMarkerInContent(o):!this.isBeginMarkerInDOM&&this.isEndMarkerInDOM&&this._processBeginMarkerInContent(n):(this._processBeginMarkerInContent(n),this._processEndMarkerInContent(o))},e.prototype._processHtmlChunk=function(e,t){var r=this;return e=this._cutPending(this.pending+e),e=this._wrapHtmlChunk(e),e=u.processHtml(e,{prepareDom:function(e){return r._prepareDom(e,t)},processedContext:this.window}),e=this._unwrapHtmlChunk(e),e&&this.isBeginMarkerInDOM&&(p.isFirefox||p.isIE)&&!u.isPageHtml(e)&&(e=u.INIT_SCRIPT_FOR_IFRAME_TEMPLATE+e),e},e.prototype.write=function(e,t,r){var n=this._processHtmlChunk(a["default"].arrayJoin.call(e,""),r);if(this.nonClosedEl&&this.contentForProcessing){var o=this.contentForProcessing;(0,c.isScriptElement)(this.nonClosedEl)?o=(0,d.processScript)(this.contentForProcessing,!0):(0,c.isStyleElement)(this.nonClosedEl)&&(o=h["default"].process(this.contentForProcessing,m.getProxyUrl,!0)),a["default"].nodeTextContentSetter.call(this.nonClosedEl,o),this.contentForProcessing=""}var i=t?a["default"].documentWriteLn:a["default"].documentWrite,s=i.call(this.document,n);if(r&&p.isIE)return s;if(!this.isEndMarkerInDOM&&!this.isAddContentToEl){for(var l=this.document.documentElement;a["default"].elementLastElementChildGetter.call(l);)l=a["default"].elementLastElementChildGetter.call(l);this.nonClosedEl=l}return s},e}();e["default"]=M,t.exports=e["default"]}},"element.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../../processing/dom/internal-properties"),u=o(l),c=r("../base"),p=o(c),d=r("../node/index"),f=o(d),h=r("../../../processing/dom"),m=o(h),y=r("../native-methods"),g=o(y),v=r("../../dom-processor"),E=o(v),b=r("../../../processing/script"),S=r("../../../processing/style"),w=o(S),_=r("../../utils/url"),x=n(_),T=r("../../utils/dom"),C=n(T),A=r("../upload/hidden-info"),P=n(A),O=r("../../utils/url-resolver"),I=n(O),M=r("../../utils/destination-location"),N=r("../../utils/event"),D=r("../../utils/html"),L=r("../../utils/query-selector"),j=r("../../../utils/url"),k=r("../../../utils/string-trim"),R=o(k),U=r("../windows-storage"),H=n(U),F=r("./attributes"),B=r("../shadow-ui"),W=o(B),G=r("./live-node-list/dom-mutation-tracker"),V=o(G),q=r("../../../processing/dom/attributes"),K=r("../../settings"),X=o(K),$=r("../../utils/property-overriding"),Y=["_blank","_self","_parent","_top"],z=["refresh","content-security-policy"],Q=function(e){function t(r,n,o,a,l){i(this,t);var u=s(this,e.call(this));return u.nodeSandbox=r,u.shadowUI=a,u.uploadSandbox=n,u.iframeSandbox=o,u.eventSandbox=l,u.overriddenMethods=null,u.BEFORE_FORM_SUBMIT_EVENT="hammerhead|event|before-form-submit",u.SCRIPT_ELEMENT_ADDED_EVENT="hammerhead|event|script-added",u}return a(t,e),t._isKeywordTarget=function(e){return e=e.toLowerCase(),Y.indexOf(e)!==-1},t._onTargetChanged=function(e){var t=C.getTagName(e),r=E["default"].getTargetAttr(e);if(m["default"].isIframeFlagTag(t)){var n=void 0;"target"===r?n="form"===t?"action":"href":"formtarget"===r&&(n="formaction");var o=m["default"].getStoredAttrName(n);if(e.hasAttribute(o)){var i=e.getAttribute(o);x.isSupportedProtocol(i)&&e.setAttribute(n,i)}}},t._setProxiedSrc=function(e){if(!e[u["default"].forceProxySrcForImage]){var t=g["default"].imageSrcGetter.call(e),r=!!t&&e.complete;e[u["default"].forceProxySrcForImage]=!0,t&&e.setAttribute("src",t),e[u["default"].skipNextLoadEventForImage]=r}},t.prototype.getAttributeCore=function(e,t,r){var n=String(t[r?1:0]),o=n.toLowerCase(),i=r?t[0]:null,s=r?g["default"].getAttributeNS:g["default"].getAttribute,a=C.getTagName(e);if(E["default"].isUrlAttr(e,o,i)||E["default"].EVENTS.indexOf(o)!==-1||q.ATTRS_WITH_SPECIAL_PROXYING_LOGIC.indexOf(o)!==-1){var l=m["default"].getStoredAttrName(n),u=s.apply(e,r?[i,l]:[l]);if(m["default"].isAddedAutocompleteAttr(o,u))return null;e.hasAttribute(l)&&(t[r?1:0]=l)}else if(!r&&"integrity"===o&&m["default"].isTagWithIntegrityAttr(a)){var c=m["default"].getStoredAttrName(n);g["default"].hasAttribute.call(e,c)&&(t[0]=c)}else if(r||"rel"!==o||"link"!==a){if(!r&&"required"===o&&C.isFileInput(e)){var p=m["default"].getStoredAttrName(n);g["default"].hasAttribute.call(e,p)&&(t[0]=p)}}else{var d=m["default"].getStoredAttrName(n);g["default"].hasAttribute.call(e,d)&&(t[0]=d)}return s.apply(e,t)},t.prototype.setAttributeCore=function(e,r,n){var o=n?r[0]:null,i=String(r[n?1:0]),s=i.toLowerCase(),a=n?2:1,l=String(r[a]),c=n?g["default"].setAttributeNS:g["default"].setAttribute,p=C.getTagName(e),d=E["default"].isUrlAttr(e,i,o),f=E["default"].EVENTS.indexOf(i)!==-1,h=!1,y=x.isSpecialPage(l),v=x.isSupportedProtocol(l);if(d&&!v&&!y||f){var b=m["default"].isJsProtocol(l),S=m["default"].getStoredAttrName(i);(d&&b||f)&&(r[a]=m["default"].processJsAttrValue(l,{isJsProtocol:b,isEventAttr:f})),c.apply(e,n?[o,S,l]:[S,l])}else if(d&&(v||y)){var _=m["default"].getStoredAttrName(i);if(c.apply(e,n?[o,_,l]:[_,l]),"img"!==p||e[u["default"].forceProxySrcForImage]){if("img"===p&&(e[u["default"].skipNextLoadEventForImage]=!1),""!==l&&(!y||"a"===p)){var T="iframe"===p||"frame"===p,A="script"===p,P=v&&!(0,M.sameOriginCheck)(location.toString(),l),O=E["default"].getElementResourceType(e),N=A&&e.charset,D=e.ownerDocument||this.document;if("formaction"===s&&!g["default"].hasAttribute.call(e,"formtarget")&&(O="f",e.form&&g["default"].hasAttribute.call(e.form,"action"))){var L=x.parseProxyUrl(g["default"].formActionGetter.call(e.form));L&&(O=L.resourceType)}t._isHrefAttrForBaseElement(e,i)&&C.isElementInDocument(e,D)&&I.updateBase(l,D),r[a]=T&&P?x.getCrossDomainIframeProxyUrl(l):x.getProxyUrl(l,{resourceType:O,charset:N,doc:D})}}else!l||y||x.parseProxyUrl(l)||(r[a]=e[u["default"].forceProxySrcForImage]?x.getProxyUrl(l):x.resolveUrlAsDest(l))}else if("autocomplete"===s){var k=m["default"].getStoredAttrName(i);c.apply(e,n?[o,k,l]:[k,l]),r[a]="off"}else if("target"===s&&m["default"].isTagWithTargetAttr(p)||"formtarget"===s&&m["default"].isTagWithFormTargetAttr(p)){var U=g["default"].getAttribute.call(e,s),H=this.getTarget(e,l);if(H===U)return null;var F=m["default"].getStoredAttrName(i);c.apply(e,n?[o,F,l]:[F,l]),r[a]=H,h=!0}else if("sandbox"===i){var B=m["default"].getStoredAttrName(i),W=l.indexOf("allow-same-origin")!==-1,G=l.indexOf("allow-scripts")!==-1;c.apply(e,n?[o,B,l]:[B,l]),W&&G||(r[a]+=W?"":" allow-same-origin",r[a]+=G?"":" allow-scripts"),e[this.nodeSandbox.win.SANDBOX_DOM_TOKEN_LIST_UPDATE_FN]&&e[this.nodeSandbox.win.SANDBOX_DOM_TOKEN_LIST_UPDATE_FN](l)}else if("meta"===p&&"http-equiv"===i){var V=l.toLowerCase();if(z.indexOf(V)!==-1)return null}else if("xlink:href"===s&&E["default"].SVG_XLINK_HREF_TAGS.indexOf(p)!==-1&&C.isSVGElement(e)){var q=m["default"].getStoredAttrName(i);c.apply(e,n?[o,q,l]:[q,l]),j.HASH_RE.test(l)||(r[a]=x.getProxyUrl(l))}else if("style"===s){var K=m["default"].getStoredAttrName(i);c.apply(e,n?[o,K,l]:[K,l]),r[a]=w["default"].process(l,x.getProxyUrl)}else{if(!n&&"integrity"===s&&m["default"].isTagWithIntegrityAttr(p)){var X=m["default"].getStoredAttrName(i);return c.apply(e,[X,l])}if(n||"rel"!==s||"link"!==p){if(!n&&"required"===s&&C.isFileInput(e)){var $=m["default"].getStoredAttrName(i);g["default"].removeAttribute.call(e,i),r[0]=$}else if(!n&&"type"===s&&C.isInputElement(e)){var Y=g["default"].getAttribute.call(e,s),Q=l.toLowerCase(),J=m["default"].getStoredAttrName("required"),Z=g["default"].hasAttribute.call(e,J)?g["default"].getAttribute.call(e,J):g["default"].getAttribute.call(e,"required"),ee=!Y||Q!==Y.toLowerCase();ee&&null!==Z&&("file"===Q?(g["default"].setAttribute.call(e,J,Z),g["default"].removeAttribute.call(e,"required")):"file"===Y&&(g["default"].setAttribute.call(e,"required",Z),g["default"].removeAttribute.call(e,J)))}}else{var te=(0,R["default"])(l.toLowerCase()),re=m["default"].getStoredAttrName(i);"prefetch"===te?(g["default"].removeAttribute.call(e,i),r[0]=re):g["default"].removeAttribute.call(e,re)}}var ne=c.apply(e,r);return h&&t._onTargetChanged(e),ne},t.prototype._hasAttributeCore=function(e,t,r){var n=r?1:0,o=r?g["default"].hasAttributeNS:g["default"].hasAttribute,i=m["default"].getStoredAttrName("autocomplete"),s=g["default"].getAttribute.call(e,i),a=C.getTagName(e);if("string"==typeof t[n]&&m["default"].isAddedAutocompleteAttr(t[n],s))return!1;if(!r&&"integrity"===t[0]&&m["default"].isTagWithIntegrityAttr(a))t[0]=m["default"].getStoredAttrName("integrity");else{if(!r&&"rel"===t[0]&&"link"===a){var l=m["default"].getStoredAttrName(t[0]);return o.apply(e,t)||o.apply(e,[l])}if(!r&&"required"===t[0]&&C.isFileInput(e)){var u=m["default"].getStoredAttrName(t[0]);return o.apply(e,t)||o.call(e,u)}}return o.apply(e,t)},t.prototype._removeAttributeCore=function(e,r,n){var o=String(r[n?1:0]),i=o.toLowerCase(),s=n?g["default"].removeAttributeNS:g["default"].removeAttribute,a=C.getTagName(e),l=void 0;if(E["default"].isUrlAttr(e,i,n?r[0]:null)||"sandbox"===i||"autocomplete"===i||E["default"].EVENTS.indexOf(i)!==-1||"target"===i&&m["default"].isTagWithTargetAttr(a)||"formtarget"===i&&m["default"].isTagWithFormTargetAttr(a)){var u=m["default"].getStoredAttrName(o);"autocomplete"===i?g["default"].setAttribute.call(e,u,E["default"].AUTOCOMPLETE_ATTRIBUTE_ABSENCE_MARKER):s.apply(e,n?[r[0],u]:[u])}else if(n||"rel"!==i||"link"!==a){if(!n&&"required"===i&&C.isFileInput(e)){var c=m["default"].getStoredAttrName(o);s.call(e,c)}else if(!n&&"type"===i&&C.isInputElement(e)){var p=m["default"].getStoredAttrName("required");if(g["default"].hasAttribute.call(e,p)){var d=g["default"].getAttribute.call(e,p);g["default"].setAttribute.call(e,"required",d),g["default"].removeAttribute.call(e,p)}}}else{var f=m["default"].getStoredAttrName(o);s.apply(e,[f])}return t._isHrefAttrForBaseElement(e,i)&&I.updateBase((0,M.get)(),this.document),"autocomplete"!==i&&(l=s.apply(e,r)),("target"===i&&m["default"].isTagWithTargetAttr(a)||"formtarget"===i&&m["default"].isTagWithFormTargetAttr(a))&&t._onTargetChanged(e),l},t.prototype._addNodeCore=function(e){var t=e.parentNode,r=e.args,n=e.nativeFn,o=e.checkBody,i=r[0];this._prepareNodeForInsertion(i,t);var s=null,a=null;if(C.isDocumentFragmentNode(i)&&(a=C.nodeListToArray(i.childNodes)),s=o&&C.isBodyElementWithChildren(t)&&C.isElementInDocument(t)?this.shadowUI.insertBeforeRoot(i):n.apply(t,r),a)for(var l=0,u=a;l<u.length;l++){var c=u[l];this._onElementAdded(c)}else this._onElementAdded(i);return s},t.prototype._prepareNodeForInsertion=function(e,r){C.isTextNode(e)&&t._processTextNodeContent(e,r),this.nodeSandbox.processNodes(e)},t.prototype._createOverridedMethods=function(){var e=this;this.overriddenMethods={insertRow:function(){var t=C.isTableElement(this)?g["default"].insertTableRow:g["default"].insertTBodyRow,r=t.apply(this,arguments);return e.nodeSandbox.processNodes(r),r},insertCell:function(){var t=g["default"].insertCell.apply(this,arguments);return e.nodeSandbox.processNodes(t),t},insertAdjacentHTML:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0],i=r[1],s=this,a=s.parentNode;r.length>1&&null!==i&&(r[1]=(0,D.processHtml)(String(i),{parentTag:a&&a.tagName,processedContext:s[u["default"].processedContext]})),g["default"].insertAdjacentHTML.apply(s,r),e.nodeSandbox.processNodes(a||s),"afterbegin"===o||"beforeend"===o?V["default"].onChildrenChanged(s):a&&V["default"].onChildrenChanged(a)},formSubmit:function(){return e._ensureTargetContainsExistingBrowsingContext(this),e.emit(e.BEFORE_FORM_SUBMIT_EVENT,{form:this}),g["default"].formSubmit.apply(this,arguments)},insertBefore:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._addNodeCore({parentNode:this,nativeFn:g["default"].insertBefore,checkBody:!r[1],args:r})},appendChild:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._addNodeCore({parentNode:this,nativeFn:g["default"].appendChild,checkBody:!0,args:r})},removeChild:function(){var t=arguments[0];e._onRemoveFileInputInfo(t),e._onRemoveIframe(t);var r=g["default"].removeChild.apply(this,arguments);return e._onElementRemoved(t),r},replaceChild:function(){var r=arguments[0],n=arguments[1];C.isTextNode(r)&&t._processTextNodeContent(r,this),e._onRemoveFileInputInfo(n);var o=g["default"].replaceChild.apply(this,arguments);return e._onAddFileInputInfo(r),V["default"].onElementChanged(r),V["default"].onElementChanged(n),o},cloneNode:function(){var t=g["default"].cloneNode.apply(this,arguments);return e.nodeSandbox.processNodes(t),t},getAttribute:function(){return e.getAttributeCore(this,arguments)},getAttributeNS:function(){return e.getAttributeCore(this,arguments,!0)},setAttribute:function(){var t=e.setAttributeCore(this,arguments);return(0,F.refreshAttributesWrapper)(this),t},setAttributeNS:function(){
var t=e.setAttributeCore(this,arguments,!0);return(0,F.refreshAttributesWrapper)(this),t},removeAttribute:function(){var t=e._removeAttributeCore(this,arguments);return(0,F.refreshAttributesWrapper)(this),t},removeAttributeNS:function(){var t=e._removeAttributeCore(this,arguments,!0);return(0,F.refreshAttributesWrapper)(this),t},querySelector:function(){return"string"==typeof arguments[0]&&(arguments[0]=f["default"].processSelector(arguments[0])),(0,L.getNativeQuerySelector)(this).apply(this,arguments)},querySelectorAll:function(){return"string"==typeof arguments[0]&&(arguments[0]=f["default"].processSelector(arguments[0])),(0,L.getNativeQuerySelectorAll)(this).apply(this,arguments)},hasAttribute:function(){return e._hasAttributeCore(this,arguments,!1)},hasAttributeNS:function(){return e._hasAttributeCore(this,arguments,!0)},hasAttributes:function(){return 2===g["default"].elementAttributesGetter.call(this).length&&g["default"].elementAttributesGetter.call(this).getNamedItem("autocomplete")&&g["default"].elementAttributesGetter.call(this).getNamedItem(m["default"].getStoredAttrName("autocomplete"))?e._hasAttributeCore(this,["autocomplete"],!1):g["default"].hasAttributes.apply(this,arguments)},anchorToString:function(){var e=g["default"].anchorToString.call(this),t=x.parseProxyUrl(e);return t?t.destUrl:e},registerElement:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[1];if(n&&n.prototype&&n.prototype.createdCallback){var o=n.prototype.createdCallback;n.prototype.createdCallback=function(){(0,D.isInternalHtmlParserElement)(this)||o.call(this)}}return g["default"].registerElement.apply(this,t)}}},t._processTextNodeContent=function(e,t){t.tagName&&(C.isScriptElement(t)?e.data=(0,b.processScript)(e.data,!0):C.isStyleElement(t)&&(e.data=w["default"].process(e.data,x.getProxyUrl)))},t._isHrefAttrForBaseElement=function(e,t){return C.isBaseElement(e)&&"href"===t},t._removeFileInputInfo=function(e){P.removeInputInfo(e)},t._hasShadowUIParentOrContainsShadowUIClassPostfix=function(e){return e.parentNode&&C.isShadowUIElement(e.parentNode)||W["default"].containsShadowUIClassPostfix(e)},t.prototype._isFirstBaseTagOnPage=function(e){var t=e.ownerDocument||this.document;return g["default"].querySelector.call(t,"base")===e},t.prototype._onAddFileInputInfo=function(e){if(C.isDomElement(e))for(var t=C.getFileInputs(e),r=0;r<t.length;r++){var n=t[r];this.addFileInputInfo(n)}},t.prototype._onRemoveFileInputInfo=function(e){C.isDomElement(e)&&(C.isFileInput(e)?t._removeFileInputInfo(e):C.find(e,"input[type=file]",t._removeFileInputInfo))},t.prototype._onRemoveIframe=function(e){C.isDomElement(e)&&C.isIframeElement(e)&&H.remove(g["default"].contentWindowGetter.call(e))},t.prototype._onElementAdded=function(e){if(t._hasShadowUIParentOrContainsShadowUIClassPostfix(e)&&W["default"].markElementAndChildrenAsShadow(e),(C.isDomElement(e)||C.isDocument(e))&&C.isElementInDocument(e)){for(var r=C.getIframes(e),n=0;n<r.length;n++){var o=r[n];this.onIframeAddedToDOM(o),H.add(g["default"].contentWindowGetter.call(o))}for(var i=C.getScripts(e),s=0;s<i.length;s++){var a=i[s];this.emit(this.SCRIPT_ELEMENT_ADDED_EVENT,{el:a})}V["default"].onElementChanged(e)}if((C.isInputElement(e)||C.isButtonElement(e))&&e.form&&g["default"].hasAttribute.call(e,"formaction")&&e.setAttribute("formaction",e.getAttribute("formaction")),C.isBodyElement(e)&&this.shadowUI.onBodyElementMutation(),this._onAddFileInputInfo(e),C.isBaseElement(e)&&this._isFirstBaseTagOnPage(e)){var l=m["default"].getStoredAttrName("href"),u=e.getAttribute(l);null!==u&&I.updateBase(u,this.document)}},t.prototype._onElementRemoved=function(e){if(C.isBodyElement(e))this.shadowUI.onBodyElementMutation();else if(C.isBaseElement(e)){var t=g["default"].querySelector.call(this.document,"base"),r=t&&t.getAttribute(m["default"].getStoredAttrName("href"));I.updateBase(r||(0,M.get)(),this.document)}V["default"].onElementChanged(e)},t.prototype.addFileInputInfo=function(e){var t=this.uploadSandbox.infoManager;P.addInputInfo(e,t.getFiles(e),t.getValue(e))},t.prototype.onIframeAddedToDOM=function(e){C.isCrossDomainIframe(e,!0)||this.nodeSandbox.mutation.onIframeAddedToDOM({iframe:e})},t.prototype.attach=function(r){e.prototype.attach.call(this,r),this._createOverridedMethods(),r.Element.prototype.insertBefore=this.overriddenMethods.insertBefore,r.Element.prototype.appendChild=this.overriddenMethods.appendChild,r.Element.prototype.replaceChild=this.overriddenMethods.replaceChild,r.Element.prototype.removeChild=this.overriddenMethods.removeChild,r.Element.prototype.setAttribute=this.overriddenMethods.setAttribute,r.Element.prototype.setAttributeNS=this.overriddenMethods.setAttributeNS,r.Element.prototype.getAttribute=this.overriddenMethods.getAttribute,r.Element.prototype.getAttributeNS=this.overriddenMethods.getAttributeNS,r.Element.prototype.removeAttribute=this.overriddenMethods.removeAttribute,r.Element.prototype.removeAttributeNS=this.overriddenMethods.removeAttributeNS,r.Element.prototype.cloneNode=this.overriddenMethods.cloneNode,r.Element.prototype.querySelector=this.overriddenMethods.querySelector,r.Element.prototype.querySelectorAll=this.overriddenMethods.querySelectorAll,r.Element.prototype.hasAttribute=this.overriddenMethods.hasAttribute,r.Element.prototype.hasAttributeNS=this.overriddenMethods.hasAttributeNS,r.Element.prototype.hasAttributes=this.overriddenMethods.hasAttributes,r.Node.prototype.cloneNode=this.overriddenMethods.cloneNode,r.Node.prototype.appendChild=this.overriddenMethods.appendChild,r.Node.prototype.removeChild=this.overriddenMethods.removeChild,r.Node.prototype.insertBefore=this.overriddenMethods.insertBefore,r.Node.prototype.replaceChild=this.overriddenMethods.replaceChild,r.DocumentFragment.prototype.querySelector=this.overriddenMethods.querySelector,r.DocumentFragment.prototype.querySelectorAll=this.overriddenMethods.querySelectorAll,r.HTMLTableElement.prototype.insertRow=this.overriddenMethods.insertRow,r.HTMLTableSectionElement.prototype.insertRow=this.overriddenMethods.insertRow,r.HTMLTableRowElement.prototype.insertCell=this.overriddenMethods.insertCell,r.HTMLFormElement.prototype.submit=this.overriddenMethods.formSubmit,r.HTMLAnchorElement.prototype.toString=this.overriddenMethods.anchorToString,r.Document.prototype.registerElement&&(r.Document.prototype.registerElement=this.overriddenMethods.registerElement),r.Element.prototype.insertAdjacentHTML?r.Element.prototype.insertAdjacentHTML=this.overriddenMethods.insertAdjacentHTML:r.HTMLElement.prototype.insertAdjacentHTML&&(r.HTMLElement.prototype.insertAdjacentHTML=this.overriddenMethods.insertAdjacentHTML),this._setValidBrowsingContextOnElementClick(r),this.eventSandbox.listeners.on(this.eventSandbox.listeners.EVENT_LISTENER_ATTACHED_EVENT,function(e){"load"===e.eventType&&C.isImgElement(e.el)&&t._setProxiedSrc(e.el)}),(0,$.overrideDescriptor)(r.HTMLElement.prototype,"onload",{getter:null,setter:function(e){C.isImgElement(this)&&(0,N.isValidEventListener)(e)&&t._setProxiedSrc(this),g["default"].htmlElementOnloadSetter.call(this,e)}})},t.prototype._ensureTargetContainsExistingBrowsingContext=function(e){if(g["default"].hasAttribute.call(e,"target")){var t=g["default"].getAttribute.call(e,"target"),r=g["default"].getAttribute.call(e,m["default"].getStoredAttrName("target"));e.setAttribute("target",r||t)}},t.prototype._setValidBrowsingContextOnElementClick=function(e){var t=this;this.eventSandbox.listeners.initElementListening(e,["click"]),this.eventSandbox.listeners.addInternalEventListener(e,["click"],function(e){var r=e.target;C.isInputElement(r)&&r.form&&(r=r.form);var n=C.getTagName(r);m["default"].isTagWithTargetAttr(n)&&t._ensureTargetContainsExistingBrowsingContext(r)})},t.prototype._setProxiedSrcUrlOnError=function(e){e.addEventListener("error",function(t){var r=g["default"].getAttribute.call(e,m["default"].getStoredAttrName("src")),n=g["default"].imageSrcGetter.call(e);r&&!x.parseProxyUrl(n)&&x.isSupportedProtocol(n)&&!x.isSpecialPage(n)&&(g["default"].setAttribute.call(e,"src",x.getProxyUrl(r)),(0,N.stopPropagation)(t))},!1)},t.prototype.getTarget=function(e,r){var n=r||"";return n&&!t._isKeywordTarget(n)&&!H.findByName(n)||/_blank/i.test(n)?"_top":n},t.prototype.processElement=function(e){var t=C.getTagName(e);switch(t){case"img":this.eventSandbox.listeners.initElementListening(e,["load"]),this.eventSandbox.listeners.addInternalEventListener(e,["load"],function(t,r,n,o,i){e[u["default"].skipNextLoadEventForImage]&&(e[u["default"].skipNextLoadEventForImage]=!1,n(),i())}),e[u["default"].forceProxySrcForImage]||X["default"].get().forceProxySrcForImage||this._setProxiedSrcUrlOnError(e);break;case"iframe":case"frame":this.iframeSandbox.processIframe(e);break;case"base":if(!this._isFirstBaseTagOnPage(e))break;var r=g["default"].getAttribute.call(e,m["default"].getStoredAttrName("href"));null!==r&&I.updateBase(r,e.ownerDocument||this.document)}var n=E["default"].getTargetAttr(e);m["default"].isIframeFlagTag(t)&&"_parent"===g["default"].getAttribute.call(e,n)&&E["default"].processElement(e,x.convertToProxyUrl)},t}(p["default"]);e["default"]=Q,t.exports=e["default"]},"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../../processing/dom/internal-properties"),u=o(l),c=r("../base"),p=o(c),d=r("./window"),f=o(d),h=r("./document"),m=o(h),y=r("./element"),g=o(y),v=r("../event/focus-blur"),E=o(v),b=r("../../../processing/dom"),S=r("../../dom-processor"),w=o(S),_=r("../../utils/dom"),x=n(_),T=r("../../utils/query-selector"),C=r("../native-methods"),A=o(C),P=r("../../../processing/dom/attributes"),O=/\[([\w-]+)(\^?=.+?)]/g,I=/^\W+\s*#/,M=function(e){function t(r,n,o,a,l,c){i(this,t);var p=s(this,e.call(this));return p.raiseBodyCreatedEvent=p._onBodyCreated,A["default"].objectDefineProperty.call(window.Object,document,u["default"].documentCharset,{value:x.parseDocumentCharset(),writable:!0}),p.eventSandbox=o,p.iframeSandbox=n,p.shadowUI=l,p.mutation=r,p.doc=new m["default"](p,l,c),p.win=new f["default"](p,o,a,r),p.element=new g["default"](p,a,n,l,o),p}return a(t,e),t.prototype._onBodyCreated=function(){this.eventSandbox.listeners.initDocumentBodyListening(this.document),this.mutation.onBodyCreated({body:this.document.body})},t.prototype._processElement=function(e){var t=e[u["default"].processedContext];if(!x.isShadowUIElement(e)&&t!==this.window){var r=null;t&&(r=w["default"].getUrlAttr(e),r=r&&e.hasAttribute(r)?r:null);var n=A["default"].objectIsExtensible.call(window.Object,e),o=t&&!A["default"].objectIsFrozen.call(window.Object,e);(n||o)&&A["default"].objectDefineProperty.call(this.window,e,u["default"].processedContext,{value:this.window,writable:!0}),r&&e.setAttribute(r,e.getAttribute(r)),this.element.processElement(e)}},t.prototype.processNodes=function(e,t){if(e){if(e.querySelectorAll){this._processElement(e);for(var r=(0,T.getNativeQuerySelectorAll)(e).call(e,"*"),n=A["default"].nodeListLengthGetter.call(r),o=0;o<n;o++)this._processElement(r[o])}}else t=t||this.document,t.documentElement&&this.processNodes(t.documentElement)},t.prototype.attach=function(t){var r=this,n=t.document,o=!1;e.prototype.attach.call(this,t,n),this.iframeSandbox.on(this.iframeSandbox.IFRAME_DOCUMENT_CREATED_EVENT,function(e){var t=e.iframe,n=A["default"].contentWindowGetter.call(t),o=A["default"].contentDocumentGetter.call(t),i=new r.nativeMethods.constructor(o,n);n[u["default"].iframeNativeMethods]=i,r.doc.attach(n,o)}),A["default"].objectDefineProperty.call(t.Object,t,u["default"].processDomMethodName,{value:function(e,t){o||r.shadowUI.onBodyElementMutation(),r.processNodes(e,t)},configurable:!0}),n.addEventListener("DOMContentLoaded",function(){o=!0,r.processNodes(null,n)},!1),this.doc.attach(t,n),this.win.attach(t),this.element.attach(t)},t._processAttributeSelector=function(e){return O.test(e)?e.replace(O,function(e,t,r){return P.URL_ATTRS.indexOf(t)===-1||I.test(r)?e:(t=(0,b.getStoredAttrName)(t),"["+t+r+"]")}):e},t.processSelector=function(e){return e&&(e=E["default"]._processFocusPseudoClassSelector(e),e=t._processAttributeSelector(e)),e},t}(p["default"]);e["default"]=M,t.exports=e["default"]},"live-node-list":{"dom-mutation-tracker.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../../native-methods"),s=n(i),a=r("../../../utils/dom"),l=r("../../../utils/query-selector"),u=r("../../../utils/integer-id-generator"),c=n(u),p=function(){function e(){var t=this;o(this,e),this._mutations=s["default"].objectCreate.call(window.Object,null),this._isDomContentLoaded=!1,s["default"].addEventListener.call(document,"DOMContentLoaded",function(){t._isDomContentLoaded=!0})}return e.prototype._updateVersion=function(e){e in this._mutations&&this._mutations[e].increment()},e.prototype._processElement=function(e){if(e.tagName&&!(0,a.isShadowUIElement)(e)){var t=(0,a.getTagName)(e);this._updateVersion("*"),this._updateVersion(t)}},e.prototype._processChildren=function(e){if(e.querySelectorAll)for(var t=(0,l.getNativeQuerySelectorAll)(e).call(e,"*"),r=s["default"].nodeListLengthGetter.call(t),n=0;n<r;n++)this._processElement(t[n])},e.prototype.onElementChanged=function(e){this._processElement(e),this._processChildren(e)},e.prototype.onChildrenChanged=function(e){this._processChildren(e)},e.prototype.isOutdated=function(e,t){if(!this._isDomContentLoaded)return!0;var r=e in this._mutations;r||(this._mutations[e]=(0,c["default"])());var n=this._mutations[e].value;return t<n},e.prototype.getVersion=function(e){return e in this._mutations?this._mutations[e].value:-(1/0)},e}();e["default"]=new p,t.exports=e["default"]},"html-collection-wrapper.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){t=t.toLowerCase(),d["default"].objectDefineProperties.call(Object,this,{_collection:{value:e},_filteredCollection:{value:[]},_tagName:{value:t},_version:{value:-(1/0),writable:!0},_namedProps:{value:h.indexOf(t)!==-1?[]:null}}),this._refreshCollection()}function i(e){for(var t=function(e){var t=y++;d["default"].objectDefineProperty.call(Object,o.prototype,t,{get:function(){this.item(t)}})},r=0;r<e;r++)t(r)}function s(e,t,r){if(t!==r){for(var n=function(){var r=t++;d["default"].objectDefineProperty.call(Object,e,r,{enumerable:!0,configurable:!0,get:function(){return e.item(r)}})};t<r;)n();for(;t>r;)delete e[--t];var o=y-m;r>o&&i(r-o)}}function a(e,t,r){if(r){for(var n=0;n<t.length;n++){var o=t[n];r.indexOf(o)===-1&&delete e[o]}for(var i=function(t){var n=r[t];return e._collection[n]?void d["default"].objectDefineProperty.call(Object,e,n,{configurable:!0,get:function(){return this._refreshCollection(),e._collection[n]}}):"continue"},s=0;s<r.length;s++){i(s)}}}function l(e){var t=e._collection,r=d["default"].htmlCollectionLengthGetter.call(t),n=e._namedProps?[]:null,o=e._filteredCollection;o.length=0;for(var i=0;i<r;i++){var s=t[i];if(!(0,f.isShadowUIElement)(s)&&(o.push(s),n)){var a=d["default"].getAttribute.call(s,"name");null!==a&&n.push(a)}}return n}e.__esModule=!0,e["default"]=o;var u=r("./dom-mutation-tracker"),c=n(u),p=r("../../native-methods"),d=n(p),f=r("../../../utils/dom"),h=["button","fieldset","form","iframe","input","map","meta","object","output","param","select","textarea"],m=10,y=0;o.prototype=d["default"].objectCreate.call(Object,HTMLCollection.prototype),o.prototype.item=function(e){return this._refreshCollection(),this._filteredCollection[e]},HTMLCollection.prototype.namedItem&&(o.prototype.namedItem=function(){this._refreshCollection();for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this._collection.namedItem.apply(this._collection,t);return n&&(0,f.isShadowUIElement)(n)?null:n}),d["default"].objectDefineProperties.call(Object,o.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this._refreshCollection(),this._filteredCollection.length}},_refreshCollection:{value:function(){if(c["default"].isOutdated(this._tagName,this._version)){var e=this._filteredCollection.length,t=l(this);this._version=c["default"].getVersion(this._tagName),s(this,e,this._filteredCollection.length),a(this,this._namedProps,t)}}}}),i(m),t.exports=e["default"]}},"mutation.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("../../utils/event-emitter"),l=n(a),u=function(e){function t(){o(this,t);var r=i(this,e.call(this));return r.BEFORE_DOCUMENT_CLEANED_EVENT="hammerhead|event|before-document-cleaned",r.DOCUMENT_CLEANED_EVENT="hammerhead|event|document-cleaned",r.DOCUMENT_CLOSED_EVENT="hammerhead|event|document-closed",r.BODY_CONTENT_CHANGED_EVENT="hammerhead|event|body-content-changed",r.BODY_CREATED_EVENT="hammerhead|event|body-created",r.IFRAME_ADDED_TO_DOM_EVENT="hammerhead|event|iframe-added-to-dom",r}return s(t,e),t.prototype.onIframeAddedToDOM=function(e){this.emit(this.IFRAME_ADDED_TO_DOM_EVENT,e)},t.prototype.onBeforeDocumentCleaned=function(e){this.emit(this.BEFORE_DOCUMENT_CLEANED_EVENT,e)},t.prototype.onDocumentCleaned=function(e){this.emit(this.DOCUMENT_CLEANED_EVENT,e)},t.prototype.onDocumentClosed=function(e){this.emit(this.DOCUMENT_CLOSED_EVENT,e)},t.prototype.onBodyContentChanged=function(e){this.emit(this.BODY_CONTENT_CHANGED_EVENT,e)},t.prototype.onBodyCreated=function(e){this.emit(this.BODY_CREATED_EVENT,e)},t}(l["default"]);e["default"]=u,t.exports=e["default"]},"window.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../base"),u=o(l),c=r("../shadow-ui"),p=o(c),d=r("../native-methods"),f=o(d),h=r("../../../processing/script"),m=r("../../../processing/style"),y=o(m),g=r("../../utils/destination-location"),v=n(g),E=r("../../utils/html"),b=r("../../utils/url"),S=r("../../utils/browser"),w=r("../../utils/dom"),_=r("../../utils/types"),x=r("../../../processing/dom/internal-attributes"),T=o(x),C=r("../../../processing/dom/internal-properties"),A=o(C),P=r("../../utils/constructor-is-called-without-new-keyword"),O=o(P),I=r("../../../processing/script/instruction"),M=o(I),N=r("pinkie"),D=o(N),L=r("../../utils/get-mime-type"),j=o(L),k=r("../../utils/property-overriding"),R=r("../../utils/feature-detection"),U=r("../../../utils/url"),H=r("../upload"),F=o(H),B=r("../code-instrumentation/properties/anchor"),W=r("../../../processing/dom/namespaces"),G=r("../../utils/url-resolver"),V=o(G),q=r("../../../processing/script/header"),K=r("./live-node-list/dom-mutation-tracker"),X=o(K),$=r("./attributes"),Y=r("../../utils/replace-proxied-urls-in-stack"),z=o(Y),Q=f["default"].Function.toString(),J=/^http/i,Z=["https:","wss:","file:"],ee=["localhost","127.0.0.1"],te=["text/javascript","application/javascript","application/x-javascript"],re="hammerhead|context-svg-image-element",ne="hammerhead|sandbox-dom-token-list",oe="hammerhead|sandbox-dom-token-list-owner",ie="hammerhead|sandbox-dom-token-list-update",se="No stack trace available",ae=function(e){function t(r,n,o,a){i(this,t);var l=s(this,e.call(this));return l.nodeSandbox=r,l.messageSandbox=n.message,l.listenersSandbox=n.listeners,l.elementEditingWatcher=n.elementEditingWatcher,l.uploadSandbox=o,l.shadowUI=r.shadowUI,l.nodeMutation=a,l.UNCAUGHT_JS_ERROR_EVENT="hammerhead|event|uncaught-js-error",l.UNHANDLED_REJECTION_EVENT="hammerhead|event|unhandled-rejection",l.SANDBOX_DOM_TOKEN_LIST_UPDATE_FN=ie,l.isInternalGetter=!1,l}return a(t,e),t._prepareStack=function(e,t){return t&&t.indexOf(e)!==-1?t:(t=t||"    "+se,e+":\n"+t)},t.prototype._raiseUncaughtJsErrorEvent=function(e,r,n){if(!(0,w.isCrossDomainWindows)(n,n.top)){var o=n!==n.top,i=v.get(),s=null,a=null;e===this.UNHANDLED_REJECTION_EVENT?(s=t._formatUnhandledRejectionReason(r.reason),a=r.reason&&r.reason.stack):e===this.UNCAUGHT_JS_ERROR_EVENT&&(s=r.error?r.error.message:r.message,a=r.error&&r.error.stack),a=t._prepareStack(s,a),a=(0,z["default"])(a),o?(this.emit(e,{msg:s,pageUrl:i,stack:a,inIframe:!0}),this.messageSandbox.sendServiceMsg({msg:s,pageUrl:i,stack:a,cmd:e},n.top)):this.emit(e,{msg:s,pageUrl:i,stack:a})}},t.prototype._reattachHandler=function(e,t){f["default"].windowRemoveEventListener.call(e,t,this),f["default"].windowAddEventListener.call(e,t,this)},t._formatUnhandledRejectionReason=function(e){if(!(0,_.isPrimitiveType)(e)){var t=f["default"].objectToString.call(e);return"[object Error]"===t?e.message:t}return String(e)},t._getUrlAttr=function(e,t){var r=f["default"].getAttribute.call(e,t),n=e.ownerDocument||document;return""===r||null===r&&"action"===t&&R.emptyActionAttrFallbacksToTheLocation?V["default"].resolve("",n):null===r?"":U.HASH_RE.test(r)?V["default"].resolve(r,n):(0,U.isValidUrl)(r)?(0,b.resolveUrlAsDest)(r):V["default"].resolve(r,n)},t._removeProcessingInstructions=function(e){return e?(e=(0,q.remove)(e),y["default"].cleanUp(e,b.parseProxyUrl)):e},t._processTextPropValue=function(e,t){var r=null!==t&&void 0!==t?String(t):t;if(r){if((0,w.isScriptElement)(e))return(0,h.processScript)(r,!0);if((0,w.isStyleElement)(e))return y["default"].process(r,b.getProxyUrl,!0)}return r},t.prototype._overrideUrlAttrDescriptors=function(e,r){for(var n=this,o=0;o<r.length;o++){var i=r[o];(0,k.overrideDescriptor)(i.prototype,e,{getter:function(){return t._getUrlAttr(this,e)},setter:function(t){n.nodeSandbox.element.setAttributeCore(this,[e,t])}})}},t.prototype._overrideAttrDescriptors=function(e,t){for(var r=this,n=0;n<t.length;n++){var o=t[n];(0,k.overrideDescriptor)(o.prototype,e,{getter:function(){return r.nodeSandbox.element.getAttributeCore(this,[e])||""},setter:function(t){r.nodeSandbox.element.setAttributeCore(this,[e,t])}})}},t.prototype._overrideUrlPropDescriptor=function(e,t,r){(0,k.overrideDescriptor)(window.HTMLAnchorElement.prototype,e,{getter:function(){return(0,B.getAnchorProperty)(this,t)},setter:function(e){(0,B.setAnchorProperty)(this,r,e)}})},t.prototype._overrideErrEventPropDescriptor=function(e,t,r){var n=this,o=f["default"].isEventPropsLocatedInProto?e.Window.prototype:e;(0,k.overrideDescriptor)(o,"on"+t,{getter:null,setter:function(o){r.call(e,o),n.listenersSandbox.emit(n.listenersSandbox.EVENT_LISTENER_ATTACHED_EVENT,{el:e,listener:o,eventType:t})}})},t.prototype._createOverriddenDOMTokenListMethod=function(e){var t=this;return function(){var r=e.apply(this,arguments),n=this[oe];return n&&t.nodeSandbox.element.setAttributeCore(n,["sandbox",this.toString()]),r}},t._isSecureOrigin=function(e){var t=(0,b.parseUrl)((0,b.resolveUrlAsDest)(e));return Z.indexOf(t.protocol)===-1&&ee.indexOf(t.hostname)===-1},t.prototype.handleEvent=function(e){e.defaultPrevented||("unhandledrejection"===e.type?this._raiseUncaughtJsErrorEvent(this.UNHANDLED_REJECTION_EVENT,e,this.window):"error"===e.type&&(e.message.indexOf("NS_ERROR_NOT_INITIALIZED")!==-1?e.preventDefault():this._raiseUncaughtJsErrorEvent(this.UNCAUGHT_JS_ERROR_EVENT,e,window)))},t.prototype.attach=function(r){var n=this;e.prototype.attach.call(this,r);var o=this.messageSandbox,i=this.nodeSandbox,s=this;this._reattachHandler(r,"unhandledrejection"),this._reattachHandler(r,"error"),this.listenersSandbox.initElementListening(r,["error","unhandledrejection"]),this.listenersSandbox.on(this.listenersSandbox.EVENT_LISTENER_ATTACHED_EVENT,function(e){e.el===r&&("unhandledrejection"===e.eventType?n._reattachHandler(r,"unhandledrejection"):"error"===e.eventType&&n._reattachHandler(r,"error"))}),this._overrideErrEventPropDescriptor(r,"error",f["default"].winOnErrorSetter),f["default"].winOnUnhandledRejectionSetter&&this._overrideErrEventPropDescriptor(r,"unhandledrejection",f["default"].winOnUnhandledRejectionSetter),o.on(o.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message,r=t.msg,o=t.pageUrl,i=t.stack,a=t.cmd;a!==n.UNCAUGHT_JS_ERROR_EVENT&&a!==n.UNHANDLED_REJECTION_EVENT||s.emit(a,{msg:r,pageUrl:o,stack:i})}),r.CanvasRenderingContext2D.prototype.drawImage=function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=n[0];if((0,w.isImgElement)(i)&&!i[A["default"].forceProxySrcForImage]){var s=f["default"].imageSrcGetter.call(i);v.sameOriginCheck(location.toString(),s)&&(i=f["default"].createElement.call(r.document,"img"),f["default"].imageSrcSetter.call(i,(0,b.getProxyUrl)(s)),n[0]=i,i.complete||f["default"].addEventListener.call(i,"load",function(){return f["default"].canvasContextDrawImage.apply(e,n)}))}return f["default"].canvasContextDrawImage.apply(this,n)},f["default"].objectAssign&&(r.Object.assign=function(e){var t=[];t.push(e);for(var n=typeof e,o=arguments.length,i=Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(e&&("object"===n||"function"===n)&&i.length)for(var a=0;a<i.length;a++){var l=i[a],u=typeof l;if(!l||"object"!==u&&"function"!==u)f["default"].objectAssign.call(this,e,l);else for(var c=f["default"].objectKeys.call(r.Object,l),p=0;p<c.length;p++){var d=c[p];r[M["default"].setProperty](e,d,l[d])}}else t=f["default"].arrayConcat.call(t,i);return f["default"].objectAssign.apply(this,t)}),r.open=function(){var e=[],t=arguments[1]?i.element.getTarget(null,arguments[1]):"_self";return e.push((0,b.getProxyUrl)(arguments[0])),e.push(t),arguments.length>2&&e.push(arguments[2]),arguments.length>3&&e.push(arguments[3]),f["default"].windowOpen.apply(r,e)},r.FontFace&&(r.FontFace=function(e,t,r){return t=y["default"].process(t,b.convertToProxyUrl),new f["default"].FontFace(e,t,r)},r.FontFace.prototype=f["default"].FontFace.prototype,r.FontFace.toString=function(){return f["default"].FontFace.toString()}),r.Worker&&(r.Worker=function(e,t){return(0,O["default"])(this,r.Worker)&&f["default"].Worker.apply(this,arguments),0===arguments.length?new f["default"].Worker:("string"==typeof e&&(e=(0,b.getProxyUrl)(e,{resourceType:(0,b.stringifyResourceType)({isScript:!0})})),1===arguments.length?new f["default"].Worker(e):new f["default"].Worker(e,t))},r.Worker.prototype=f["default"].Worker.prototype,r.Worker.toString=function(){return f["default"].Worker.toString()}),r.Blob&&(r.Blob=function(e,t){if(0===arguments.length)return new f["default"].Blob;var r=t&&t.type&&t.type.toString().toLowerCase()||(0,j["default"])(e);return r&&te.indexOf(r)===-1||(e=[(0,h.processScript)(e.join(""),!0)]),1===arguments.length?new f["default"].Blob(e):new f["default"].Blob(e,t)},r.Blob.prototype=f["default"].Blob.prototype,r.Blob.toString=function(){return f["default"].Blob.toString()}),r.EventSource&&(r.EventSource=function(e,t){if(arguments.length){var r=(0,b.getProxyUrl)(e,{resourceType:(0,b.stringifyResourceType)({isEventSource:!0})});return 1===arguments.length?new f["default"].EventSource(r):new f["default"].EventSource(r,t)}return new f["default"].EventSource},r.EventSource.prototype=f["default"].EventSource.prototype,r.EventSource.CONNECTING=f["default"].EventSource.CONNECTING,r.EventSource.OPEN=f["default"].EventSource.OPEN,r.EventSource.CLOSED=f["default"].EventSource.CLOSED,r.EventSource.toString=function(){return f["default"].EventSource.toString()}),r.MutationObserver&&(r.MutationObserver=function(e){var t=function(t){for(var r=[],n=0;n<t.length;n++){var o=t[n];p["default"].isShadowUIMutation(o)||r.push(o)}r.length&&e.call(this,r,this)};return new f["default"].MutationObserver(t)},r.MutationObserver.prototype=f["default"].MutationObserver.prototype,r.MutationObserver.toString=function(){return f["default"].MutationObserver.toString()}),r.Proxy&&(r.Proxy=function(e,t){if(t.get){var r=t.get;t.get=function(e,t,n){return s.isInternalGetter?e[t]:r.call(this,e,t,n)}}return new f["default"].Proxy(e,t)},r.Proxy.toString=function(){return f["default"].Proxy.toString()},r.Proxy.revocable=f["default"].Proxy.revocable),f["default"].registerServiceWorker&&(r.navigator.serviceWorker.register=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0];if("string"==typeof i){if(t._isSecureOrigin(i))return D["default"].reject(S.isAndroid||S.isMSEdge&&S.version>=17?new Error("Only secure origins are allowed."):new DOMException("Only secure origins are allowed.","SecurityError"));n[0]=(0,b.getProxyUrl)(i,{resourceType:(0,b.stringifyResourceType)({isScript:!0})})}return n[1]&&"string"==typeof n[1].scope&&(n[1].scope=(0,b.getProxyUrl)(n[1].scope,{resourceType:(0,b.stringifyResourceType)({isScript:!0})})),f["default"].registerServiceWorker.apply(r.navigator.serviceWorker,n)}),f["default"].getRegistrationServiceWorker&&(r.navigator.serviceWorker.getRegistration=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0];return"string"==typeof o&&(t[0]=(0,b.getProxyUrl)(o,{resourceType:(0,b.stringifyResourceType)({isScript:!0})})),f["default"].getRegistrationServiceWorker.apply(r.navigator.serviceWorker,t)}),r.Range.prototype.createContextualFragment&&(r.Range.prototype.createContextualFragment=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];"string"==typeof n&&(t[0]=(0,E.processHtml)(n,{processedContext:this.startContainer&&this.startContainer[A["default"].processedContext]}));var o=f["default"].createContextualFragment.apply(this,t);return i.processNodes(o),o}),r.Image=function(){var e=null;return e=arguments.length?1===arguments.length?new f["default"].Image(arguments[0]):new f["default"].Image(arguments[0],arguments[1]):new f["default"].Image,e[A["default"].forceProxySrcForImage]=!0,i.processNodes(e),e},r.Image.prototype=f["default"].Image.prototype,r.Image.toString=function(){return f["default"].Image.toString()};var a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.length-1;return"string"==typeof t[n]&&(t[n]=(0,h.processScript)(t[n],!1)),f["default"].Function.apply(this,t)};if(r.Function=a,r.Function.prototype=f["default"].Function.prototype,r.Function.prototype.constructor=a,r.Function.toString=function(){return this===a?Q:f["default"].functionToString.call(this)},"function"==typeof r.history.pushState&&"function"==typeof r.history.replaceState){
var l=function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[2];return r.length>2&&null!==o&&(S.isIE||void 0!==o)&&(r[2]=(0,b.getProxyUrl)(String(o))),e.apply(this,r)}};r.history.pushState=l(f["default"].historyPushState),r.history.replaceState=l(f["default"].historyReplaceState)}r.navigator.sendBeacon&&(r.navigator.sendBeacon=function(){return"string"==typeof arguments[0]&&(arguments[0]=(0,b.getProxyUrl)(arguments[0])),f["default"].sendBeacon.apply(this,arguments)}),r.navigator.registerProtocolHandler&&(r.navigator.registerProtocolHandler=function(){for(var e=1,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if("string"==typeof r[e]){var o=v.getParsed().hostname,i="";if(S.isFirefox){var s=(0,b.parseUrl)(r[e]);i=s.hostname&&(0,b.isSubDomain)(o,s.hostname)}else i=v.sameOriginCheck(v.get(),r[e]);i&&(r[e]=(0,b.getProxyUrl)(r[e]))}return f["default"].registerProtocolHandler.apply(navigator,r)}),r.FormData&&(r.FormData.prototype.append=function(e,t){e!==T["default"].uploadInfoHiddenInputName&&(2===arguments.length&&(0,w.isBlob)(t)&&"name"in t?f["default"].formDataAppend.call(this,e,t,t.name):f["default"].formDataAppend.apply(this,arguments))}),r.WebSocket&&(r.WebSocket=function(e,t){if(0===arguments.length)return new f["default"].WebSocket;var r=(0,b.getProxyUrl)(e,{resourceType:(0,b.stringifyResourceType)({isWebSocket:!0})});return 1===arguments.length?new f["default"].WebSocket(r):2===arguments.length?new f["default"].WebSocket(r,t):new f["default"].WebSocket(r,t,arguments[2])},r.WebSocket.prototype=f["default"].WebSocket.prototype,r.WebSocket.CONNECTING=f["default"].WebSocket.CONNECTING,r.WebSocket.OPEN=f["default"].WebSocket.OPEN,r.WebSocket.CLOSING=f["default"].WebSocket.CLOSING,r.WebSocket.CLOSED=f["default"].WebSocket.CLOSED,f["default"].webSocketUrlGetter&&(0,k.overrideDescriptor)(r.WebSocket.prototype,"url",{getter:function(){var e=f["default"].webSocketUrlGetter.call(this),t=(0,b.parseProxyUrl)(e);return t&&t.destUrl?t.destUrl.replace(J,"ws"):e}}),r.WebSocket.toString=function(){return f["default"].WebSocket.toString()}),(0,k.overrideDescriptor)(r.MessageEvent.prototype,"origin",{getter:function(){var e=this.target,t=f["default"].messageEventOriginGetter.call(this);if((0,w.isWebSocket)(e)){var r=(0,b.parseUrl)(e.url);if(r)return r.protocol+"//"+r.host}else if((0,w.isWindow)(e)){var n=f["default"].messageEventDataGetter.call(this);if(n)return n.originUrl}return t}}),(0,k.overrideDescriptor)(r.HTMLCollection.prototype,"length",{getter:function(){var e=f["default"].htmlCollectionLengthGetter.call(this);return p["default"].isShadowContainerCollection(this)?s.shadowUI.getShadowUICollectionLength(this,e):S.isIE&&e&&(0,w.isHeadOrBodyElement)(this[0].parentNode)?(p["default"].markAsShadowContainerCollection(this),s.shadowUI.getShadowUICollectionLength(this,e)):e}}),(0,k.overrideDescriptor)(r.NodeList.prototype,"length",{getter:function(){var e=f["default"].nodeListLengthGetter.call(this);return p["default"].isShadowContainerCollection(this)?s.shadowUI.getShadowUICollectionLength(this,e):e}}),(0,k.overrideDescriptor)(r.Element.prototype,"childElementCount",{getter:function(){if(p["default"].isShadowContainer(this)){var e=f["default"].htmlCollectionLengthGetter.call(this.children);return s.shadowUI.getShadowUICollectionLength(this.children,e)}return f["default"].elementChildElementCountGetter.call(this)}}),f["default"].performanceEntryNameGetter&&(0,k.overrideDescriptor)(r.PerformanceEntry.prototype,"name",{getter:function(){var e=f["default"].performanceEntryNameGetter.call(this);if((0,w.isPerformanceNavigationTiming)(this)){var t=(0,b.parseProxyUrl)(e);if(t)return t.destUrl}return e}}),(0,k.overrideDescriptor)(r.HTMLInputElement.prototype,"files",{getter:function(){return"file"===this.type.toLowerCase()?F["default"].getFiles(this):f["default"].inputFilesGetter.call(this)}}),(0,k.overrideDescriptor)(r.HTMLInputElement.prototype,"value",{getter:function(){return"file"===this.type.toLowerCase()?F["default"].getUploadElementValue(this):f["default"].inputValueGetter.call(this)},setter:function(e){if("file"!==this.type.toLowerCase()){f["default"].inputValueSetter.call(this,e);var t=e!==f["default"].inputValueGetter.call(this);t&&!(0,w.isShadowUIElement)(this)&&(0,w.isTextEditableElementAndEditingAllowed)(this)&&s.elementEditingWatcher.restartWatchingElementEditing(this)}else s.uploadSandbox.setUploadElementValue(this,e)}}),(0,k.overrideDescriptor)(r.HTMLInputElement.prototype,"required",{getter:function(){return null!==s.nodeSandbox.element.getAttributeCore(this,["required"])},setter:function(e){"file"!==this.type.toLowerCase()?f["default"].inputRequiredSetter.call(this,e):e?s.nodeSandbox.element.setAttributeCore(this,["required",""]):s.nodeSandbox.element._removeAttributeCore(this,["required"])}}),(0,k.overrideDescriptor)(r.HTMLTextAreaElement.prototype,"value",{getter:null,setter:function(e){f["default"].textAreaValueSetter.call(this,e),!(0,w.isShadowUIElement)(this)&&(0,w.isTextEditableElementAndEditingAllowed)(this)&&s.elementEditingWatcher.restartWatchingElementEditing(this)}}),this._overrideUrlAttrDescriptors("data",[r.HTMLObjectElement]),this._overrideUrlAttrDescriptors("src",[r.HTMLImageElement,r.HTMLScriptElement,r.HTMLEmbedElement,r.HTMLSourceElement,r.HTMLMediaElement,r.HTMLInputElement,r.HTMLFrameElement,r.HTMLIFrameElement]),this._overrideUrlAttrDescriptors("action",[r.HTMLFormElement]),this._overrideUrlAttrDescriptors("formAction",[r.HTMLInputElement,r.HTMLButtonElement]),this._overrideUrlAttrDescriptors("href",[r.HTMLAnchorElement,r.HTMLLinkElement,r.HTMLAreaElement,r.HTMLBaseElement]),f["default"].htmlManifestGetter&&this._overrideUrlAttrDescriptors("manifest",[r.HTMLHtmlElement]),this._overrideAttrDescriptors("target",[r.HTMLAnchorElement,r.HTMLFormElement,r.HTMLAreaElement,r.HTMLBaseElement]),this._overrideAttrDescriptors("formTarget",[r.HTMLInputElement,r.HTMLButtonElement]),this._overrideAttrDescriptors("autocomplete",[r.HTMLInputElement]),f["default"].scriptIntegrityGetter&&f["default"].linkIntegrityGetter&&(this._overrideAttrDescriptors("integrity",[r.HTMLScriptElement]),this._overrideAttrDescriptors("integrity",[r.HTMLLinkElement])),this._overrideAttrDescriptors("rel",[r.HTMLLinkElement]),(0,k.overrideDescriptor)(r.HTMLInputElement.prototype,"type",{getter:null,setter:function(e){s.nodeSandbox.element.setAttributeCore(this,["type",e])}}),(0,k.overrideDescriptor)(r.HTMLIFrameElement.prototype,"sandbox",{getter:function(){var e=this[ne];if(!e){var t=f["default"].createElement.call(document,"span");e=t.classList,t.className=s.nodeSandbox.element.getAttributeCore(this,["sandbox"])||"",f["default"].objectDefineProperty.call(r.Object,e,oe,{value:this}),f["default"].objectDefineProperty.call(r.Object,this,ne,{value:e}),f["default"].objectDefineProperty.call(r.Object,this,ie,{value:function(e){t.className=e}})}return e},setter:function(e){s.nodeSandbox.element.setAttributeCore(this,["sandbox",e]),this[ie]&&this[ie](s.nodeSandbox.element.getAttributeCore(this,["sandbox"])||"")}}),this._overrideUrlPropDescriptor("port",f["default"].anchorPortGetter,f["default"].anchorPortSetter),this._overrideUrlPropDescriptor("host",f["default"].anchorHostGetter,f["default"].anchorHostSetter),this._overrideUrlPropDescriptor("hostname",f["default"].anchorHostnameGetter,f["default"].anchorHostnameSetter),this._overrideUrlPropDescriptor("pathname",f["default"].anchorPathnameGetter,f["default"].anchorPathnameSetter),this._overrideUrlPropDescriptor("protocol",f["default"].anchorProtocolGetter,f["default"].anchorProtocolSetter),this._overrideUrlPropDescriptor("search",f["default"].anchorSearchGetter,f["default"].anchorSearchSetter),(0,k.overrideDescriptor)(r.SVGImageElement.prototype,"href",{getter:function(){var e=f["default"].svgImageHrefGetter.call(this);return e[re]||f["default"].objectDefineProperty(e,re,{value:this,configurable:!0}),e}}),(0,k.overrideDescriptor)(r.SVGAnimatedString.prototype,"baseVal",{getter:function(){var e=f["default"].svgAnimStrBaseValGetter.call(this);if(this[re]){var t=(0,b.parseProxyUrl)(e);e=t?t.destUrl:e}return e},setter:function(e){var t=this[re];if(t){var r=f["default"].hasAttributeNS.call(t,W.XLINK_NAMESPACE,"href");s.nodeSandbox.element.setAttributeCore(t,[r?"xlink:href":"href",e]),e=(0,b.getProxyUrl)(e)}f["default"].svgAnimStrBaseValSetter.call(this,e)}}),(0,k.overrideDescriptor)(r.SVGAnimatedString.prototype,"animVal",{getter:function(){var e=f["default"].svgAnimStrAnimValGetter.call(this);if(this[re]){var t=(0,b.parseProxyUrl)(e);return t?t.destUrl:e}return e}}),f["default"].anchorOriginGetter&&(0,k.overrideDescriptor)(r.HTMLAnchorElement.prototype,"origin",{getter:function(){return(0,B.getAnchorProperty)(this,f["default"].anchorOriginGetter)}}),(0,k.overrideDescriptor)(r.StyleSheet.prototype,"href",{getter:function(){var e=f["default"].styleSheetHrefGetter.call(this),t=(0,b.parseProxyUrl)(e);return t?t.destUrl:e}}),f["default"].cssStyleSheetHrefGetter&&(0,k.overrideDescriptor)(r.CSSStyleSheet.prototype,"href",{getter:function(){var e=f["default"].cssStyleSheetHrefGetter.call(this),t=(0,b.parseProxyUrl)(e);return t?t.destUrl:e}}),f["default"].nodeBaseURIGetter&&(0,k.overrideDescriptor)(r.Node.prototype,"baseURI",{getter:function(){var e=f["default"].nodeBaseURIGetter.call(this),t=(0,b.parseProxyUrl)(e);return t?t.destUrl:e}}),r.DOMParser&&(r.DOMParser.prototype.parseFromString=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=void 0;t.length>1&&"string"==typeof n&&"text/html"===o&&(i=(0,E.processHtml)(n),t[0]=i);var s=f["default"].DOMParserParseFromString.apply(this,t);return i&&p["default"].removeSelfRemovingScripts(s),s}),(0,k.overrideDescriptor)(r.Node.prototype,"firstChild",{getter:function(){return p["default"].isShadowContainer(this)?s.shadowUI.getFirstChild(this):f["default"].nodeFirstChildGetter.call(this)}}),(0,k.overrideDescriptor)(r.Element.prototype,"firstElementChild",{getter:function(){return p["default"].isShadowContainer(this)?s.shadowUI.getFirstElementChild(this):f["default"].elementFirstElementChildGetter.call(this)}}),(0,k.overrideDescriptor)(r.Node.prototype,"lastChild",{getter:function(){return p["default"].isShadowContainer(this)?s.shadowUI.getLastChild(this):f["default"].nodeLastChildGetter.call(this)}}),(0,k.overrideDescriptor)(r.Element.prototype,"lastElementChild",{getter:function(){return p["default"].isShadowContainer(this)?s.shadowUI.getLastElementChild(this):f["default"].elementLastElementChildGetter.call(this)}}),(0,k.overrideDescriptor)(r.Node.prototype,"nextSibling",{getter:function(){return s.shadowUI.getNextSibling(this)}}),(0,k.overrideDescriptor)(r.Node.prototype,"previousSibling",{getter:function(){return s.shadowUI.getPrevSibling(this)}}),(0,k.overrideDescriptor)(r.Element.prototype,"nextElementSibling",{getter:function(){return s.shadowUI.getNextElementSibling(this)}}),(0,k.overrideDescriptor)(r.Element.prototype,"previousElementSibling",{getter:function(){return s.shadowUI.getPrevElementSibling(this)}}),(0,k.overrideDescriptor)(r[f["default"].elementHTMLPropOwnerName].prototype,"innerHTML",{getter:function(){var e=f["default"].elementInnerHTMLGetter.call(this);return(0,w.isScriptElement)(this)?(0,q.remove)(e):(0,w.isStyleElement)(this)?y["default"].cleanUp(e,b.parseProxyUrl):(0,E.cleanUpHtml)(e,this.tagName)},setter:function(e){var t=this,n=(0,w.isStyleElement)(t),o=(0,w.isScriptElement)(t),i=null!==e&&void 0!==e?String(e):e;if(i&&(i=n?y["default"].process(i,b.getProxyUrl,!0):o?(0,h.processScript)(i,!0):(0,E.processHtml)(i,{parentTag:t.tagName,processedContext:t[A["default"].processedContext]})),n||o||X["default"].onChildrenChanged(t),f["default"].elementInnerHTMLSetter.call(t,i),!n&&!o){if(X["default"].onChildrenChanged(t),s.document.body===t){var a=s.shadowUI.getRoot();s.shadowUI.markShadowUIContainers(s.document.head,t),p["default"].markElementAndChildrenAsShadow(a)}else(0,w.isShadowUIElement)(t)&&p["default"].markElementAndChildrenAsShadow(t);var l=(0,w.findDocument)(t),u=l?l.defaultView:null;u&&u!==r&&u[A["default"].processDomMethodName]?u[A["default"].processDomMethodName](t,l):r[A["default"].processDomMethodName]&&r[A["default"].processDomMethodName](t),r.self&&((0,w.isHtmlElement)(t)||(0,w.isBodyElement)(t))&&f["default"].setTimeout.call(r,function(){return s.nodeMutation.onBodyContentChanged(t)},0)}}}),(0,k.overrideDescriptor)(r[f["default"].elementHTMLPropOwnerName].prototype,"outerHTML",{getter:function(){var e=f["default"].elementOuterHTMLGetter.call(this);return(0,E.cleanUpHtml)(e,this.parentNode&&this.parentNode.tagName)},setter:function(e){var t=this,n=t.parentNode;if(X["default"].onElementChanged(t),n&&null!==e&&void 0!==e){var o=(0,w.findDocument)(n),i=o?o.defaultView:null;f["default"].elementOuterHTMLSetter.call(t,(0,E.processHtml)(String(e),{parentTag:n&&n.tagName,processedContext:t[A["default"].processedContext]})),X["default"].onChildrenChanged(n),i&&i!==r&&i[A["default"].processDomMethodName]?i[A["default"].processDomMethodName](n,o):r[A["default"].processDomMethodName]&&r[A["default"].processDomMethodName](n),r.self&&(0,w.isBodyElement)(t)&&f["default"].setTimeout.call(r,function(){return s.shadowUI.onBodyElementMutation()},0)}else f["default"].elementOuterHTMLSetter.call(t,e)}}),(0,k.overrideDescriptor)(r.HTMLElement.prototype,"innerText",{getter:function(){var e=f["default"].htmlElementInnerTextGetter.call(this);return t._removeProcessingInstructions(e)},setter:function(e){var r=t._processTextPropValue(this,e);X["default"].onChildrenChanged(this),f["default"].htmlElementInnerTextSetter.call(this,r)}}),(0,k.overrideDescriptor)(r.HTMLScriptElement.prototype,"text",{getter:function(){var e=f["default"].scriptTextGetter.call(this);return(0,q.remove)(e)},setter:function(e){var t=e?(0,h.processScript)(String(e),!0):e;f["default"].scriptTextSetter.call(this,t)}}),(0,k.overrideDescriptor)(r.HTMLAnchorElement.prototype,"text",{getter:function(){var e=f["default"].anchorTextGetter.call(this);return t._removeProcessingInstructions(e)},setter:function(e){var r=t._processTextPropValue(this,e);X["default"].onChildrenChanged(this),f["default"].anchorTextSetter.call(this,r)}}),(0,k.overrideDescriptor)(r.Node.prototype,"textContent",{getter:function(){var e=f["default"].nodeTextContentGetter.call(this);return t._removeProcessingInstructions(e)},setter:function(e){var r=t._processTextPropValue(this,e);X["default"].onChildrenChanged(this),f["default"].nodeTextContentSetter.call(this,r)}}),(0,k.overrideDescriptor)(r[f["default"].elementAttributesPropOwnerName].prototype,"attributes",{getter:function(){return(0,$.getAttributes)(this)}}),r.DOMTokenList.prototype.add=this._createOverriddenDOMTokenListMethod(f["default"].tokenListAdd),r.DOMTokenList.prototype.remove=this._createOverriddenDOMTokenListMethod(f["default"].tokenListRemove),r.DOMTokenList.prototype.toggle=this._createOverriddenDOMTokenListMethod(f["default"].tokenListToggle),f["default"].tokenListReplace&&(r.DOMTokenList.prototype.replace=this._createOverriddenDOMTokenListMethod(f["default"].tokenListReplace)),f["default"].tokenListSupports&&(r.DOMTokenList.prototype.supports=function(){if(this[oe]){var e=f["default"].iframeSandboxGetter.call(this[oe]);return f["default"].tokenListSupports.apply(e,arguments)}return f["default"].tokenListSupports.apply(this,arguments)}),r.DOMImplementation.prototype.createHTMLDocument=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=f["default"].createHTMLDocument.apply(this,t);return V["default"].init(n),n},(0,k.overrideDescriptor)(r.MutationRecord.prototype,"nextSibling",{getter:function(){var e=f["default"].mutationRecordNextSiblingGetter.call(this);return s.shadowUI.getNextSibling(e)}}),(0,k.overrideDescriptor)(r.MutationRecord.prototype,"previousSibling",{getter:function(){var e=f["default"].mutationRecordPrevSiblingGetter.call(this);return s.shadowUI.getPrevSibling(e)}})},t}(u["default"]);e["default"]=ae,t.exports=e["default"]}},"shadow-ui.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../../processing/dom/internal-properties"),u=o(l),c=r("./base"),p=o(c),d=r("./node/index"),f=o(d),h=r("./native-methods"),m=o(h),y=r("../utils/dom"),g=n(y),v=r("../dom-processor"),E=r("../utils/position"),b=r("../../shadow-ui/class-name"),S=o(b),w=r("../utils/style"),_=r("../utils/event"),x=r("../utils/query-selector"),T=r("./node/live-node-list/html-collection-wrapper"),C=o(T),A=r("../utils/feature-detection"),P=/fixed|relative|absolute/,O=/\.((?:\\.|[-\w]|[^\x00-\xa0])+)/g,I="hammerhead|shadow-ui|container-flag",M="hammerhead|shadow-ui|container-collection-flag",N="hammerhead|shadow-ui|html-collection-wrapper",D=function(e){function t(r,n,o,a){i(this,t);var l=s(this,e.call(this));return l.BODY_CONTENT_CHANGED_COMMAND="hammerhead|command|body-content-changed",l.ROOT_CLASS="root",l.ROOT_ID="root",l.HIDDEN_CLASS="hidden",l.BLIND_CLASS="blind",l.nodeMutation=r,l.messageSandbox=n,l.iframeSandbox=o,l.ieDebugSandbox=a,l.root=null,l.lastActiveElement=null,l.uiStyleSheetsHtmlBackup=null,l.wrapperCreators=l._createWrapperCreators(),l._initEventCallbacks(),l}return a(t,e),t.prototype._initEventCallbacks=function(){var e=this;this.runTaskScriptEventCallback=function(t){var r=m["default"].contentDocumentGetter.call(t.iframe),n=r.head,o=r.body;e._restoreUIStyleSheets(n,e._getUIStyleSheetsHtml()),e.markShadowUIContainers(n,o)},this.beforeDocumentCleanedEventCallback=function(){e.uiStyleSheetsHtmlBackup=e._getUIStyleSheetsHtml()},this.documentCleanedEventCallback=function(t){e._restoreUIStyleSheets(t.document.head,e.uiStyleSheetsHtmlBackup),e.uiStyleSheetsHtmlBackup=null,e.markShadowUIContainers(e.document.head,e.document.body)},this.documentClosedEventCallback=function(t){e._restoreUIStyleSheets(t.document.head,e.uiStyleSheetsHtmlBackup),e.uiStyleSheetsHtmlBackup=null,e.markShadowUIContainers(t.document.head,t.document.body)},this.bodyContentChangedEventCallback=function(t){var r=t[u["default"].processedContext];r!==window?e.messageSandbox.sendServiceMsg({cmd:e.BODY_CONTENT_CHANGED_COMMAND},r):e.onBodyElementMutation()},this.serviceMsgReceivedEventCallback=function(t){t.message.cmd===e.BODY_CONTENT_CHANGED_COMMAND&&e.onBodyElementMutation()},this.bodyCreatedEventCallback=function(t){var r=t.body;return e.markShadowUIContainers(e.document.head,r)}},t._filterElement=function(e){return e&&g.isShadowUIElement(e)?null:e},t.prototype._filterList=function(e,t,r){for(var n=[],o=0;o<t;o++){var i=r(e[o]);i&&n.push(e[o])}return m["default"].objectDefineProperty.call(this.window.Object,n,"item",{value:function(e){return e>=n.length?null:n[e]}}),e.namedItem&&m["default"].objectDefineProperty.call(this.window.Object,n,"namedItem",{value:function(t){return e.namedItem(t)}}),n.length===t?e:n},t.prototype._filterNodeList=function(e,r){return this._filterList(e,r,function(e){return t._filterElement(e)})},t.prototype._filterStyleSheetList=function(e,r){return this._filterList(e,r,function(e){return t._filterElement(e.ownerNode)})},t._getFirstNonShadowElement=function(e){for(var r=m["default"].nodeListLengthGetter.call(e),n=0;n<r;n++)if(t._filterElement(e[n]))return e[n];return null},t.prototype._createWrapperCreators=function(){var e=this;return{getElementsByClassName:function(t){return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=m["default"][t].apply(this,n),s=m["default"].htmlCollectionLengthGetter.call(i);return e._filterNodeList(i,s)}},getElementsByTagName:function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=m["default"][e].apply(this,r),i=r[0];return"string"!=typeof i?o:(o[N]?o[N]._refreshCollection():o[N]=new C["default"](o,i),o[N])}},querySelector:function(e,r){return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];"string"==typeof o[0]&&(o[0]=f["default"].processSelector(o[0]));var s=m["default"][e].apply(this,o),a=t._filterElement(s);return!s||a?a:t._getFirstNonShadowElement(m["default"][r].apply(this,o))}},querySelectorAll:function(t){return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];"string"==typeof n[0]&&(n[0]=f["default"].processSelector(n[0]));var i=m["default"][t].apply(this,n),s=m["default"].nodeListLengthGetter.call(i);return e._filterNodeList(i,s)}}}},t.prototype._markShadowUIContainerAndCollections=function(e){t._markAsShadowContainer(e),t.markAsShadowContainerCollection(e.children),t.markAsShadowContainerCollection(e.childNodes)},t.prototype.markShadowUIContainers=function(e,t){e&&this._markShadowUIContainerAndCollections(e),t&&this._markShadowUIContainerAndCollections(t)},t.prototype._bringRootToWindowTopLeft=function(){for(var e=!1,t=this.root.parentNode;t;){var r=(0,w.get)(t,"position");P.test(r)&&(e=!0),t=t.parentNode}if(e){var n=(0,E.getOffsetPosition)(this.root);if(0!==n.left||0!==n.top){var o=parseFloat((0,w.get)(this.root,"left"))||0,i=parseFloat((0,w.get)(this.root,"top"))||0,s=o-n.left+"px",a=i-n.top+"px";(0,w.set)(this.root,"left",s),(0,w.set)(this.root,"top",a)}}},t.prototype._overrideDocumentMethods=function(e,r){var n=this,o=e.Document.prototype;o.elementFromPoint=function(){n.addClass(n.getRoot(),n.HIDDEN_CLASS);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=t._filterElement(m["default"].elementFromPoint.apply(this,r));return n.removeClass(n.getRoot(),n.HIDDEN_CLASS),i},r.caretRangeFromPoint&&(o.caretRangeFromPoint=function(){n.addClass(n.getRoot(),n.HIDDEN_CLASS);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=m["default"].caretRangeFromPoint.apply(this,r);return i&&i.startContainer&&!t._filterElement(i.startContainer)&&(i=null),n.removeClass(n.getRoot(),n.HIDDEN_CLASS),i}),r.caretPositionFromPoint&&(o.caretPositionFromPoint=function(){n.addClass(n.getRoot(),n.HIDDEN_CLASS);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=m["default"].caretPositionFromPoint.apply(this,r);return i&&i.offsetNode&&!t._filterElement(i.offsetNode)&&(i=null),n.removeClass(n.getRoot(),n.HIDDEN_CLASS),i}),o.getElementById=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t._filterElement(m["default"].getElementById.apply(this,r))},o.getElementsByName=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=m["default"].getElementsByName.apply(this,t),i=A.getElementsByNameReturnsHTMLCollection?m["default"].htmlCollectionLengthGetter.call(o):m["default"].nodeListLengthGetter.call(o);return n._filterNodeList(o,i)},o.getElementsByClassName=this.wrapperCreators.getElementsByClassName("getElementsByClassName"),o.getElementsByTagName=this.wrapperCreators.getElementsByTagName("getElementsByTagName"),o.querySelector=this.wrapperCreators.querySelector("querySelector","querySelectorAll"),o.querySelectorAll=this.wrapperCreators.querySelectorAll("querySelectorAll"),o.querySelectorAll.toString=function(){return m["default"].querySelectorAll.toString()},o.getElementsByClassName.toString=function(){return m["default"].getElementsByClassName.toString()}},t.prototype._overrideElementMethods=function(e){var t=e.HTMLBodyElement.prototype,r=e.HTMLHeadElement.prototype;t.getElementsByClassName=this.wrapperCreators.getElementsByClassName("elementGetElementsByClassName"),t.getElementsByTagName=this.wrapperCreators.getElementsByTagName("elementGetElementsByTagName"),t.querySelector=this.wrapperCreators.querySelector("elementQuerySelector","elementQuerySelectorAll"),t.querySelectorAll=this.wrapperCreators.querySelectorAll("elementQuerySelectorAll"),r.getElementsByClassName=t.getElementsByClassName,r.getElementsByTagName=t.getElementsByTagName,r.querySelector=t.querySelector,r.querySelectorAll=t.querySelectorAll},t.prototype._getUIStyleSheetsHtml=function(){for(var e="link."+S["default"].uiStylesheet,t=this.nativeMethods.querySelectorAll.call(this.document,e),r=this.nativeMethods.nodeListLengthGetter.call(t),n="",o=0;o<r;o++)n+=m["default"].elementOuterHTMLGetter.call(t[o]);return n},t.prototype._restoreUIStyleSheets=function(e,r){if(e&&r){var n=this.nativeMethods.createElement.call(this.document,"div");m["default"].elementInnerHTMLSetter.call(n,r);for(var o=m["default"].htmlCollectionLengthGetter.call(n.children),i=0;i<o;i++){var s=e.children[i]||null,a=m["default"].cloneNode.call(n.children[i]);t._markElementAsShadow(a),this.nativeMethods.insertBefore.call(e,a,s)}}},t.prototype._markScriptsAndStylesAsShadowInHead=function(e){if(e)for(var r=m["default"].htmlCollectionLengthGetter.call(e.children),n=0;n<r;n++){var o=e.children[n];t.containsShadowUIClassPostfix(o)&&t._markElementAsShadow(o)}},t.prototype.getRoot=function(){var e=this;if(!this.root||!this.document.body.contains(this.root))if(this.root)m["default"].appendChild.call(this.document.body,this.root);else{this.root=m["default"].createElement.call(this.document,"div"),m["default"].setAttribute.call(this.root,"id",t.patchId(this.ROOT_ID)),m["default"].setAttribute.call(this.root,"contenteditable","false"),this.addClass(this.root,this.ROOT_CLASS),t._markElementAsShadow(this.root),m["default"].appendChild.call(this.document.body,this.root);for(var r=0;r<v.EVENTS.length;r++){var n=v.EVENTS[r];this.root.addEventListener(n,_.stopPropagation)}this._bringRootToWindowTopLeft(),m["default"].documentAddEventListener.call(this.document,"DOMContentLoaded",function(){e.onBodyElementMutation(),e._bringRootToWindowTopLeft()})}return this.root},t.prototype.attach=function(t){e.prototype.attach.call(this,t,t.document),this.markShadowUIContainers(this.document.head,this.document.body),this._overrideDocumentMethods(t,t.document),this._overrideElementMethods(t),this._markScriptsAndStylesAsShadowInHead(t.document.head),this._initEvents()},t.prototype._initEvents=function(){this.iframeSandbox.on(this.iframeSandbox.RUN_TASK_SCRIPT_EVENT,this.runTaskScriptEventCallback),this.nodeMutation.on(this.nodeMutation.BEFORE_DOCUMENT_CLEANED_EVENT,this.beforeDocumentCleanedEventCallback),this.nodeMutation.on(this.nodeMutation.DOCUMENT_CLEANED_EVENT,this.documentCleanedEventCallback),this.nodeMutation.on(this.nodeMutation.DOCUMENT_CLOSED_EVENT,this.documentClosedEventCallback),this.nodeMutation.on(this.nodeMutation.BODY_CONTENT_CHANGED_EVENT,this.bodyContentChangedEventCallback),this.messageSandbox.on(this.messageSandbox.SERVICE_MSG_RECEIVED_EVENT,this.serviceMsgReceivedEventCallback),this.nodeMutation.on(this.nodeMutation.BODY_CREATED_EVENT,this.bodyCreatedEventCallback)},t.prototype.onBodyElementMutation=function(){if(this.root&&this.document.body){var e=g.closest(this.root,"html"),t=!this.nativeMethods.elementNextElementSiblingGetter.call(this.root),r=this.root.parentNode===this.document.body;e&&t&&r||this.nativeMethods.appendChild.call(this.document.body,this.root),this.markShadowUIContainers(this.document.head,this.document.body)}},t.prototype.getFirstChild=function(e){var t=m["default"].nodeListLengthGetter.call(e.childNodes),r=this._filterNodeList(e.childNodes,t);return r[0]||null},t.prototype.getFirstElementChild=function(e){var t=m["default"].htmlCollectionLengthGetter.call(e.children),r=this._filterNodeList(e.children,t);return r[0]||null},t.prototype.getLastChild=function(e){var t=m["default"].nodeListLengthGetter.call(e.childNodes),r=this._filterNodeList(e.childNodes,t),n=e.childNodes===r?t-1:r.length-1;return n>=0?r[n]:null},t.prototype.getLastElementChild=function(e){var t=m["default"].htmlCollectionLengthGetter.call(e.children),r=this._filterNodeList(e.children,t),n=e.children===r?t-1:r.length-1;return n>=0?r[n]:null},t.prototype.getNextSibling=function(e){if(!e)return e;do e=m["default"].nodeNextSiblingGetter.call(e);while(e&&g.isShadowUIElement(e));return e},t.prototype.getPrevSibling=function(e){if(!e)return e;do e=m["default"].nodePrevSiblingGetter.call(e);while(e&&g.isShadowUIElement(e));return e},t.prototype.getNextElementSibling=function(e){do e=m["default"].elementNextElementSiblingGetter.call(e);while(e&&g.isShadowUIElement(e));return e},t.prototype.getPrevElementSibling=function(e){do e=m["default"].elementPrevElementSiblingGetter.call(e);while(e&&g.isShadowUIElement(e));return e},t._checkElementsPosition=function(e,t){if(t){for(var r=[],n=0;n<t;n++){var o=e[n];g.isShadowUIElement(o)&&r.push(o)}for(var i=r.length&&r[0].parentNode,s=0;s<r.length;s++){var a=r[s];m["default"].appendChild.call(i,a)}}},t._hasFlag=function(e,t){try{return!!e[t]}catch(r){return!1}},t.isShadowContainer=function(e){return t._hasFlag(e,I)},t.isShadowContainerCollection=function(e){return t._hasFlag(e,M)},t._isShadowUIChildListMutation=function(e){if(g.isShadowUIElement(e.target))return!0;for(var t=m["default"].nodeListLengthGetter.call(e.removedNodes),r=0;r<t;r++)if(g.isShadowUIElement(e.removedNodes[r]))return!0;for(var n=m["default"].nodeListLengthGetter.call(e.addedNodes),o=0;o<n;o++)if(g.isShadowUIElement(e.addedNodes[o]))return!0;return!1},t._isShadowUIAttributeMutation=function(e){return g.isShadowUIElement(e.target)||g.isHammerheadAttr(e.attributeName)},t._isShadowUICharacterDataMutation=function(e){return g.isShadowUIElement(e.target)},t.isShadowUIMutation=function(e){switch(e.type){case"childList":return t._isShadowUIChildListMutation(e);case"attributes":return t._isShadowUIAttributeMutation(e);case"characterData":return t._isShadowUICharacterDataMutation(e);default:return!1}},t.removeSelfRemovingScripts=function(e){for(var t=m["default"].querySelectorAll.call(e,"."+S["default"].selfRemovingScript),r=m["default"].nodeListLengthGetter.call(t),n=0;n<r;n++)m["default"].removeChild.call(t[n].parentNode,t[n])},t.prototype.getShadowUICollectionLength=function(e,r){for(var n=0,o=0;o<r;o++)g.isShadowUIElement(e[o])&&n++;return n&&!this.ieDebugSandbox.isDebuggerInitiator()&&t._checkElementsPosition(e,r),r-n},t.prototype.addClass=function(e,r){var n=t.patchClassNames(r);g.addClass(e,n)},t.prototype.removeClass=function(e,r){var n=t.patchClassNames(r);g.removeClass(e,n)},t.hasClass=function(e,r){var n=t.patchClassNames(r);return g.hasClass(e,n)},t.patchId=function(e){return e+S["default"].postfix},t.patchClassNames=function(e){for(var t=e.split(/\s+/),r=0;r<t.length;r++)t[r]+=S["default"].postfix;return t.join(" ")},t.prototype.select=function(e,t){var r=e.replace(O,function(e){return e+S["default"].postfix});return t?m["default"].elementQuerySelectorAll.call(t,r):m["default"].querySelectorAll.call(this.document,r)},t.prototype.setBlind=function(e){e?this.addClass(this.getRoot(),this.BLIND_CLASS):this.removeClass(this.getRoot(),this.BLIND_CLASS)},t.prototype.getLastActiveElement=function(){return this.lastActiveElement},t.prototype.setLastActiveElement=function(e){this.lastActiveElement=e},t.prototype.insertBeforeRoot=function(e){var t=this.getRoot().parentNode,r=this.nativeMethods.nodeLastChildGetter.call(t);return m["default"].insertBefore.call(t,e,r)},t._markElementAsShadow=function(e){e[u["default"].shadowUIElement]=!0},t.markElementAndChildrenAsShadow=function(e){if(t._markElementAsShadow(e),e.querySelectorAll)for(var r=(0,x.getNativeQuerySelectorAll)(e).call(e,"*"),n=m["default"].nodeListLengthGetter.call(r),o=0;o<n;o++)t._markElementAsShadow(r[o])},t._markAsShadowContainer=function(e){
m["default"].objectDefineProperty(e,I,{value:!0})},t.markAsShadowContainerCollection=function(e){m["default"].objectDefineProperty(e,M,{value:!0})},t.containsShadowUIClassPostfix=function(e){return"string"==typeof e.className&&e.className.indexOf(S["default"].postfix)!==-1},t}(p["default"]);e["default"]=D,t.exports=e["default"]},storages:{"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=r("../base"),u=o(l),c=r("./wrapper"),p=o(c),d=r("../../settings"),f=o(d),h=r("../../utils/destination-location"),m=n(h),y=r("../native-methods"),g=n(y),v=r("../../utils/dom"),E=r("../../../utils/get-storage-key"),b=o(E),S=r("../../../processing/dom/internal-properties"),w=o(S),_=r("../../json"),x=n(_),T=r("../../utils/property-overriding"),C=function(e){function t(r,n,o){i(this,t);var a=s(this,e.call(this));return a.localStorageWrapper=null,a.sessionStorageWrapper=null,a.listeners=r,a.unloadSandbox=n,a.eventSimulator=o,a.storages={},a.isLocked=!1,a}return a(t,e),t.prototype._simulateStorageEventIfNecessary=function(e,t){this.isDeactivated()||t&&t.getContext()!==this.window&&(e.storageArea=t,this.eventSimulator.storage(this.window,e))},t.prototype._createStorageWrappers=function(){var e=this,t=m.getParsed().host,r=f["default"].get().sessionId,n=(0,b["default"])(r,t),o=(0,v.getTopSameDomainWindow)(this.window),i=o[w["default"].hammerhead].sandbox.storageSandbox.storages;i[n]?(this.localStorageWrapper=i[n].localStorageWrapper,this.sessionStorageWrapper=i[n].sessionStorageWrapper):(this.localStorageWrapper=new p["default"](this.window,g.winLocalStorageGetter.call(this.window),n),this.sessionStorageWrapper=new p["default"](this.window,g.winSessionStorageGetter.call(this.window),n),this.unloadSandbox.on(this.unloadSandbox.BEFORE_UNLOAD_EVENT,function(){e.isLocked||(e.localStorageWrapper.saveToNativeStorage(),e.sessionStorageWrapper.saveToNativeStorage())}),i[n]={localStorageWrapper:this.localStorageWrapper,sessionStorageWrapper:this.sessionStorageWrapper})},t.prototype._overrideStorageEvent=function(){var e=this.window;this.window.StorageEvent=function(t,r){if(0===arguments.length)throw new TypeError;var n=r.storageArea||null;n&&delete r.storageArea;var o=new g.StorageEvent(t,r);return n&&g.objectDefineProperty.call(e.Object,o,"storageArea",{get:function(){return n},set:function(){}}),o},window.StorageEvent.toString=function(){return g.StorageEvent.toString()}},t.prototype.clear=function(){g.winLocalStorageGetter.call(this.window).removeItem(this.localStorageWrapper.nativeStorageKey),g.winSessionStorageGetter.call(this.window).removeItem(this.sessionStorageWrapper.nativeStorageKey)},t.prototype.lock=function(){this.isLocked=!0},t.prototype.backup=function(){return{localStorage:x.stringify(this.localStorageWrapper.getCurrentState()),sessionStorage:x.stringify(this.sessionStorageWrapper.getCurrentState())}},t.prototype.restore=function(e){var t=e.localStorage,r=e.sessionStorage;this.localStorageWrapper.restore(t),this.sessionStorageWrapper.restore(r)},t.prototype.attach=function(t){var r=this;e.prototype.attach.call(this,t),this._createStorageWrappers(),this.onLocalStorageChangeListener=this.localStorageWrapper.on(this.localStorageWrapper.STORAGE_CHANGED_EVENT,function(e){return r._simulateStorageEventIfNecessary(e,r.localStorageWrapper)}),this.onSessionStorageListener=this.sessionStorageWrapper.on(this.sessionStorageWrapper.STORAGE_CHANGED_EVENT,function(e){return r._simulateStorageEventIfNecessary(e,r.sessionStorageWrapper)}),this.listeners.initElementListening(t,["storage"]),this.listeners.addInternalEventListener(t,["storage"],function(e,t,r){t||r()}),this._overrideStorageEvent();var n=this.nativeMethods.getStoragesPropsOwner(t),o=!g.isStoragePropsLocatedInProto||!g.objectHasOwnProperty.call(t,"localStorage");o&&g.objectDefineProperties.call(t.Object,t,{localStorage:(0,T.createOverriddenDescriptor)(n,"localStorage",{getter:function(){return r.localStorageWrapper.setContext(t),r.localStorageWrapper}}),sessionStorage:(0,T.createOverriddenDescriptor)(n,"sessionStorage",{getter:function(){return r.sessionStorageWrapper.setContext(t),r.sessionStorageWrapper}})})},t.prototype.dispose=function(){this.localStorageWrapper.off(this.localStorageWrapper.STORAGE_CHANGED_EVENT,this.onLocalStorageChangeListener),this.sessionStorageWrapper.off(this.sessionStorageWrapper.STORAGE_CHANGED_EVENT,this.onSessionStorageListener);var e=(0,v.getTopSameDomainWindow)(this.window);this.window!==e||e.frameElement||(this.localStorageWrapper.dispose(),this.sessionStorageWrapper.dispose())},t}(u["default"]);e["default"]=C,t.exports=e["default"]},"wrapper.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){var e=[];for(var t in S.prototype)e.push(t);return e}e.__esModule=!0;var a=r("../../utils/event-emitter"),l=o(a),u=r("../../utils/browser"),c=r("../../utils/url"),p=r("../../utils/destination-location"),d=n(p),f=r("../../json"),h=n(f),m=r("../native-methods"),y=o(m),g="hammerhead|storages-sandbox-temp",v="hammerhead|api-key-prefix|",E=0,b=1,S=function w(e,t,r){var n=this,o=arguments;i(this,w),this.eventEmitter=new l["default"],this.on=function(e,t){return n.eventEmitter.on(e,t)},this.off=function(e,t){return n.eventEmitter.off(e,t)},this.emit=function(e,t){return n.eventEmitter.emit(e,t)},this.nativeStorage=t,this.nativeStorageKey=r,this.lastState=null,this.window=e,this.initialProperties=[],this.wrapperMethods=[],this.context=e,this.intervalId=null,this.STORAGE_CHANGED_EVENT="hammerhead|event|storage-changed",this.EMPTY_OLD_VALUE_ARG=u.isIE?"":null;var a=function(){var e=[];for(var t in n)y["default"].objectHasOwnProperty.call(n,t)&&n.initialProperties.indexOf(t)===-1&&e.push(t);return e};y["default"].objectDefineProperty.call(e.Object,this,"length",{get:function(){return a().length},set:function(){}});var p=function(e){e||(e=n.nativeStorage[n.nativeStorageKey]),e=h.parse(e||"[[],[]]");for(var t=0;t<e[E].length;t++)n[e[E][t]]=e[b][t]},f=function(e,t,r){var o=null;try{var i=(0,c.parseProxyUrl)(n.context.location.toString());o=i?i.destUrl:d.get()}catch(s){n.context=n.window,o=d.get()}n.emit(n.STORAGE_CHANGED_EVENT,{key:e,oldValue:t,newValue:r,url:o})},m=function(){for(var e=n.getCurrentState(),t=0;t<n.lastState[E].length;t++){var r=n.lastState[E][t],o=n.lastState[b][t],i=e[E].indexOf(r);i!==-1?(e[b][i]!==o&&f(e[E][i],o,e[b][i]),e[E].splice(i,1),e[b].splice(i,1)):f(r,o,null)}for(var s=0;s<e[E].length;s++)f(e[E][s],n.EMPTY_OLD_VALUE_ARG,e[b][s]);n.lastState=n.getCurrentState()},S=function(){for(var e=a(),t=!1,r=0;r<e.length;r++){var o=e[r];delete n[o],t=!0}return t},_=function(){p(),n.lastState=n.getCurrentState(),n.intervalId=y["default"].setInterval.call(n.window,function(){return m()},10)};this.setContext=function(e){n.context=e},this.getContext=function(){return n.context},this.saveToNativeStorage=function(){var e=h.stringify(n.getCurrentState());n.nativeStorage[n.nativeStorageKey]!==e&&(n.nativeStorage[n.nativeStorageKey]=e)},this.getCurrentState=function(){for(var e=a(),t=[[],[]],r=0;r<e.length;r++){var o=e[r];t[E].push(o),t[b].push(n[o])}return t},this.restore=function(e){S(),p(e),n.lastState=n.getCurrentState()},this.dispose=function(){y["default"].clearInterval.call(n.window,n.intervalId)};var x=function(e){return n.nativeStorage[g]=e,n.nativeStorage[g]},T=function(e){var t=n.wrapperMethods.indexOf(e)!==-1||n.initialProperties.indexOf(e)!==-1;return e=t?v+e:e,x(e)};this.clear=function(){S()&&(f(null,null,null),n.lastState=n.getCurrentState())},this.getItem=function(e){if(0===o.length)throw new TypeError;return e=T(e),y["default"].objectHasOwnProperty.call(n,e)?n[e]:null},this.key=function(e){if(void 0===e)throw new TypeError;e%=4294967296;var t=a();return e>=0&&e<t.length?t[e]:null},this.removeItem=function(e){if(0===o.length)throw new TypeError;e=T(e),delete n[e],m()},this.setItem=function(e,t){if(o.length<2)throw new TypeError;e=T(e),t=x(t),n[e]=t,m()},this.initialProperties=y["default"].objectGetOwnPropertyNames.call(e.Object,this),this.wrapperMethods=s(),_()};e["default"]=S,S.prototype=Storage.prototype,t.exports=e["default"]}},"style.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("./base"),l=n(a),u=r("./../utils/property-overriding"),c=r("./../../processing/style"),p=n(c),d=r("./../utils/url"),f="hammerhead|style|is-processed",h="hammerhead|style|proxy-object",m="hammerhead|style|proxy-target",y=function(e){function t(){o(this,t);var r=i(this,e.call(this));return r.URL_PROPS=["background","backgroundImage","borderImage","borderImageSource","listStyle","listStyleImage","cursor"],r.DASHED_URL_PROPS=t._generateDashedProps(r.URL_PROPS),r.FEATURES=r._detectBrowserFeatures(),r}return s(t,e),t._convertToDashed=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},t._generateDashedProps=function(e){for(var r=[],n=0;n<e.length;n++){var o=e[n],i=t._convertToDashed(o);o!==i&&r.push(i)}return r},t.prototype._detectBrowserFeatures=function(){var e={};if(e.protoContainsAllProps=!!window.CSS2Properties,e.protoContainsUrlProps=this.nativeMethods.objectHasOwnProperty.call(window.CSSStyleDeclaration.prototype,"background"),!e.protoContainsAllProps&&!e.protoContainsUrlProps){var t=this.nativeMethods.createElement.call(document,"div"),r=!1,n=this.nativeMethods.objectGetOwnPropertyDescriptor.call(window.Object,t.style,"background");n.configurable&&(delete n.value,delete n.writable,n.set=function(){r=!0},this.nativeMethods.objectDefineProperty.call(window.Object,t.style,"background",n),t.style.background="url"),e.propsCannotBeOverridden=!n.configurable||!r}return e},t.prototype._overrideStyleProp=function(e,r){var n=this.nativeMethods,o=t._convertToDashed(r);(0,u.overrideDescriptor)(e,r,{getter:function(){var e=n.styleGetPropertyValue.call(this,o);return p["default"].cleanUp(e,d.parseProxyUrl)},setter:function(e){"string"==typeof e&&(e=p["default"].process(e,d.getProxyUrl)),n.styleSetProperty.call(this,o,e)}})},t.prototype._overrideStyleInstanceProp=function(e,r){var n=this.nativeMethods,o=t._convertToDashed(r);(0,u.overrideDescriptor)(e,r,{getter:function(){var e=n.styleGetPropertyValue.call(this,o);return p["default"].cleanUp(e,d.parseProxyUrl)},setter:function(e){"string"==typeof e&&(e=p["default"].process(e,d.getProxyUrl)),n.styleSetProperty.call(this,o,e)}})},t.prototype._processStyleInstance=function(e){var t=e[f];if(!t){for(var r=0,n=this.DASHED_URL_PROPS;r<n.length;r++){var o=n[r];this._overrideStyleInstanceProp(e,o)}if(!this.FEATURES.protoContainsUrlProps)for(var i=0,s=this.URL_PROPS;i<s.length;i++){var a=s[i];this._overrideStyleInstanceProp(e,a)}this.nativeMethods.objectDefineProperty.call(window.Object,e,f,{value:!0})}return e},t.prototype._getStyleProxy=function(e){var t=this,r=e[h];return r||(r=new this.nativeMethods.Proxy(e,{get:function(e,r){return t.URL_PROPS.indexOf(r)!==-1||t.DASHED_URL_PROPS.indexOf(r)!==-1?p["default"].cleanUp(e[r],d.parseProxyUrl):r===m?e:e[r]},set:function(e,r,n){return t.URL_PROPS.indexOf(r)===-1&&t.DASHED_URL_PROPS.indexOf(r)===-1||"string"==typeof n&&(n=p["default"].process(n,d.getProxyUrl)),e[r]=n,!0}}),this.nativeMethods.objectDefineProperty.call(window.Object,e,h,{value:r})),r},t.prototype._overrideCSSStyleDeclarationFunctionsCtx=function(e){var t=this,r=e.CSSStyleDeclaration.prototype,n=function(n){var o=t.nativeMethods.objectGetOwnPropertyDescriptor.call(e.Object,r,n).value;t.nativeMethods.objectHasOwnProperty.call(r,n)&&"function"==typeof o&&(r[n]=function(){return o.apply(this[m]||this,arguments)})};for(var o in r)n(o)},t.prototype.attach=function(t){e.prototype.attach.call(this,t);var r=this.nativeMethods,n=this;if((0,u.overrideDescriptor)(t[r.htmlElementStylePropOwnerName].prototype,"style",{getter:this.FEATURES.protoContainsAllProps?null:function(){var e=r.htmlElementStyleGetter.call(this);return n.FEATURES.propsCannotBeOverridden?n._getStyleProxy(e):n._processStyleInstance(e)},setter:r.htmlElementStyleSetter?function(e){var t=p["default"].process(e,d.getProxyUrl);r.htmlElementStyleSetter.call(this,t)}:null}),this.FEATURES.protoContainsAllProps){for(var o=0,i=this.URL_PROPS;o<i.length;o++){var s=i[o];this._overrideStyleProp(t.CSS2Properties.prototype,s)}for(var a=0,l=this.DASHED_URL_PROPS;a<l.length;a++){var c=l[a];this._overrideStyleProp(t.CSS2Properties.prototype,c)}}else if(this.FEATURES.protoContainsUrlProps)for(var f=0,h=this.URL_PROPS;f<h.length;f++){var m=h[f];this._overrideStyleProp(t.CSSStyleDeclaration.prototype,m)}(0,u.overrideDescriptor)(t.CSSStyleDeclaration.prototype,"cssText",{getter:function(){var e=r.styleCssTextGetter.call(this);return p["default"].cleanUp(e,d.parseProxyUrl)},setter:function(e){"string"==typeof e&&(e=p["default"].process(e,d.getProxyUrl)),r.styleCssTextSetter.call(this,e)}}),t.CSSStyleDeclaration.prototype.getPropertyValue=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=r.styleGetPropertyValue.apply(this,t);return p["default"].cleanUp(o,d.parseProxyUrl)},t.CSSStyleDeclaration.prototype.setProperty=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[1];return"string"==typeof o&&(t[1]=p["default"].process(o,d.getProxyUrl)),r.styleSetProperty.apply(this,t)},t.CSSStyleDeclaration.prototype.removeProperty=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=r.styleRemoveProperty.apply(this,t);return p["default"].cleanUp(o,d.parseProxyUrl)},this.FEATURES.propsCannotBeOverridden&&this._overrideCSSStyleDeclarationFunctionsCtx(t)},t}(l["default"]);e["default"]=y,t.exports=e["default"]},"timers.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("./base"),l=n(a),u=r("./native-methods"),c=n(u),p=r("../../processing/script"),d=r("../utils/browser"),f=function(e){function t(){o(this,t);var r=i(this,e.call(this));return r.timeouts=[],r.deferredFunctions=[],r.setTimeout=c["default"].setTimeout,r}return s(t,e),t.prototype._wrapTimeoutFunctionsArguments=function(e){var t=this,r="string"==typeof e[0],n=r?null:e[0],o=r?(0,p.processScript)(e[0],!1):null;if(d.isIE&&d.version<12){var i=this,s=r?function(){var e=t.window.eval;return e(o)}:n;e[0]=function(){return i._callDeferredFunction(s,arguments)}}else r&&(e[0]=o);return e},t.prototype._callDeferredFunction=function(e,t){if(this.timeouts.length){for(var r=[],n=[],o=0;o<this.timeouts.length;o++)r.push(this.timeouts[o]),n.push(this.deferredFunctions[o]);this.timeouts=[],this.deferredFunctions=[];for(var i=0;i<r.length;i++)c["default"].clearInterval.call(this.window,r[i]),n[i]();return this._callDeferredFunction(e,t)}return e.apply(this.window,t)},t.prototype.attach=function(t){e.prototype.attach.call(this,t);var r=this;t.setTimeout=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return c["default"].setTimeout.apply(t,r._wrapTimeoutFunctionsArguments(n))},t.setInterval=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return c["default"].setInterval.apply(t,r._wrapTimeoutFunctionsArguments(n))},this.setTimeout=t.setTimeout},t.prototype.deferFunction=function(e){var t=this,r=function n(){e();for(var r=0;r<t.deferredFunctions.length;r++)if(t.deferredFunctions[r]===n){t.deferredFunctions.splice(r,1),t.timeouts.splice(r,1);break}};this.deferredFunctions.push(r),this.timeouts.push(c["default"].setTimeout.call(window,r,0))},t}(l["default"]);e["default"]=f,t.exports=e["default"]},upload:{"file-list-wrapper.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../native-methods"),s=n(i),a=function(){function e(t){var r=this;o(this,e),s["default"].objectDefineProperty.call(window.Object,this,"length",{get:function(){return t.length}});for(var n=0;n<t.length;n++)this[n]=e._createFileWrapper(t[n]);this.item=function(e){return r[e]}}return e._base64ToBlob=function(e,t,r){t=t||"",r=r||512;for(var n=atob(e),o=[],i=0;i<n.length;i+=r){for(var s=n.slice(i,i+r),a=new Array(s.length),l=0;l<s.length;l++)a[l]=s.charCodeAt(l);o.push(new Uint8Array(a))}return new Blob(o,{type:t})},e._createFileWrapper=function(t){var r=null;return r=window.Blob?t.blob?new Blob([t.blob],{type:t.info.type}):e._base64ToBlob(t.data,t.info.type):{size:t.info.size,type:t.info.type},r.name=t.info.name,r.lastModifiedDate=new Date(t.info.lastModifiedDate),r.base64=t.data,r},e}();e["default"]=a,window.FileList&&(a.prototype=FileList.prototype),t.exports=e["default"]},"hidden-info.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=m["default"].createElement.call(document,"input");return t.type="hidden",t.name=f["default"].uploadInfoHiddenInputName,m["default"].inputValueSetter.call(t,"[]"),m["default"].appendChild.call(e,t),t}function s(e){var t='[name="'+f["default"].uploadInfoHiddenInputName+'"]';return m["default"].elementQuerySelector.call(e,t)||i(e)}function a(e,t){for(var r=0;r<e.length;r++)if(e[r].id===t.id||e[r].name===t.name)return r;return-1}function l(e,t,r){var n=u(e);if(n){var o=[];t=m["default"].arraySlice.call(t);for(var i=0,s=t.length;i<s;i++){var l=t[i];o.push({name:l.name,type:l.type,data:l.base64})}var p=a(n,e),d={id:e.id,name:e.name,files:o,value:r};p===-1?n.push(d):n[p]=d,c(e,n)}}function u(e){return e.form?g.parse(m["default"].inputValueGetter.call(s(e.form))):null}function c(e,t){if(e.form){var r=s(e.form);m["default"].inputValueSetter.call(r,g.stringify(t))}}function p(e){var t=u(e);if(t){var r=a(t,e);if(r!==-1)return t.splice(r,1),c(e,t),!0}return!1}e.__esModule=!0,e.addInputInfo=l,e.getFormInfo=u,e.setFormInfo=c,e.removeInputInfo=p;var d=r("../../../processing/dom/internal-attributes"),f=o(d),h=r("../native-methods"),m=o(h),y=r("../../json"),g=n(y)},"index.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("../../../processing/dom/internal-properties"),l=n(a),u=r("../base"),c=n(u),p=r("./info-manager"),d=n(p),f=r("../../utils/dom"),h=r("../../utils/browser"),m=r("../../utils/event"),y=r("../backup"),g=r("../native-methods"),v=n(g),E=function(e){function t(r,n,s){o(this,t);var a=i(this,e.call(this));return a.START_FILE_UPLOADING_EVENT="hammerhead|event|start-file-uploading",a.END_FILE_UPLOADING_EVENT="hammerhead|event|end-file-uploading",a.infoManager=new d["default"](s),a.listeners=r,a.eventSimulator=n,a}return s(t,e),t.prototype._riseChangeEvent=function(e){this.eventSimulator.change(e)},t._getCurrentInfoManager=function(e){var t=e[l["default"].processedContext];return(0,y.get)(t).upload.infoManager},t.prototype.attach=function(r){var n=this;e.prototype.attach.call(this,r),this.listeners.addInternalEventListener(r,["change"],function(e,r){var o=e.target,i=t._getCurrentInfoManager(o);if((0,f.isFileInput)(o)&&!r){(0,m.stopPropagation)(e),(0,m.preventDefault)(e);var s=v["default"].inputValueGetter.call(o);if(s||i.getValue(o)){var a=v["default"].inputFilesGetter.call(o),l=d["default"].getFileNames(a,s);n.emit(n.START_FILE_UPLOADING_EVENT,l,o),i.loadFileListData(o,a).then(function(e){return i.setUploadInfo(o,e,s),d["default"].sendFilesInfoToServer(e,l)}).then(function(e){n._riseChangeEvent(o),n.emit(n.END_FILE_UPLOADING_EVENT,e)})}}}),h.isIE&&this.listeners.addInternalEventListener(r,["click"],function(e,t){var r=e.target||e.srcElement;(0,f.isFileInput)(r)&&t&&(0,m.preventDefault)(e,!0)})},t.getFiles=function(e){var r=v["default"].inputFilesGetter.call(e);return void 0!==r?t._getCurrentInfoManager(e).getFiles(e):void 0},t.getUploadElementValue=function(e){return t._getCurrentInfoManager(e).getValue(e)},t.prototype.setUploadElementValue=function(e,r){return""===r&&t._getCurrentInfoManager(e).clearUploadInfo(e)&&h.isIE&&h.version>10&&this._riseChangeEvent(e),r},t.prototype.doUpload=function(e,r){var n=this,o=t._getCurrentInfoManager(e);return r=r||[],d["default"].loadFilesInfoFromServer(r).then(function(e){return d["default"].prepareFileListWrapper(e)}).then(function(t){if(!t.errs.length){var i=d["default"].formatValue(r);o.setUploadInfo(e,t.fileList,i),n._riseChangeEvent(e)}return t.errs})},t}(c["default"]);e["default"]=E,t.exports=e["default"]},"info-manager.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=r("../../../session/command"),a=o(s),l=r("./file-list-wrapper"),u=o(l),c=r("../../transport"),p=o(c),d=r("../../utils/browser"),f=n(d),h=r("./hidden-info"),m=n(h),y=r("pinkie"),g=o(y),v="C:\\fakepath\\",E=function(){function e(t){i(this,e),this.shadowUI=t,this.uploadInfo=[]}return e._getFileListData=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n.base64)}return t},e.formatValue=function(e){var t="";if(e="string"==typeof e?[e]:e,e&&e.length){if(!f.isWebKit)return e[0].split("/").pop();t=v+e[0].split("/").pop()}return t},e.getFileNames=function(e,t){var r=[];if(e)for(var n=0;n<e.length;n++){var o=e[n];r.push(o.name)}else t.lastIndexOf("\\")!==-1&&r.push(t.substr(t.lastIndexOf("\\")+1));return r},e.loadFilesInfoFromServer=function(e){return p["default"].asyncServiceMsg({cmd:a["default"].getUploadedFiles,filePaths:"string"==typeof e?[e]:e})},e.prepareFileListWrapper=function(e){for(var t=[],r=[],n=0;n<e.length;n++){var o=e[n];o.err?t.push(o):r.push(o)}return{errs:t,fileList:new u["default"](r)}},e.sendFilesInfoToServer=function(t,r){return p["default"].asyncServiceMsg({cmd:a["default"].uploadFiles,data:e._getFileListData(t),fileNames:r})},e.prototype.clearUploadInfo=function(e){var t=this.getUploadInfo(e);return t?(t.files=new u["default"]([]),t.value="",m.removeInputInfo(e)):null},e.prototype.getFiles=function(e){var t=this.getUploadInfo(e);return t?t.files:new u["default"]([])},e.prototype.getUploadInfo=function(e){for(var t=0,r=this.uploadInfo;t<r.length;t++){var n=r[t];if(n.input===e)return n}return null},e.prototype.getValue=function(e){var t=this.getUploadInfo(e);return t?t.value:""},e.prototype.loadFileListData=function(e,t){return t.length?new g["default"](function(e){var r=new FileReader,n=[],o=0,i=t[o];r.addEventListener("load",function(s){n.push({data:s.target.result.substr(s.target.result.indexOf(",")+1),blob:i.slice(0,i.size),info:{type:i.type,name:i.name,lastModifiedDate:i.lastModifiedDate}}),t[++o]?(i=t[o],r.readAsDataURL(i)):e(new u["default"](n))}),r.readAsDataURL(i)}):g["default"].resolve(new u["default"]([]))},e.prototype.setUploadInfo=function(e,t,r){var n=this.getUploadInfo(e);n||(n={input:e},this.uploadInfo.push(n)),n.files=t,n.value=r,m.addInputInfo(e,t,r)},e}();e["default"]=E,t.exports=e["default"]}},"windows-storage.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=(0,l.getTopSameDomainWindow)(window),t=e[p];return t||(t=[],c["default"].objectDefineProperty.call(window.Object,e,p,{value:t})),t}function i(e){for(var t=o(),r=t.length-1;r>=0;r--)try{if(t[r]===e)return}catch(n){t.splice(r,1)}t.push(e)}function s(e){var t=o(),r=t.indexOf(e);r!==-1&&t.splice(r,1)}function a(e){for(var t=o(),r=0;r<t.length;r++)try{if(t[r].name===e)return t[r]}catch(n){t.splice(r,1),r--}return null}e.__esModule=!0,e.add=i,e.remove=s,e.findByName=a;var l=r("../utils/dom"),u=r("./native-methods"),c=n(u),p="hammerhead|windows-storage"},"xhr.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=r("./base"),l=n(a),u=r("./native-methods"),c=n(u),p=r("../utils/url"),d=r("../../request-pipeline/xhr/headers"),f=n(d),h=r("../../request-pipeline/xhr/authorization"),m=n(h),y=r("../utils/destination-location"),g=r("../utils/property-overriding"),v=r("../../request-pipeline/xhr/same-origin-check-failed-status-code"),E=n(v),b=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],S=function(e){function t(r){o(this,t);var n=i(this,e.call(this));return n.XHR_COMPLETED_EVENT="hammerhead|event|xhr-completed",n.XHR_ERROR_EVENT="hammerhead|event|xhr-error",n.BEFORE_XHR_SEND_EVENT="hammerhead|event|before-xhr-send",n.cookieSandbox=r,n}return s(t,e),t.createNativeXHR=function(){var e=new c["default"].XMLHttpRequest;return e.open=c["default"].xhrOpen,e.abort=c["default"].xhrAbort,e.send=c["default"].xhrSend,e.addEventListener=c["default"].xhrAddEventListener,e.removeEventListener=c["default"].xhrRemoveEventListener,e.setRequestHeader=c["default"].xhrSetRequestHeader,e.getResponseHeader=c["default"].xhrGetResponseHeader,e.getAllResponseHeaders=c["default"].xhrGetAllResponseHeaders,e.overrideMimeType=c["default"].xhrOverrideMimeType,e.dispatchEvent=c["default"].xhrDispatchEvent,e},t.openNativeXhr=function(e,t,r){e.open("POST",t,r),e.setRequestHeader("Cache-Control","no-cache, no-store, must-revalidate")},t.prototype.attach=function(t){e.prototype.attach.call(this,t);for(var r=this,n=t.XMLHttpRequest.prototype,o=c["default"].XMLHttpRequest.toString(),i=function d(){this.readyState===this.DONE&&(r.emit(r.XHR_COMPLETED_EVENT,{xhr:this}),c["default"].xhrRemoveEventListener.call(this,"readystatechange",d))},s=function h(){this.readyState<this.HEADERS_RECEIVED||(r.cookieSandbox.syncCookie(),c["default"].xhrRemoveEventListener.call(this,"readystatechange",h))},a=function(){var e=new c["default"].XMLHttpRequest;return c["default"].xhrAddEventListener.call(e,"readystatechange",i),c["default"].xhrAddEventListener.call(e,"readystatechange",s),e},l=0;l<b.length;l++){var u=b[l];c["default"].objectDefineProperty.call(t.Object,a,u,{value:XMLHttpRequest[u],enumerable:!0})}t.XMLHttpRequest=a,a.prototype=n,a.toString=function(){return o},c["default"].objectDefineProperty.call(t.Object,n,"constructor",{value:a}),n.abort=function(){c["default"].xhrAbort.apply(this,arguments),r.emit(r.XHR_ERROR_EVENT,{err:new Error("XHR aborted"),xhr:this})},n.open=function(){var e=arguments[1],t="string"==typeof input;arguments[1]=(0,p.getProxyUrl)(t?e:String(e)),c["default"].xhrOpen.apply(this,arguments)},n.send=function(){r.emit(r.BEFORE_XHR_SEND_EVENT,{xhr:this}),c["default"].xhrSetRequestHeader.call(this,f["default"].requestMarker,"true"),c["default"].xhrSetRequestHeader.call(this,f["default"].origin,(0,y.getOriginHeader)()),this.withCredentials&&c["default"].xhrSetRequestHeader.call(this,f["default"].withCredentials,"true"),c["default"].xhrSend.apply(this,arguments),i.call(this),s.call(this)},n.setRequestHeader=function(e,t){return"string"==typeof e&&m["default"].headers.indexOf(e.toLowerCase())!==-1&&(t=m["default"].valuePrefix+t),c["default"].xhrSetRequestHeader.call(this,e,t)},(0,g.overrideDescriptor)(t.XMLHttpRequest.prototype,"status",{getter:function(){var e=c["default"].xhrStatusGetter.call(this);return e===E["default"]?0:e}}),c["default"].xhrResponseURLGetter&&(0,g.overrideDescriptor)(t.XMLHttpRequest.prototype,"responseURL",{getter:function(){var e=c["default"].xhrResponseURLGetter.call(this),t=e&&(0,p.parseProxyUrl)(e);return t?t.destUrl:e}})},t}(l["default"]);e["default"]=S,t.exports=e["default"]}},"settings.js":function(e,t,r){e.__esModule=!0;var n={settings:{},set:function(e){this.settings=e},get:function(){return this.settings}};e["default"]=n,t.exports=e["default"]},"transport.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("./sandbox/native-methods"),s=n(i),a=r("./settings"),l=n(a),u=r("./sandbox/xhr"),c=n(u),p=r("./json"),d=r("./utils/browser"),f=r("./utils/create-unresolvable-promise"),h=n(f),m=r("./utils/noop"),y=n(m),g=r("pinkie"),v=n(g),E=r("./utils/dom"),b=50,S=function(){function e(){o(this,e),this.msgQueue={},this.activeServiceMessagesCounter=0;var t=(0,E.getFrameElement)(window);this.shouldAddRefferer=t&&(0,E.isIframeWithoutSrc)(t)}return e._storeMessage=function(t){var r=e._getStoredMessages();r.push(t),s["default"].winLocalStorageGetter.call(window).setItem(l["default"].get().sessionId,(0,p.stringify)(r))},e._getStoredMessages=function(){var e=s["default"].winLocalStorageGetter.call(window).getItem(l["default"].get().sessionId);return e?(0,p.parse)(e):[]},e._removeMessageFromStore=function(t){for(var r=e._getStoredMessages(),n=0;n<r.length;n++)if(r[n].cmd===t){r.splice(n,1);break}s["default"].winLocalStorageGetter.call(window).setItem(l["default"].get().sessionId,(0,p.stringify)(r))},e.prototype._performRequest=function(t,r){var n=this;t.sessionId=l["default"].get().sessionId,
this.shouldAddRefferer&&(t.referer=l["default"].get().referer);var o=function i(o){n.activeServiceMessagesCounter++;var a=!o,u=n,f=c["default"].createNativeXHR(),h=function(){if(500===s["default"].xhrStatusGetter.call(this)&&this.responseText)return t.disableResending=!0,void m.call(this);u.activeServiceMessagesCounter--;var e=this.responseText&&(0,p.parse)(this.responseText);f=null,r(null,e)},m=function(){if(t.disableResending){u.activeServiceMessagesCounter--;var n="XHR request failed with "+f.status+" status code.";return this.responseText&&(n+="\nError message: "+this.responseText),void r(new Error(n))}d.isWebKit||d.isFirefox?(e._storeMessage(t),h.call(this)):i(!0)};c["default"].openNativeXhr(f,l["default"].get().serviceMsgUrl,a),o?f.addEventListener("readystatechange",function(){4===this.readyState&&h.call(this)}):(f.addEventListener("load",h),f.addEventListener("abort",m),f.addEventListener("error",m),f.addEventListener("timeout",m)),f.send((0,p.stringify)(t))};e._removeMessageFromStore(t.cmd),o()},e.prototype.waitForServiceMessagesCompleted=function(e){var t=this;return new v["default"](function(r){if(!t.activeServiceMessagesCounter)return void r();var n=null,o=window.setTimeout(function(){s["default"].clearInterval.call(window,n),r()},e);n=window.setInterval(function(){t.activeServiceMessagesCounter||(s["default"].clearInterval.call(window,n),s["default"].clearTimeout.call(window,o),r())},b)})},e.prototype.asyncServiceMsg=function(e){var t=this;return new v["default"](function(r,n){t._performRequest(e,function(t,o){t?e.allowRejecting&&n(t):r(o)})})},e.prototype.batchUpdate=function(){var t=e._getStoredMessages();if(t.length){var r=[];s["default"].winLocalStorageGetter.call(window).removeItem(l["default"].get().sessionId);for(var n=0;n<t.length;n++){var o=t[n];r.push(this.queuedAsyncServiceMsg(o))}return v["default"].all(r)}return v["default"].resolve()},e.prototype.queuedAsyncServiceMsg=function(e){var t=this;this.msgQueue[e.cmd]||(this.msgQueue[e.cmd]=v["default"].resolve());var r=e.allowRejecting;return e.allowRejecting=!0,this.msgQueue[e.cmd]=this.msgQueue[e.cmd]["catch"](y["default"]).then(function(){return t.asyncServiceMsg(e)}),this.msgQueue[e.cmd]["catch"](function(e){return r?v["default"].reject(e):(0,h["default"])()})},e}();e["default"]=new S,t.exports=e["default"]},utils:{"browser.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e.isElectron=e.isWebKit=e.isSafari=e.isChrome=e.isMSEdge=e.isFirefox=e.isIE9=e.isIE10=e.isIE11=e.isIE=e.webkitVersion=e.fullVersion=e.version=e.isTablet=e.isMobile=e.isIOS=e.isAndroid=e.isMacPlatform=e.compareVersions=void 0;var o=r("bowser"),i=n(o),s=navigator.userAgent.toLowerCase(),a=i["default"]._detect(s),l=s.match(/applewebkit\/(\d+(:?\.\d+)*)/),u=(e.compareVersions=i["default"].compareVersions,e.isMacPlatform=!!a.mac,e.isAndroid=!!a.android,e.isIOS=!!a.ios,e.isMobile=!!a.mobile,e.isTablet=!!a.tablet,e.version=parseInt(a.version,10)),c=(e.fullVersion=a.version,e.webkitVersion=l&&l[1]||"",e.isIE=!(!a.msie&&!a.msedge));e.isIE11=c&&11===u,e.isIE10=c&&10===u,e.isIE9=c&&9===u,e.isFirefox=!!a.firefox,e.isMSEdge=!!a.msedge,e.isChrome=!!a.chrome,e.isSafari=!!a.safari,e.isWebKit=!(!a.webkit&&!a.blink),e.isElectron=/electron/g.test(s)},"constructor-is-called-without-new-keyword.js":function(e,t,r){e.__esModule=!0,e["default"]=function(e,t){return e instanceof t==!1},t.exports=e["default"]},"cookie.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){e=(0,p["default"])(e);var t=m.exec(e);t&&(e=e.slice(0,t.index));var r=e.indexOf(";"),n=r>-1?e.substr(0,r):e,o=h.exec(n);if(!o)return null;var i={key:o[1]?(0,p["default"])(o[2]):"",value:(0,p["default"])(o[3])};if(r===-1)return i;var s=(0,p["default"])(e.slice(r).replace(/^\s*;\s*/,""));if(0===s.length)return i;for(var a=s.split(/\s*;\s*/);a.length;){var l=a.shift(),c=l.indexOf("="),d=null,f=null,g=null;switch(c===-1?d=l:(d=l.substr(0,c),f=(0,p["default"])(l.substr(c+1))),d=(0,p["default"])(d.toLowerCase())){case"expires":f=f.replace(y,"$1 $2 $3"),g=u(Date.parse(f)),g&&(i.expires=g);break;case"max-age":i.maxAge=f;break;case"path":i.path=f;break;case"secure":i.secure=!0;break;case"httponly":i.httpOnly=!0;break;case"domain":i.domain=(0,p["default"])(f.replace(/^\./,""))}}return i}function i(e){var t=e.value||"";return""!==e.key&&(t=e.key+"="+t),t}function s(e,t){var r=t.hostname,n=t.pathname;if(e.domain||(e.domain=r),!e.path||"/"!==e.path.charAt(0)){var o=n,i=o.slice(0,o.lastIndexOf("/"));e.path=i||"/"}e.expires||(e.expires="Infinity")}function a(e,t){if(!t)return!0;if(e=e.toLowerCase(),t=t.toLowerCase(),e===t)return!0;var r=e.indexOf(t);return r>0&&e.length===t.length+r&&"."===e.charAt(r-1)}function l(e,t){return!t||"/"!==t.charAt(0)||e===t||e.length>t.length&&0===e.indexOf(t)&&("/"===t.charAt(t.length-1)||"/"===e.charAt(t.length))}function u(e){if(arguments.length){if(isNaN(e))return null}else e=f["default"].dateNow();return e=1e3*Math.floor(e/1e3),new f["default"].date(e)}e.__esModule=!0,e.parse=o,e.formatClientString=i,e.setDefaultValues=s,e.domainMatch=a,e.pathMatch=l,e.getUTCDate=u;var c=r("../../utils/string-trim"),p=n(c),d=r("../sandbox/native-methods"),f=n(d),h=/^((?:=)?([^=;]*)\s*=\s*)?([^\n\r\0]*)/,m=/;+$/,y=/((?:\s|,)[0-9]{1,2})(?:\s|-)([A-Za-z]{3})(?:\s|-)([0-9]{4}\s)/},"create-property-desc.js":function(e,t,r){function n(e){return e.configurable=!0,e.enumerable=!0,e}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},"create-unresolvable-promise.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e["default"]=function(){return new a["default"](i["default"])};var o=r("./noop"),i=n(o),s=r("pinkie"),a=n(s);t.exports=e["default"]},"destination-location.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(){if(_)return _;var e=y.getFrameElement(window);return e&&y.isIframeWithoutSrc(e)?b["default"].get().referer:window.location.toString()}function s(e){_=e}function a(e,t,r){return t&&(t=l(t)),h.sameOriginCheck(e,t,r)}function l(e,t){if(e=h.getURLString(e),e&&0===e.indexOf("//")){var r=p().protocol;e=r+h.correctMultipleSlashes(e,r)}else e=h.correctMultipleSlashes(e);return v.resolve(e,t||document)}function u(){var e=i(),t=h.parseProxyUrl(e);return t?t.destUrl:e}function c(e){var t=u();return t=t.replace(/(#.*)$/,""),t+e}function p(){var e=v.getResolverElement(document),t=u(),r=h.parseUrl(t).port;w["default"].anchorHrefSetter.call(e,u());var n=w["default"].anchorHostnameGetter.call(e),o=w["default"].anchorPathnameGetter.call(e);return"/"!==o.charAt(0)&&(o="/"+o),{protocol:w["default"].anchorProtocolGetter.call(e),port:r?w["default"].anchorPortGetter.call(e):"",hostname:n,host:r?w["default"].anchorHostGetter.call(e):n,pathname:o,hash:e.hash,search:w["default"].anchorSearchGetter.call(e)}}function d(){var e=p();return"file:"===e.protocol?u():h.getDomain(e)}e.__esModule=!0,e.getLocation=i,e.forceLocation=s,e.sameOriginCheck=a,e.resolveUrl=l,e.get=u,e.withHash=c,e.getParsed=p,e.getOriginHeader=d;var f=r("../../utils/url"),h=o(f),m=r("./dom"),y=o(m),g=r("./url-resolver"),v=o(g),E=r("../settings"),b=n(E),S=r("../sandbox/native-methods"),w=n(S),_=null},"dom.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(){return'input, select, textarea, button, body, iframe, [contenteditable="true"], [contenteditable=""], [tabIndex]'}function s(e){return e.offsetWidth<=0&&e.offsetHeight<=0}function a(e){var t=A(e);return t&&(pt.test(t)||dt.test(t))}function l(e,t){for(;e;){if(Pe(e,t))return e;e=e.parentNode}return null}function u(e){return Ze.instanceAndPrototypeToStringAreEqual?e&&"object"==typeof e?Ke["default"].objectToString.call(Ke["default"].objectGetPrototypeOf.call(window.Object,e)):"":Ke["default"].objectToString.call(e)}function c(e){for(var t=e||document,r=Ke["default"].documentActiveElementGetter.call(t),n=C(r)?r:t.body;n&&n.shadowRoot;){var o=n.shadowRoot.activeElement;if(!o)break;n=o}return n}function p(e,t){var r=E(e);return r.indexOf(t)}function d(e){var t=e[We["default"].processedContext];return h(t)}function f(e){var t=null;try{t=Ke["default"].contentDocumentGetter.call(e).location.href}catch(r){t=null}var n=Ke["default"].getAttribute.call(e,"src"+Fe["default"].storedAttrPostfix)||Ke["default"].getAttribute.call(e,"src")||Ke["default"].iframeSrcGetter.call(e),o=t&&$e.isSupportedProtocol(t)&&$e.parseProxyUrl(t),i=n&&$e.isSupportedProtocol(n)&&$e.parseProxyUrl(n);return{documentLocation:o?o.destUrl:t,srcLocation:i?i.destUrl:n}}function h(e){try{return e.frameElement}catch(t){return null}}function m(e){var t=Oe(e,"map"),r=Ke["default"].getAttribute.call(t,"name"),n='[usemap="#'+r+'"]';return Ke["default"].querySelector.call(w(e),n)}function y(e){var t=e.parent,r=null;if(e===e.top)return e;if(t===e.top||T(e,t))return t;try{r=t.frameElement}catch(n){r=null}return null!==r&&N(r)?y(t):t}function g(){if(!et){var e=Ke["default"].createElement.call(document,"div");e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",Ke["default"].appendChild.call(document.body,e);var t=e.offsetWidth-e.clientWidth;et=t,e.parentNode.removeChild(e)}return et}function v(e){return Oe(e.parentNode,"select")}function E(e){for(var t=Ke["default"].elementQuerySelectorAll.call(e,"optgroup, option"),r=[],n=Ke["default"].nodeListLengthGetter.call(t),o=0;o<n;o++){var i=t[o],s=!Qe.isFirefox||("optgroup"!==A(i)||i.label);s&&r.push(i)}return r}function b(e){var t=e,r=e.parent;if(t===e.top)return t;for(;r;){if(!T(e,r)){var n=h(r);n&&N(n)||(t=r)}r=r!==e.top?r.parent:null}return t}function S(e,t,r){var n=(0,Je.getNativeQuerySelectorAll)(e).call(e,t);if(r)for(var o=Ke["default"].nodeListLengthGetter.call(n),i=0;i<o;i++)r(n[i]);return n}function w(e){return e.documentElement?e:e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument:e.parentNode?w(e.parentNode):document}function _(e){var t=!1,r=null;return r=he(e)?e.parentElement||e.parentNode:e,!!r&&(t=r.isContentEditable&&!a(r),Q(r)&&(t||"on"===w(e).designMode))}function x(e,t){var r=f(e);if(!t&&null===r.documentLocation)return!0;var n=t?r.srcLocation:r.documentLocation;return!(!n||!$e.isSupportedProtocol(n))&&!(0,ze.sameOriginCheck)(location.toString(),n)}function T(e,t){try{if(e===t)return!1;var r=e.location.toString(),n=t.location.toString();return!(!$e.isSupportedProtocol(r)||!$e.isSupportedProtocol(n))&&!(0,ze.sameOriginCheck)(r,n)}catch(o){return!0}}function C(e){return e instanceof Ke["default"].elementClass||e&&st.test(u(e))&&fe(e)&&e.tagName}function A(e){return e&&"string"==typeof e.tagName?e.tagName.toLowerCase():""}function P(e,t){var r=t||document;return r.documentElement.contains(e)}function O(e,t){var r=t||w(e);return window.document!==r}function I(e){return e===Fe["default"].focusPseudoClass||e===Fe["default"].hoverPseudoClass||e.indexOf(Fe["default"].storedAttrPostfix)!==-1}function M(e){return"[object HTMLIFrameElement]"===u(e)}function N(e){var t=f(e),r=t.srcLocation,n=t.documentLocation;if(null===n)return!1;if(Ke["default"].contentWindowGetter.call(e)[We["default"].documentWasCleaned])return!0;var o=$e.isSupportedProtocol(n);return!o&&!Ke["default"].getAttribute.call(e,"src")||(!r||!$e.isSupportedProtocol(r))&&!o}function D(e){return"[object HTMLImageElement]"===u(e)}function L(e){return"[object HTMLInputElement]"===u(e)}function j(e){return"[object HTMLButtonElement]"===u(e)}function k(e){return"[object HTMLHtmlElement]"===u(e)}function R(e){return"[object HTMLBodyElement]"===u(e)}function U(e){return"[object HTMLHeadElement]"===u(e)}function H(e){var t=u(e);return"[object HTMLHeadElement]"===t||"[object HTMLBodyElement]"===t}function F(e){return"[object HTMLBaseElement]"===u(e)}function B(e){return"[object HTMLScriptElement]"===u(e)}function W(e){return"[object HTMLStyleElement]"===u(e)}function G(e){return"[object HTMLLabelElement]"===u(e)}function V(e){return"[object HTMLTextAreaElement]"===u(e)}function q(e){return"[object HTMLOptionElement]"===u(e)}function K(e){return"[object HTMLSelectElement]"===u(e)}function X(e){return"[object HTMLFormElement]"===u(e)}function $(e){return L(e)&&"file"===e.type.toLowerCase()}function Y(e){return R(e)&&Ke["default"].htmlCollectionLengthGetter.call(e.children)}function z(e){return tt.indexOf(u(e))!==-1}function Q(e){return!(me(e)||ye(e)||ft.test(e.nodeName))}function J(e){var t=Ke["default"].getAttribute.call(e,"tabIndex");return t=parseInt(t,10),isNaN(t)?null:t}function Z(e){if(!e)return!1;var t=J(e),r=Pe(e,":disabled"),n="hidden"===(0,Ye.get)(e,"visibility"),o="none"===(0,Ye.get)(e,"display"),a=Qe.isWebKit?s(e)&&!q(e):s(e);return!(r||n||o||a)&&((!q(e)||!Qe.isIE)&&(Ee(e)?null!==t||Pe(e,"a[href]"):!(!Se(e)||!Qe.isIE)||(Pe(e,i())||null!==t)))}function ee(e){return!!e[We["default"].shadowUIElement]}function te(e){if(e instanceof Ke["default"].windowClass)return!0;try{return(Qe.isIE||Qe.isMSEdge)&&e&&e===e.window&&(e=e.window),e&&e.toString&&rt===u(e)}catch(t){try{return!!e.top}catch(r){return!1}}}function re(e){if(e instanceof Ke["default"].documentClass)return!0;try{return e&&nt.test(u(e))}catch(t){return!1}}function ne(e){return e&&"[object Blob]"===u(e)}function oe(e){if(e instanceof Ke["default"].locationClass)return!0;try{return e&&"object"==typeof e&&void 0!==e.href&&void 0!==e.assign}catch(t){return e.replace&&e.assign}}function ie(e){return e instanceof Ke["default"].svgElementClass||e&&it.test(u(e))}function se(e){return!!Oe(e,"svg")}function ae(e){return!!(Ke["default"].Headers&&e instanceof Ke["default"].Headers)||e&&"[object Headers]"===u(e)}function le(e){return!!(Ke["default"].Request&&e instanceof Ke["default"].Request)||e&&"[object Request]"===u(e)}function ue(e){return e.readOnly||"readonly"===e.getAttribute("readonly")}function ce(e){var t=e.getAttribute("type");return L(e)&&t?ht.test(t):ht.test(e.type)}function pe(e){return ce(e)||V(e)}function de(e){return pe(e)&&!ue(e)}function fe(e){return e&&e.nodeType===ct}function he(e){return"[object Text]"===u(e)}function me(e){return ot.test(u(e))}function ye(e){return"[object Comment]"===u(e)}function ge(e){return"[object DocumentFragment]"===u(e)}function ve(e){return"[object ShadowRoot]"===u(e)}function Ee(e){return"[object HTMLAnchorElement]"===u(e)}function be(e){return"[object HTMLTableElement]"===u(e)}function Se(e){return u(e)===ut}function we(e){return"[object WebSocket]"===u(e)}function _e(e){return"[object MessageEvent]"===u(e)}function xe(e){return"[object PerformanceNavigationTiming]"===u(e)}function Te(e){return e instanceof Ke["default"].ArrayBuffer||e&&at.test(u(e))}function Ce(e){return e&&Ke["default"].arrayBufferIsView(e)}function Ae(e){return e instanceof Ke["default"].DataView||e&&lt.test(u(e))}function Pe(e,t){return!!fe(e)&&Ke["default"].matches.call(e,t)}function Oe(e,t){return fe(e)?Ke["default"].closest?Ke["default"].closest.call(e,t):l(e,t):null}function Ie(e,t){if(e)for(var r=t.split(/\s+/),n=0;n<r.length;n++){var o=r[n];Ke["default"].tokenListAdd.call(e.classList,o)}}function Me(e,t){if(e)for(var r=t.split(/\s+/),n=0;n<r.length;n++){var o=r[n];Ke["default"].tokenListRemove.call(e.classList,o)}}function Ne(e,t){return!!e&&Ke["default"].tokenListContains.call(e.classList,t)}function De(){var e=Ke["default"].querySelector.call(document,"."+Ve["default"].charset);return e&&e.getAttribute("charset")}function Le(e,t){for(var r=e.parentNode||e.host,n=[];r;)(!t&&fe(r)||t&&Pe(r,t))&&n.push(r),r=r.parentNode||r.host;return n}function je(e){for(var t=[],r=Ke["default"].nodeListLengthGetter.call(e),n=0;n<r;n++)t.push(e[n]);return t}function ke(e){return $(e)?[e]:je((0,Je.getNativeQuerySelectorAll)(e).call(e,"input[type=file]"))}function Re(e){return M(e)?[e]:je((0,Je.getNativeQuerySelectorAll)(e).call(e,"iframe,frame"))}function Ue(e){return B(e)?[e]:je((0,Je.getNativeQuerySelectorAll)(e).call(e,"script"))}e.__esModule=!0,e.instanceToString=u,e.getActiveElement=c,e.getChildVisibleIndex=p,e.getIframeByElement=d,e.getIframeLocation=f,e.getFrameElement=h,e.getMapContainer=m,e.getParentWindowWithSrc=y,e.getScrollbarSize=g,e.getSelectParent=v,e.getSelectVisibleChildren=E,e.getTopSameDomainWindow=b,e.find=S,e.findDocument=w,e.isContentEditableElement=_,e.isCrossDomainIframe=x,e.isCrossDomainWindows=T,e.isDomElement=C,e.getTagName=A,e.isElementInDocument=P,e.isElementInIframe=O,e.isHammerheadAttr=I,e.isIframeElement=M,e.isIframeWithoutSrc=N,e.isImgElement=D,e.isInputElement=L,e.isButtonElement=j,e.isHtmlElement=k,e.isBodyElement=R,e.isHeadElement=U,e.isHeadOrBodyElement=H,e.isBaseElement=F,e.isScriptElement=B,e.isStyleElement=W,e.isLabelElement=G,e.isTextAreaElement=V,e.isOptionElement=q,e.isSelectElement=K,e.isFormElement=X,e.isFileInput=$,e.isBodyElementWithChildren=Y,e.isMapElement=z,e.isRenderedNode=Q,e.getTabIndex=J,e.isElementFocusable=Z,e.isShadowUIElement=ee,e.isWindow=te,e.isDocument=re,e.isBlob=ne,e.isLocation=oe,e.isSVGElement=ie,e.isSVGElementOrChild=se,e.isFetchHeaders=ae,e.isFetchRequest=le,e.isElementReadOnly=ue,e.isTextEditableInput=ce,e.isTextEditableElement=pe,e.isTextEditableElementAndEditingAllowed=de,e.isElementNode=fe,e.isTextNode=he,e.isProcessingInstructionNode=me,e.isCommentNode=ye,e.isDocumentFragmentNode=ge,e.isShadowRoot=ve,e.isAnchorElement=Ee,e.isTableElement=be,e.isTableDataCellElement=Se,e.isWebSocket=we,e.isMessageEvent=_e,e.isPerformanceNavigationTiming=xe,e.isArrayBuffer=Te,e.isArrayBufferView=Ce,e.isDataView=Ae,e.matches=Pe,e.closest=Oe,e.addClass=Ie,e.removeClass=Me,e.hasClass=Ne,e.parseDocumentCharset=De,e.getParents=Le,e.nodeListToArray=je,e.getFileInputs=ke,e.getIframes=Re,e.getScripts=Ue;var He=r("../../processing/dom/internal-attributes"),Fe=o(He),Be=r("../../processing/dom/internal-properties"),We=o(Be),Ge=r("../../shadow-ui/class-name"),Ve=o(Ge),qe=r("../sandbox/native-methods"),Ke=o(qe),Xe=r("./url"),$e=n(Xe),Ye=r("./style"),ze=r("./destination-location"),Qe=r("./browser"),Je=r("./query-selector"),Ze=r("../utils/feature-detection"),et=null,tt=["[object HTMLMapElement]","[object HTMLAreaElement]"],rt=u(window),nt=/^\[object .*?Document]$/i,ot=/^\[object .*?ProcessingInstruction]$/i,it=/^\[object SVG\w+?Element]$/i,st=/^\[object HTML.*?Element]$/i,at=/^\[object ArrayBuffer]$/i,lt=/^\[object DataView]$/i,ut=u(Ke["default"].createElement.call(document,"td")),ct=Node.ELEMENT_NODE,pt=/^(select|option|applet|area|audio|canvas|datalist|keygen|map|meter|object|progress|source|track|video|img)$/,dt=/^(input|textarea|button)$/,ft=/^(script|style)$/i,ht=/^(email|number|password|search|tel|text|url)$/},"event-emitter.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../sandbox/native-methods"),s=n(i),a=function(){function e(){o(this,e),this.eventsListeners=s["default"].objectCreate(null)}return e.prototype.emit=function(e){var t=this.eventsListeners[e];if(t)for(var r=0;r<t.length;r++)try{t[r].apply(this,s["default"].arraySlice.apply(arguments,[1]))}catch(n){if(!(n.message&&n.message.indexOf("freed script")>-1))throw n;t[r]=null}},e.prototype.off=function(e,t){var r=this.eventsListeners[e];r&&(this.eventsListeners[e]=s["default"].arrayFilter.call(r,function(e){return e!==t}))},e.prototype.on=function(e,t){return this.eventsListeners[e]=this.eventsListeners[e]||[],this.eventsListeners[e].indexOf(t)===-1&&this.eventsListeners[e].push(t),t},e}();e["default"]=a,t.exports=e["default"]},"event.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t||i(e)}function i(e){e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}function s(e){return"object"==typeof e&&e&&"function"==typeof e.handleEvent}function a(e){return"function"==typeof e||s(e)}function l(e,t,r){return s(t)?t.handleEvent.call(t,r):t.call(e,r)}e.__esModule=!0,e.hasPointerEvents=e.DOM_EVENTS=e.KEYBOARD_MODIFIERS_PARAMETER=e.WHICH_PARAMETER=e.BUTTONS_PARAMETER=e.BUTTON=void 0,e.preventDefault=o,e.stopPropagation=i,e.isObjectEventListener=s,e.isValidEventListener=a,e.callEventListener=l;var u=r("../sandbox/native-methods"),c=n(u);e.BUTTON={left:0,middle:1,right:2},e.BUTTONS_PARAMETER={noButton:0,leftButton:1,rightButton:2},e.WHICH_PARAMETER={noButton:0,leftButton:1,middleButton:2,rightButton:3},e.KEYBOARD_MODIFIERS_PARAMETER={altKey:"Alt",ctrlKey:"Control",shiftKey:"Shift",metaKey:"Meta"},e.DOM_EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","keydown","keypress","textInput","textinput","input","keyup","change","focus","blur","MSPointerDown","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerUp","pointerdown","pointermove","pointerover","pointerout","pointerup","focusin","focusout","mouseenter","mouseleave","pointerenter","pointerleave"],e.hasPointerEvents=!(!c["default"].WindowPointerEvent&&!c["default"].WindowMSPointerEvent)},"extend.js":function(e,t,r){function n(){var e=arguments[0]||{},t=null,r=null;"object"!=typeof e&&"[object Function]"!==e.toString()&&(e={});for(var n=1;n<arguments.length;n++)if(t=arguments[n],null!==t)for(var o in t)r=t[o],e!==r&&void 0!==r&&(e[o]=r);return e}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},"fast-apply.js":function(e,t,r){function n(e,t,r){var n=e[t];switch(r.length){case 1:return n.call(e,r[0]);case 2:return n.call(e,r[0],r[1]);case 3:return n.call(e,r[0],r[1],r[2]);case 4:return n.call(e,r[0],r[1],r[2],r[3]);case 5:return n.call(e,r[0],r[1],r[2],r[3],r[4]);default:return n.apply(e,r)}}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},"feature-detection.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e.getElementsByNameReturnsHTMLCollection=e.attrGetNamedItemIsNotEnumerable=e.hasDataTransfer=e.isTouchDevice=e.hasTouchPoints=e.hasTouchEvents=e.instanceAndPrototypeToStringAreEqual=e.emptyActionAttrFallbacksToTheLocation=void 0;var i=r("../sandbox/native-methods"),s=o(i),a=r("./browser"),l=n(a),u=s["default"].createElement.call(document,"form"),c=s["default"].getElementsByName.call(document,""),p=(e.emptyActionAttrFallbacksToTheLocation=s["default"].formActionGetter.call(u)===window.location.toString(),e.instanceAndPrototypeToStringAreEqual=s["default"].objectToString.call(window)===s["default"].objectToString.call(Window.prototype),e.hasTouchEvents="ontouchstart"in window);e.hasTouchPoints=l.isIE&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),e.isTouchDevice=(l.isMobile||l.isTablet)&&p,e.hasDataTransfer=!!window.DataTransfer,e.attrGetNamedItemIsNotEnumerable=s["default"].objectGetOwnPropertyDescriptor.call(window.Object,NamedNodeMap.prototype,"getNamedItem"),e.getElementsByNameReturnsHTMLCollection=s["default"].objectGetPrototypeOf.call(window.Object,c)===s["default"].HTMLCollection.prototype},"fn-bind.js":function(e,t,r){function n(e,t){return function(){return e.apply(t,arguments)}}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},"get-mime-type.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(t.length<e.pattern.length)return!1;for(var r=0,n=0,o=null;r<e.pattern.length;){if(o=t[n]&e.mask[r],o!==e.pattern[r])return!1;n++,r++}return!0}function i(e,t){(0,s.isArrayBuffer)(t[0])?t=t[0]:(0,s.isArrayBufferView)(t[0])&&(t=(0,s.isDataView)(t[0])?t[0].buffer:t[0]);for(var r=new l["default"].Uint8Array(t),n=0;n<e.length;n++){var i=e[n];if(o(i,r))return i.mime}return r=null,""}e.__esModule=!0,e["default"]=function(e){return i(u,e)||i(c,e)||i(p,e)||i(d,e)};var s=r("./dom"),a=r("../sandbox/native-methods"),l=n(a),u=[{mime:"image/x-icon",pattern:[0,0,1,0],mask:[255,255,255,255]},{mime:"image/x-icon",pattern:[0,0,2,0],mask:[255,255,255,255]},{mime:"image/bmp",pattern:[66,77],mask:[255,255]},{mime:"image/gif",pattern:[71,73,70,56,55,97],mask:[255,255,255,255,255,255]},{mime:"image/gif",pattern:[71,73,70,56,57,97],mask:[255,255,255,255,255,255]},{mime:"image/webp",pattern:[82,73,70,70,0,0,0,0,87,69,66,80,86,80],mask:[255,255,255,255,0,0,0,0,255,255,255,255,255,255]},{mime:"image/png",pattern:[137,80,78,71,13,10,26,10],mask:[255,255,255,255,255,255,255,255]},{mime:"image/jpeg",pattern:[255,216,255],mask:[255,255,255]}],c=[{mime:"audio/basic",pattern:[46,115,110,100],mask:[255,255,255,255]},{mime:"audio/aiff",pattern:[70,79,82,77,0,0,0,0,65,73,70,70],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mime:"audio/mpeg",pattern:[73,68,51],mask:[255,255,255]},{mime:"application/ogg",pattern:[79,103,103,83,0],mask:[255,255,255,255,255]},{mime:"audio/midi",pattern:[77,84,104,100,0,0,0,6],mask:[255,255,255,255,255,255,255,255]},{mime:"video/avi",pattern:[82,73,70,70,0,0,0,0,65,86,73,32],mask:[255,255,255,255,0,0,0,0,255,255,255,255]},{mime:"audio/wave",pattern:[82,73,70,70,0,0,0,0,87,65,86,69],mask:[255,255,255,255,0,0,0,0,255,255,255,255]}],p=[{mime:"application/vnd.ms-fontobject",pattern:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,76,80],mask:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255]},{mime:"application/octet-stream",pattern:[0,1,0,0],mask:[255,255,255,255]},{mime:"application/octet-stream",pattern:[79,84,84,79],mask:[255,255,255,255]},{mime:"application/octet-stream",pattern:[116,116,99,102],mask:[255,255,255,255]},{mime:"application/font-woff",pattern:[119,79,70,70],mask:[255,255,255,255]}],d=[{mime:"application/x-gzip",pattern:[31,139,8],mask:[255,255,255]},{mime:"application/zip",pattern:[80,75,3,4],mask:[255,255,255,255]},{mime:"application/x-rar-compressed",pattern:[82,97,114,32,26,7,0],mask:[255,255,255,255,255,255,255]}];t.exports=e["default"]},"html.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(){try{pe.location&&pe.location.toString()}catch(e){pe=T["default"].createHTMLDocument.call(document.implementation,"title"),de=T["default"].createDocumentFragment.call(pe),de[ue]=!0}return pe}function s(e){return e.replace(ee,te).replace(Q,J).replace(Y,z)}function a(e){return e.replace(re,"<!doctype$1>").replace(Z,"<$2$1$4$3").replace($,"$1")}function l(e){return/^\s*(<\s*(!doctype|html|head|body)[^>]*>)/i.test(e)}function u(e,t){var r=T["default"].createElement.call(i(),"div");e=s(e),T["default"].appendChild.call(de,r),T["default"].elementInnerHTMLSetter.call(r,e);var n=t(r)?T["default"].elementInnerHTMLGetter.call(r):e;return T["default"].removeChild.call(r.parentNode,r),n=a(n),j.isIE&&!j.isMSEdge&&e!==n&&(n=E(e,n)),n}function c(e){var t=O["default"].getUrlAttr(e);if(t&&T["default"].hasAttribute.call(e,t)){var r=A["default"].getStoredAttrName(t);T["default"].hasAttribute.call(e,r)&&(T["default"].setAttribute.call(e,t,T["default"].getAttribute.call(e,r)),T["default"].removeAttribute.call(e,r))}}function p(e){if(T["default"].hasAttribute.call(e,"autocomplete")){var t=A["default"].getStoredAttrName("autocomplete");if(T["default"].hasAttribute.call(e,t)){var r=T["default"].getAttribute.call(e,t);A["default"].isAddedAutocompleteAttr("autocomplete",r)?T["default"].removeAttribute.call(e,"autocomplete"):T["default"].setAttribute.call(e,"autocomplete",r),T["default"].removeAttribute.call(e,t)}}}function d(e){var t=O["default"].getTargetAttr(e);if(t&&T["default"].hasAttribute.call(e,t)){var r=A["default"].getStoredAttrName(t);T["default"].hasAttribute.call(e,r)&&(T["default"].setAttribute.call(e,t,T["default"].getAttribute.call(e,r)),T["default"].removeAttribute.call(e,r))}}function f(e){if("iframe"===O["default"].adapter.getTagName(e)&&T["default"].hasAttribute.call(e,"sandbox")){var t=A["default"].getStoredAttrName("sandbox");T["default"].hasAttribute.call(e,t)&&(T["default"].setAttribute.call(e,"sandbox",T["default"].getAttribute.call(e,t)),T["default"].removeAttribute.call(e,t))}}function h(e){if(T["default"].hasAttribute.call(e,"style")){var t=A["default"].getStoredAttrName("style");T["default"].hasAttribute.call(e,t)&&(T["default"].setAttribute.call(e,"style",T["default"].getAttribute.call(e,t)),T["default"].removeAttribute.call(e,t))}}function m(e){return u(e,function(e){var t=!1;return(0,D.find)(e,ie,function(e){c(e),p(e),d(e),f(e),h(e),t=!0}),(0,D.find)(e,se,function(e){e.parentNode&&(T["default"].removeChild.call(e.parentNode,e),t=!0)}),(0,D.find)(e,"script",function(e){var r=T["default"].nodeTextContentGetter.call(e),n=(0,I.remove)(r);r!==n&&(T["default"].nodeTextContentSetter.call(e,n),t=!0)}),(0,D.find)(e,"style",function(e){var r=T["default"].nodeTextContentGetter.call(e),n=N["default"].cleanUp(r,L.parseProxyUrl);r!==n&&(T["default"].nodeTextContentSetter.call(e,n),t=!0)}),(0,D.find)(e,ae,function(e){T["default"].removeAttribute.call(e,S["default"].hoverPseudoClass),T["default"].removeAttribute.call(e,S["default"].focusPseudoClass),t=!0}),(0,D.find)(e,le,function(e){var r=T["default"].elementInnerHTMLGetter.call(e);r.indexOf(ce)!==-1&&(T["default"].elementInnerHTMLSetter.call(e,r.replace(ce,"")),t=!0)}),t})}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.parentTag,n=t.prepareDom,o=t.processedContext;return u(e,function(e){var t=null,i=[],s=[],l=0,u=R.getBaseUrl(document);n&&n(e),T["default"].htmlCollectionLengthGetter.call(e.children)&&(s=T["default"].elementQuerySelectorAll.call(e,"*"),l=T["default"].nodeListLengthGetter.call(s));var c=T["default"].elementQuerySelector.call(e,"base");c&&R.updateBase(T["default"].getAttribute.call(c,"href"),document);for(var p=0;p<l;p++){var d=s[p];if((0,D.isScriptElement)(d)){var f=T["default"].nodeTextContentGetter.call(d);T["default"].nodeTextContentSetter.call(d,a(f))}d[H["default"].processedContext]=o,O["default"].processElement(d,L.convertToProxyUrl);var h=(0,D.getTagName)(d);h===q||h===K?i.push(d):h===V&&(t=d)}if(!r)if(i.length)for(var m=0;m<i.length;m++){var y=i[m];T["default"].insertAdjacentHTML.call(y,"afterbegin",ce)}else t&&j.isIE&&T["default"].insertAdjacentHTML.call(t,"afterend",ce);return R.updateBase(u,document),!0})}function g(){de=null,pe=null}function v(e){for(;e.parentNode;)e=e.parentNode;return!!e[ue]}function E(e,t){var r=e.match(ne),n=0;return r?t.replace(ne,function(e){var t=r[n],o=t?t.match(oe):null;return t&&n++,t?e.replace(oe,function(){var e=o?o.join(""):"";return o&&(o=null),e}):e}):t}e.__esModule=!0,e.INIT_SCRIPT_FOR_IFRAME_TEMPLATE=void 0,e.isPageHtml=l,e.cleanUpHtml=m,e.processHtml=y,e.dispose=g,e.isInternalHtmlParserElement=v;var b=r("../../processing/dom/internal-attributes"),S=o(b),w=r("../../shadow-ui/class-name"),_=o(w),x=r("../sandbox/native-methods"),T=o(x),C=r("../../processing/dom"),A=o(C),P=r("../dom-processor"),O=o(P),I=r("../../processing/script/header"),M=r("../../processing/style"),N=o(M),D=r("./dom"),L=r("./url"),j=r("./browser"),k=r("./url-resolver"),R=n(k),U=r("../../processing/dom/internal-properties"),H=o(U),F=r("../../processing/dom/attributes"),B=r("../../utils/create-self-removing-script"),W=o(B),G="hh_fake_tag_name_",V="hh_fake_doctype",q=G+"head",K=G+"body",X="hh_fake_attr",$=new RegExp("(<\\/?)"+G,"ig"),Y=/(<\/?)(html|head|body|table|tbody|tfoot|thead|tr|td|th|caption|colgroup)((?:\s[^>]*)?>)/gi,z="$1"+G+"$2$3",Q=/<(\/?(?:col|noscript))(\s[^>]*?)?(\s?\/)?>/gi,J="<br "+X+'="$1|$3"$2>',Z=new RegExp("<br([^>]*?) "+X+'="([^|]+)\\|([^"]*)"([^>]*)',"ig"),ee=/<!doctype([^>]*)>/gi,te="<"+V+">$1</"+V+">",re=new RegExp("<"+V+">([\\S\\s]*?)</"+V+">","ig"),ne=/<svg\s?[^>]*>/gi,oe=/\s(?:NS[0-9]+:[^"']+('|")[\S\s]*?\1|[^:]+:NS[0-9]+=(?:""|''))/g,ie=function(){
for(var e=[],t=0;t<F.URL_ATTRS.length;t++){var r=F.URL_ATTRS[t];e.push(A["default"].getStoredAttrName(r))}for(var n=0;n<F.ATTRS_WITH_SPECIAL_PROXYING_LOGIC.length;n++){var o=F.ATTRS_WITH_SPECIAL_PROXYING_LOGIC[n];e.push(A["default"].getStoredAttrName(o))}return"["+e.join("],[")+"]"}(),se='[class*="'+_["default"].postfix+'"]',ae="["+S["default"].hoverPseudoClass+"],["+S["default"].focusPseudoClass+"]",le=q+", "+K,ue="hammerhead|html-parser-element-flag",ce=e.INIT_SCRIPT_FOR_IFRAME_TEMPLATE=(0,W["default"])('\n    var parentHammerhead = null;\n    \n    if (!window["'+H["default"].hammerhead+'"])\n        Object.defineProperty(window, "'+H["default"].documentWasCleaned+'", { value: true, configurable: true });\n\n    try {\n        parentHammerhead = window.parent["'+H["default"].hammerhead+'"];\n    } catch(e) {}\n\n    if (parentHammerhead)\n        parentHammerhead.sandbox.onIframeDocumentRecreated(window.frameElement);\n'),pe=T["default"].createHTMLDocument.call(document.implementation,"title"),de=T["default"].createDocumentFragment.call(pe);de[ue]=!0},"integer-id-generator.js":function(e,t,r){function n(){var e=i;return{increment:function(){return e=e===o?i:e+1},get value(){return e}}}e.__esModule=!0,e["default"]=n;var o=Number.MAX_SAFE_INTEGER||9007199254740991,i=Number.MIN_SAFE_INTEGER||-9007199254740991;t.exports=e["default"]},"is-jquery-object.js":function(e,t,r){function n(e){return e&&!!e.jquery}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},"next-tick.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e["default"]=function(){return new i["default"](function(e){return a["default"].setTimeout.call(window,e,0)})};var o=r("pinkie"),i=n(o),s=r("../sandbox/native-methods"),a=n(s);t.exports=e["default"]},"noop.js":function(e,t,r){e.__esModule=!0,e["default"]=function(){},t.exports=e["default"]},"position.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var r=y["default"].getAttribute.call(e,"shape"),n=y["default"].getAttribute.call(e,"coords"),o=0;if("default"===r)return u(t);if(!r||!n)return null;if(n=n.split(","),!n.length)return null;for(o=0;o<n.length;o++)if(n[o]=parseInt(n[o],10),"number"!=typeof n[o])return null;var i=null;switch(r){case"rect":4===n.length&&(i={height:n[3]-n[1],left:n[0],top:n[1],width:n[2]-n[0]});break;case"circle":3===n.length&&(i={height:2*n[2],left:n[0]-n[2],top:n[1]-n[2],width:2*n[2]});break;case"poly":if(n.length>=6&&n.length%2===0){for(i={},i.left=i.right=n[0],i.top=i.bottom=n[1],o=2;o<n.length;o+=2)i.left=n[o]<i.left?n[o]:i.left,i.right=n[o]>i.right?n[o]:i.right;for(o=3;o<n.length;o+=2)i.top=n[o]<i.top?n[o]:i.top,i.bottom=n[o]>i.bottom?n[o]:i.bottom;i.height=i.bottom-i.top,i.width=i.right-i.left}}if(i){var s=f(t);i.left+=s.left,i.top+=s.top}return i}function s(e){var t=v.getMapContainer(e);if(t){if(/^map$/i.test(e.tagName))return u(t);if(/^area$/i.test(e.tagName)){var r=i(e,t);if(r)return r}}return{height:0,left:0,top:0,width:0}}function a(e){var t=v.getSelectParent(e);if(t){var r=u(t),n=b.getBordersWidth(t),o=b.getInnerWidth(t)===t.clientWidth?0:v.getScrollbarSize(),i=b.getOptionHeight(t),s=v.getChildVisibleIndex(t,e),a=Math.max(s-b.getScrollTop(t)/i,0);return{height:i,left:r.left+n.left,top:r.top+n.top+b.getElementPadding(t).top+a*i,width:r.width-(n.left+n.right)-o}}return u(e)}function l(e){var t=v.matches(e,"tspan")||v.matches(e,"tref")||"textpath"===v.getTagName(e),r=e.getBoundingClientRect(),n={height:t?e.offsetHeight:r.height,left:r.left+(document.body.scrollLeft||document.documentElement.scrollLeft),top:r.top+(document.body.scrollTop||document.documentElement.scrollTop),width:t?e.offsetWidth:r.width};if(t){var o=b.getOffsetParent(e),i=b.getOffset(e),s=b.getOffset(o),a=v.matches(o,"body");return{height:n.height||r.height,left:a?e.offsetLeft||i.left:s.left+e.offsetLeft,top:a?e.offsetTop||i.top:s.top+e.offsetTop,width:n.width||r.width}}if(S.isFirefox||S.isIE)return n;var l=y["default"].getAttribute.call(e,"stroke-width")||b.get(e,"stroke-width");return l=l?+l.replace(/px|em|ex|pt|pc|cm|mm|in/,""):1,l&&+l%2!==0&&(l=+l+1),!(v.matches(e,"line")||v.matches(e,"polyline")||v.matches(e,"polygon")||v.matches(e,"path"))||n.width&&n.height?(v.matches(e,"polygon")&&(n.height+=2*l,n.left-=l,n.top-=l,n.width+=2*l),n.height+=l,n.left-=l/2,n.top-=l/2,n.width+=l):!n.width&&n.height?(n.left-=l/2,n.width=l):n.width&&!n.height&&(n.height=l,n.top-=l/2),n}function u(e){var t={};if(v.isMapElement(e))t=s(e);else if(b.isVisibleChild(e))t=a(e);else{var r=f(e),n=v.isSVGElementOrChild(e)?l(e):e.getBoundingClientRect();t={height:n.height,left:r.left,top:r.top,width:n.width}}return t.height=Math.round(t.height),t.left=Math.round(t.left),t.top=Math.round(t.top),t.width=Math.round(t.width),t}function c(e,t,r){if("iframe"!==v.getTagName(e))return!1;var n=u(e),o=b.getBordersWidth(e),i=b.getElementPadding(e),s=n.left+o.left+i.left,a=n.top+o.top+i.top,l=n.left+n.width-o.right-i.right,c=n.top+n.height-o.bottom-i.bottom;return t>=s&&t<=l&&r>=a&&r<=c}function p(e,t,r){var n=v.isSVGElementOrChild(e),o=n?l(e):null;return{left:n?o.left+t.left:r.left+t.left,top:n?o.top+t.top:r.top+t.top}}function d(e,t,r,n,o){var i=b.getBordersWidth(o);t.left+=i.left,t.top+=i.top;var s=f(o),a=b.getElementPadding(o),u=null;if(v.isSVGElementOrChild(e)){var c=l(e);u={x:c.left-(document.body.scrollLeft||document.documentElement.scrollLeft)+t.left,y:c.top-(document.body.scrollTop||document.documentElement.scrollTop)+t.top}}else u=h({x:r.left+t.left,y:r.top+t.top},n);return{left:s.left+u.x+a.left,top:s.top+u.y+a.top}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round;if(v.isMapElement(e)){var r=s(e);return{left:r.left,top:r.top}}var n=v.findDocument(e),o=v.isElementInIframe(e,n),i=o?v.getIframeByElement(n):null,a=n===e?b.getOffset(n.documentElement):b.getOffset(e),l=n.body?b.getBordersWidth(n.body):{left:0,top:0},u=o&&i?d:p,c=u(e,l,a,n,i),f=c.left,h=c.top;return"function"==typeof t&&(f=t(f),h=t(h)),{left:f,top:h}}function h(e,t){var r=t||document,n=b.getScrollLeft(r),o=b.getScrollTop(r),i=b.getScrollLeft(r.body),s=b.getScrollTop(r.body),a=0===n&&0!==i?i:n,l=0===o&&0!==s?s:o;return{x:e.x-a,y:e.y-l}}e.__esModule=!0,e.getElementRectangle=u,e.shouldIgnoreMouseEventInsideIframe=c,e.getOffsetPosition=f,e.offsetToClientCoords=h;var m=r("../sandbox/native-methods"),y=o(m),g=r("./dom"),v=n(g),E=r("./style"),b=n(E),S=r("./browser")},"property-overriding.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){if(r&&e[t]){var n=e[t].toString();r.toString=function(){return n}}e[t]=r}function i(e,t,r){var n=r.getter,i=r.setter,s=r.value,a=l["default"].objectGetOwnPropertyDescriptor(e,t);if((n||i)&&s)throw new Error("Cannot both specify accessors and a value or writable attribute.");return s?(l["default"].objectHasOwnProperty.call(a,"writable")||(a.writable=!!a.set,delete a.get,delete a.set),a.value=s):(l["default"].objectHasOwnProperty.call(a,"writable")&&(delete a.value,delete a.writable),null!==n&&o(a,"get",n),null!==i&&o(a,"set",i)),a}function s(e,t,r){var n=i(e,t,r);l["default"].objectDefineProperty(e,t,n)}e.__esModule=!0,e.createOverriddenDescriptor=i,e.overrideDescriptor=s;var a=r("../sandbox/native-methods"),l=n(a)},"query-selector.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return(0,l.isDomElement)(e)?a["default"].elementQuerySelector:(0,l.isDocumentFragmentNode)(e)||(0,l.isShadowRoot)(e)?a["default"].documentFragmentQuerySelector:a["default"].querySelector}function i(e){return(0,l.isDomElement)(e)?a["default"].elementQuerySelectorAll:(0,l.isDocumentFragmentNode)(e)||(0,l.isShadowRoot)(e)?a["default"].documentFragmentQuerySelectorAll:a["default"].querySelectorAll}e.__esModule=!0,e.getNativeQuerySelector=o,e.getNativeQuerySelectorAll=i;var s=r("../sandbox/native-methods"),a=n(s),l=r("./dom")},"replace-proxied-urls-in-stack.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var r=null,n="";if(c.test(t)){var o=t.match(c);r=t.substring(0,o.index),n=o[0]}else r=t;var i=(0,s.parseProxyUrl)(r),a=i&&i.destUrl;if(!a)return e;var l=a+n;return e.replace(t,l)}function i(e){if(!e)return e;for(var t=e.split("\n"),r=function(e){var r=t[e],n=l["default"].arrayFilter.call(u,function(e){return e.test(r)})[0];t[e]=r.replace(n,o)},n=0;n<t.length;n++)r(n);return t.join("\n")}e.__esModule=!0,e["default"]=i;var s=r("./url"),a=r("../sandbox/native-methods"),l=n(a),u=[/^\s*at .*\((\S+)\)/,/^\s*at (\S+)/,/^.*@(\S+)/,/(.+)/],c=/:\d+:\d+$/;t.exports=e["default"]},"style.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e){e=e||"";var t=parseInt(e.replace("px",""),10);return isNaN(t)?0:t}function s(e,t,r,n){e=e.documentElement||e;var o=u(e,r,n);return o&&o[t]}function a(e,t,r){e=e.documentElement||e,e.style[t]=r}function l(e){return{bottom:i(s(e,"borderBottomWidth")),left:i(s(e,"borderLeftWidth")),right:i(s(e,"borderRightWidth")),top:i(s(e,"borderTopWidth"))}}function u(e,t,r){t=t||document,r=r||window;var n=t.defaultView||r;return n.getComputedStyle(e,null)}function c(e){return{bottom:i(s(e,"marginBottom")),left:i(s(e,"marginLeft")),right:i(s(e,"marginRight")),top:i(s(e,"marginTop"))}}function p(e){return{bottom:i(s(e,"paddingBottom")),left:i(s(e,"paddingLeft")),right:i(s(e,"paddingRight")),top:i(s(e,"paddingTop"))}}function d(e){var t=O.isHtmlElement(e),r=window;if(t&&O.isElementInIframe(e)){var n=O.getIframeByElement(e);n&&(r=j["default"].contentWindowGetter.call(n))}var o=t?r:e;return{left:b(o),top:S(o)}}function f(e){if(!e)return null;if(O.isWindow(e))return e.document.documentElement.clientWidth;if(O.isDocument(e)){var t=e.documentElement,r="clientWidth",n="scrollWidth",o="offsetWidth";return t[r]>=t[n]?t[r]:Math.max(e.body[n],t[n],e.body[o],t[o])}var a=e.offsetWidth;return a-=i(s(e,"paddingLeft")),a-=i(s(e,"paddingRight")),a-=i(s(e,"borderLeftWidth")),a-=i(s(e,"borderRightWidth"))}function h(e){if(!e)return null;if(O.isWindow(e))return e.document.documentElement.clientHeight;if(O.isDocument(e)){var t=e.documentElement,r="clientHeight",n="scrollHeight",o="offsetHeight";return t[r]>=t[n]?t[r]:Math.max(e.body[n],t[n],e.body[o],t[o])}var a=e.offsetHeight;return a-=i(s(e,"paddingTop")),a-=i(s(e,"paddingBottom")),a-=i(s(e,"borderTopWidth")),a-=i(s(e,"borderBottomWidth"))}function m(e){if(!e)return null;if(O.isWindow(e))return e.document.documentElement.clientWidth;if(O.isDocument(e))return e.documentElement.clientWidth;var t=e.offsetWidth;return t-=i(s(e,"borderLeftWidth")),t-=i(s(e,"borderRightWidth"))}function y(e){if(!e)return null;if(O.isWindow(e))return e.document.documentElement.clientHeight;if(O.isDocument(e))return e.documentElement.clientHeight;var t=e.offsetHeight;return t-=i(s(e,"borderTopWidth")),t-=i(s(e,"borderBottomWidth"))}function g(e){var t=v(e),r=p(e),n=e.scrollHeight-(r.top+r.bottom),o=O.getSelectVisibleChildren(e).length;return 1===t?h(e):M.isIE&&t>o?Math.round(n/o):Math.round(n/Math.max(o,t))}function v(e){if(M.isSafari&&D.hasTouchEvents||M.isAndroid)return 1;var t=j["default"].getAttribute.call(e,"size"),r=j["default"].getAttribute.call(e,"multiple"),n=t?parseInt(t,10):1;return r&&(!t||n<1)&&(n=k),n}function E(e){var t=O.getSelectParent(e),r=O.getTagName(e);return O.isSelectElement(t)&&v(t)>1&&("option"===r||"optgroup"===r)&&(!M.isFirefox||e.label)}function b(e){return e?O.isWindow(e)?e.pageXOffset:O.isDocument(e)?e.defaultView.pageXOffset:e.scrollLeft:null}function S(e){return e?O.isWindow(e)?e.pageYOffset:O.isDocument(e)?e.defaultView.pageYOffset:e.scrollTop:null}function w(e,t){if(e)if(O.isWindow(e)||O.isDocument(e)){var r=O.findDocument(e).defaultView,n=S(e);r.scrollTo(t,n)}else e.scrollLeft=t}function _(e,t){if(e)if(O.isWindow(e)||O.isDocument(e)){var r=O.findDocument(e).defaultView,n=b(e);r.scrollTo(n,t)}else e.scrollTop=t}function x(e){if(e){for(var t=e.offsetParent||document.body;t&&!/^(?:body|html)$/i.test(t.nodeName)&&"static"===s(t,"position");)t=t.offsetParent;return t}}function T(e){if(!e||O.isWindow(e)||O.isDocument(e))return null;var t=e.getBoundingClientRect(),r=e.ownerDocument,n=r.documentElement;if(!n.contains(e)||e===n)return{top:t.top,left:t.left};var o=r.defaultView,i=n.clientTop||r.body.clientTop||0,s=n.clientLeft||r.body.clientLeft||0,a=o.pageYOffset||n.scrollTop||r.body.scrollTop,l=o.pageXOffset||n.scrollLeft||r.body.scrollLeft;return t=e.getBoundingClientRect(),{top:t.top+a-i,left:t.left+l-s}}function C(e,t){if(!O.isElementInDocument(e,t))return!1;for(;e;){if("none"===s(e,"display",t)||"hidden"===s(e,"visibility",t))return!1;e=e.parentNode}return!0}function A(e){var t=O.getIframeByElement(e);return t&&!C(t,O.findDocument(t))}e.__esModule=!0,e.get=s,e.set=a,e.getBordersWidth=l,e.getComputedStyle=u,e.getElementMargin=c,e.getElementPadding=p,e.getElementScroll=d,e.getWidth=f,e.getHeight=h,e.getInnerWidth=m,e.getInnerHeight=y,e.getOptionHeight=g,e.getSelectElementSize=v,e.isVisibleChild=E,e.getScrollLeft=b,e.getScrollTop=S,e.setScrollLeft=w,e.setScrollTop=_,e.getOffsetParent=x,e.getOffset=T,e.isElementVisible=C,e.isElementInInvisibleIframe=A;var P=r("./dom"),O=o(P),I=r("./browser"),M=o(I),N=r("./feature-detection"),D=o(N),L=r("../sandbox/native-methods"),j=n(L),k=4},"types.js":function(e,t,r){function n(e){return null===e?"null":"undefined"}function o(e){return null===e||void 0===e}function i(e){var t=typeof e;return"object"!==t&&"function"!==t}e.__esModule=!0,e.inaccessibleTypeToStr=n,e.isNullOrUndefined=o,e.isPrimitiveType=i},"url-resolver.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var i=r("../sandbox/native-methods"),s=o(i),a=r("../utils/destination-location"),l=n(a),u=r("../../utils/url"),c=r("../utils/dom"),p="hammerhead|document-url-resolver";e["default"]={_createResolver:function(e){var t=s["default"].createHTMLDocument.call(e.implementation,"title"),r=s["default"].createElement.call(t,"a"),n=s["default"].createElement.call(t,"base");return s["default"].appendChild.call(t.body,r),s["default"].appendChild.call(t.head,n),t},_getResolver:function(e){return e[p]||s["default"].objectDefineProperty.call(window.Object,e,p,{value:this._createResolver(e),writable:!0}),e[p]},_isNestedIframeWithoutSrc:function(e){if(!e||!e.parent||e.parent===e||e.parent.parent===e.parent)return!1;var t=(0,c.getFrameElement)(window);return!!t&&(0,c.isIframeWithoutSrc)(t)},init:function(e){this.updateBase(l.get(),e)},getResolverElement:function(e){return s["default"].nodeFirstChildGetter.call(this._getResolver(e).body)},resolve:function(e,t){var r=this.getResolverElement(t),n=null;if(null===e)s["default"].removeAttribute.call(r,"href");else{s["default"].anchorHrefSetter.call(r,e),n=s["default"].anchorHrefGetter.call(r);var o=e&&(!n||"/"===n.charAt(0))&&this._isNestedIframeWithoutSrc(t.defaultView);if(o)return this.resolve(e,window.parent.document)}return(0,u.ensureTrailingSlash)(e,n)},updateBase:function(e,t){var r=this._getResolver(t),n=s["default"].elementGetElementsByTagName.call(r.head,"base")[0];e=e||l.get();var o=(0,u.parseUrl)(e),i="file:"!==o.protocol&&!o.host,a=/^\/\//.test(e)&&!!o.host;if(i||a){var c=l.get();this.updateBase(c,t),e=this.resolve(e,t)}s["default"].setAttribute.call(n,"href",e)},getBaseUrl:function(e){var t=s["default"].elementGetElementsByTagName.call(this._getResolver(e).head,"base")[0];return s["default"].getAttribute.call(t,"href")},changeUrlPart:function(e,t,r,n){var o=this.getResolverElement(n);return s["default"].anchorHrefSetter.call(o,e),t.call(o,r),s["default"].anchorHrefGetter.call(o)},dispose:function(e){e[p]=null}},t.exports=e["default"]},"url.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var r=t&&t.resourceType,n=C.parseResourceType(r);if(!n.isWebSocket&&!v(e)&&!E(e))return e;var o=P.resolveUrl(e,t&&t.doc);if(n.isWebSocket&&!y(o)||!C.isValidUrl(o))return e;var s=t&&t.proxyHostname||j.hostname,a=t&&t.proxyPort||j.port,u=t&&t.proxyProtocol||j.protocol,c=n.isWebSocket?u.replace("http","ws"):u,p=t&&t.sessionId||N["default"].get().sessionId,d=t&&t.charset,f=t&&t.reqOrigin,h=l(a),m=C.parseProxyUrl(o),g=!!m&&m.proxy.hostname===s&&(m.proxy.port===a||m.proxy.port===h);if(g){if(r&&m.resourceType===r)return o;var b=C.formatUrl(m.destResourceInfo);return i(b,{proxyProtocol:c,proxyHostname:s,proxyPort:a,sessionId:p,resourceType:r,charset:d,reqOrigin:f})}var S=C.parseUrl(o);if(d=d||n.isScript&&document[x["default"].documentCharset],S.protocol===u&&S.hostname===s&&S.port===a){var w=P.getParsed();S.protocol=w.protocol,S.host=w.host,S.hostname=w.hostname,S.port=w.port||"",o=C.formatUrl(S)}return n.isWebSocket&&(S.protocol=S.protocol.replace("ws","http"),o=C.formatUrl(S),f=f||encodeURIComponent(P.getOriginHeader())),C.getProxyUrl(o,{proxyProtocol:c,proxyHostname:s,proxyPort:a,sessionId:p,resourceType:r,charset:d,reqOrigin:f})}function s(e,t){var r=null,n=t.top!==t,o=t.location.toString();if(n)r=o;else{var s=d(o);r=s&&s.destUrl}return E(r)&&C.isRelativeUrl(e)?"":(e=C.prepareUrl(e),i(e))}function a(e){return i(e,{proxyPort:N["default"].get().crossDomainProxyPort,resourceType:C.getResourceTypeString({isIframe:!0})})}function l(e){return N["default"].get().crossDomainProxyPort===e?location.port.toString():N["default"].get().crossDomainProxyPort}function u(){return location.protocol+"//"+location.hostname+":"+N["default"].get().crossDomainProxyPort+"/"}function c(e){return C.resolveUrlAsDest(e,i)}function p(e){return C.formatUrl(e)}function d(e){return C.parseProxyUrl(e)}function f(e){return C.parseUrl(e)}function h(e,t,r){return i(e,{resourceType:t,charset:r})}function m(e,t,r,n){var o=C.parseProxyUrl(e);if(o){var s=o.sessionId,a=o.proxy,l=I.changeUrlPart(o.destUrl,t,r,document);return i(l,{proxyHostname:a.hostname,proxyPort:a.port,sessionId:s,resourceType:n})}return e}function y(e){var t=c(e);return L.test(t)}function g(e,t){return C.isSubDomain(e,t)}function v(e){return C.isSupportedProtocol(e)}function E(e){return C.isSpecialPage(e)}function b(e){return C.parseResourceType(e)}function S(e){return C.getResourceTypeString(e)}function w(e,t){return i(e).replace(D,"")===i(t).replace(D,"")}e.__esModule=!0,e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR=void 0,e.getProxyUrl=i,e.getNavigationUrl=s,e.getCrossDomainIframeProxyUrl=a,e.getCrossDomainProxyPort=l,e.getCrossDomainProxyUrl=u,e.resolveUrlAsDest=c,e.formatUrl=p,e.parseProxyUrl=d,e.parseUrl=f,e.convertToProxyUrl=h,e.changeDestUrlPart=m,e.isValidWebSocketUrl=y,e.isSubDomain=g,e.isSupportedProtocol=v,e.isSpecialPage=E,e.parseResourceType=b,e.stringifyResourceType=S,e.isChangedOnlyHash=w;var _=r("../../processing/dom/internal-properties"),x=o(_),T=r("../../utils/url"),C=n(T),A=r("./destination-location"),P=n(A),O=r("./url-resolver"),I=n(O),M=r("../settings"),N=o(M),D=/#[\S\s]*$/,L=/^wss?:/i,j=function(){for(var e=window,t=e.location;!t.hostname;)e=e.parent,t=e.location;return{hostname:t.hostname,port:t.port.toString(),protocol:t.protocol}}();e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR=C.REQUEST_DESCRIPTOR_VALUES_SEPARATOR}}},processing:{dom:{"attributes.js":function(e,t,r){e.__esModule=!0;e.URL_ATTR_TAGS={href:["a","link","image","area","base"],src:["img","embed","script","source","video","audio","input","frame","iframe"],action:["form"],formaction:["button","input"],manifest:["html"],data:["object"]},e.URL_ATTRS=["href","src","action","formaction","manifest","data"],e.TARGET_ATTR_TAGS={target:["a","form","area","base"],formtarget:["input","button"]},e.TARGET_ATTRS=["target","formtarget"],e.ATTRS_WITH_SPECIAL_PROXYING_LOGIC=["sandbox","autocomplete","target","formtarget","style"]},"base-dom-adapter.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function e(){n(this,e),this.EVENTS=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel","onpointerdown","onpointerup","onpointercancel","onpointermove","onpointerover","onpointerout","onpointerenter","onpointerleave","ongotpointercapture","onlostpointercapture","onmspointerdown","onmspointerup","onmspointercancel","onmspointermove","onmspointerover","onmspointerout","onmspointerenter","onmspointerleave","onmsgotpointercapture","onmslostpointercapture"]}return e.prototype.removeAttr=function(){throw new Error("Not implemented")},e.prototype.getAttr=function(){throw new Error("Not implemented")},e.prototype.hasAttr=function(){throw new Error("Not implemented")},e.prototype.isSVGElement=function(){throw new Error("Not implemented")},e.prototype.hasEventHandler=function(){throw new Error("Not implemented")},e.prototype.getTagName=function(){throw new Error("Not implemented")},e.prototype.setAttr=function(){throw new Error("Not implemented")},e.prototype.setScriptContent=function(){throw new Error("Not implemented")},e.prototype.getScriptContent=function(){throw new Error("Not implemented")},e.prototype.getStyleContent=function(){throw new Error("Not implemented")},e.prototype.setStyleContent=function(){throw new Error("Not implemented")},e.prototype.needToProcessContent=function(){throw new Error("Not implemented")},e.prototype.needToProcessUrl=function(){throw new Error("Not implemented")},e.prototype.attachEventEmitter=function(){throw new Error("Not implemented")},e.prototype.hasIframeParent=function(){throw new Error("Not implemented")},e.prototype.getCrossDomainPort=function(){throw new Error("Not implemented")},e.prototype.getProxyUrl=function(){throw new Error("Not implemented")},e.prototype.isTopParentIframe=function(){throw new Error("Not implemented")},e.prototype.sameOriginCheck=function(){throw new Error("Not implemented")},e.prototype.getClassName=function(){throw new Error("Not implemented")},e.prototype.isExistingTarget=function(){throw new Error("Not implemented")},e}();e["default"]=o,t.exports=e["default"]},"index.js":function(e,t,r){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=r("../../processing/dom/internal-attributes"),a=o(s),l=r("../../shadow-ui/class-name"),u=o(l),c=r("../script"),p=r("../../processing/style"),d=o(p),f=r("../../utils/url"),h=n(f),m=r("../../utils/string-trim"),y=o(m),g=r("./namespaces"),v=r("./attributes"),E=/^(\s)*\/\/<!\[CDATA\[([\s\S]*)\/\/\]\]>(\s)*$/,b=/(\/\/[^\n]*|\n\s*)-->[^\n]*([\n\s]*)?$/,S=/^(\s)*<!--[^\n]*\n/,w=/-->\s*$/,_=/^\s*javascript\s*:/i,x=/^\s*(application\/(x-)?(ecma|java)script|text\/(javascript(1\.[0-5])?|((x-)?ecma|x-java|js|live)script))\s*$/,T=["animate","animateColor","animateMotion","animateTransform","mpath","set","linearGradient","radialGradient","stop","a","altglyph","color-profile","cursor","feimage","filter","font-face-uri","glyphref","image","mpath","pattern","script","textpath","use","tref"],C=["script","link"],A=["a","form","area","input","button"],P="hammerhead|element-processed",O="hammerhead|autocomplete-attribute-absence-marker",I=function(){function e(t){i(this,e),this.adapter=t,this.adapter.attachEventEmitter(this),this.SVG_XLINK_HREF_TAGS=T,this.AUTOCOMPLETE_ATTRIBUTE_ABSENCE_MARKER=O,this.EVENTS=this.adapter.EVENTS,this.elementProcessorPatterns=this._createProcessorPatterns(this.adapter),this.forceProxySrcForImage=!1}return e.isTagWithTargetAttr=function(e){return e&&v.TARGET_ATTR_TAGS.target.indexOf(e)>-1},e.isTagWithFormTargetAttr=function(e){return e&&v.TARGET_ATTR_TAGS.formtarget.indexOf(e)>-1},e.isTagWithIntegrityAttr=function(e){return e&&C.indexOf(e)!==-1},e.isIframeFlagTag=function(e){return e&&A.indexOf(e)!==-1},e.isAddedAutocompleteAttr=function(e,t){return"autocomplete"===e&&t===O},e.processJsAttrValue=function(e,t){var r=t.isJsProtocol,n=t.isEventAttr;return r&&(e=e.replace(_,"")),e=(0,c.processScript)(e,!1,r&&!n),r&&(e="javascript:"+e),e},e.getStoredAttrName=function(e){return e+a["default"].storedAttrPostfix},e.isJsProtocol=function(e){return _.test(e)},e._isHtmlImportLink=function(e,t){return e&&t&&"link"===e&&"import"===t},e.prototype._getRelAttribute=function(e){return String(this.adapter.getAttr(e,"rel")).toLocaleLowerCase()},e.prototype._createProcessorPatterns=function(t){var r=this,n={HAS_HREF_ATTR:function(e){return r.isUrlAttr(e,"href")},HAS_SRC_ATTR:function(e){return r.isUrlAttr(e,"src")},HAS_ACTION_ATTR:function(e){return r.isUrlAttr(e,"action")},HAS_FORMACTION_ATTR:function(e){return r.isUrlAttr(e,"formaction")},HAS_FORMTARGET_ATTR:function(r){return e.isTagWithFormTargetAttr(t.getTagName(r))&&t.hasAttr(r,"formtarget")},HAS_MANIFEST_ATTR:function(e){return r.isUrlAttr(e,"manifest")},HAS_DATA_ATTR:function(e){return r.isUrlAttr(e,"data")},HTTP_EQUIV_META:function(e){var r=t.getTagName(e);return"meta"===r&&t.hasAttr(e,"http-equiv")},ALL:function(){return!0},IS_SCRIPT:function(e){return"script"===t.getTagName(e)},IS_LINK:function(e){return"link"===t.getTagName(e)},IS_INPUT:function(e){return"input"===t.getTagName(e)},IS_FILE_INPUT:function(e){return"input"===t.getTagName(e)&&t.hasAttr(e,"type")&&"file"===t.getAttr(e,"type").toLowerCase()},IS_STYLE:function(e){return"style"===t.getTagName(e)},HAS_EVENT_HANDLER:function(e){return t.hasEventHandler(e)},IS_SANDBOXED_IFRAME:function(e){var r=t.getTagName(e);return("iframe"===r||"frame"===r)&&t.hasAttr(e,"sandbox")},IS_SVG_ELEMENT_WITH_XLINK_HREF_ATTR:function(e){return t.isSVGElement(e)&&t.hasAttr(e,"xlink:href")&&T.indexOf(t.getTagName(e))!==-1},IS_SVG_ELEMENT_WITH_XML_BASE_ATTR:function(e){return t.isSVGElement(e)&&t.hasAttr(e,"xml:base")}};return[{selector:n.HAS_FORMTARGET_ATTR,targetAttr:"formtarget",elementProcessors:[this._processTargetBlank]},{selector:n.HAS_HREF_ATTR,urlAttr:"href",targetAttr:"target",elementProcessors:[this._processTargetBlank,this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_SRC_ATTR,urlAttr:"src",targetAttr:"target",elementProcessors:[this._processTargetBlank,this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_ACTION_ATTR,urlAttr:"action",targetAttr:"target",elementProcessors:[this._processTargetBlank,this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_FORMACTION_ATTR,urlAttr:"formaction",targetAttr:"formtarget",elementProcessors:[this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_MANIFEST_ATTR,urlAttr:"manifest",elementProcessors:[this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_DATA_ATTR,urlAttr:"data",elementProcessors:[this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HTTP_EQUIV_META,urlAttr:"content",elementProcessors:[this._processMetaElement]},{selector:n.IS_SCRIPT,elementProcessors:[this._processScriptElement,this._processIntegrityAttr]},{selector:n.ALL,elementProcessors:[this._processStyleAttr]},{selector:n.IS_LINK,relAttr:"rel",elementProcessors:[this._processIntegrityAttr,this._processRelPrefetch]},{selector:n.IS_STYLE,elementProcessors:[this._processStylesheetElement]},{selector:n.IS_INPUT,elementProcessors:[this._processAutoComplete]},{selector:n.IS_FILE_INPUT,elementProcessors:[this._processRequired]},{selector:n.HAS_EVENT_HANDLER,elementProcessors:[this._processEvtAttr]},{selector:n.IS_SANDBOXED_IFRAME,elementProcessors:[this._processSandboxedIframe]},{selector:n.IS_SVG_ELEMENT_WITH_XLINK_HREF_ATTR,urlAttr:"xlink:href",elementProcessors:[this._processSVGXLinkHrefAttr,this._processUrlAttrs]},{selector:n.IS_SVG_ELEMENT_WITH_XML_BASE_ATTR,urlAttr:"xml:base",elementProcessors:[this._processUrlAttrs]}]},e.prototype.processElement=function(e,t){if(!e[P])for(var r=0;r<this.elementProcessorPatterns.length;r++){var n=this.elementProcessorPatterns[r];if(n.selector(e)&&!this._isShadowElement(e)){for(var o=0;o<n.elementProcessors.length;o++)n.elementProcessors[o].call(this,e,t,n);e[P]=!0}}},e.prototype.getElementResourceType=function(e){var t=this.adapter.getTagName(e);return h.getResourceTypeString({isIframe:"iframe"===t||"frame"===t||this._isOpenLinkInIframe(e),isForm:"form"===t||"input"===t||"button"===t,isScript:"script"===t,isHtmlImport:"link"===t&&"import"===this._getRelAttribute(e)})},e.prototype.isUrlAttr=function(e,t,r){var n=this.adapter.getTagName(e);return t=t?t.toLowerCase():t,!(!v.URL_ATTR_TAGS[t]||v.URL_ATTR_TAGS[t].indexOf(n)===-1)||this.adapter.isSVGElement(e)&&("xml:base"===t||"base"===t&&r===g.XML_NAMESPACE)},e.prototype.getUrlAttr=function(e){for(var t=this.adapter.getTagName(e),r=0;r<v.URL_ATTRS.length;r++){var n=v.URL_ATTRS[r];if(v.URL_ATTR_TAGS[n].indexOf(t)!==-1)return n}return null},e.prototype.getTargetAttr=function(e){for(var t=this.adapter.getTagName(e),r=0;r<v.TARGET_ATTRS.length;r++){var n=v.TARGET_ATTRS[r];if(v.TARGET_ATTR_TAGS[n].indexOf(t)>-1)return n}return null},e.prototype._isOpenLinkInIframe=function(t){var r=this.adapter.getTagName(t),n=this.getTargetAttr(t),o=this.adapter.getAttr(t,n),i=this._getRelAttribute(t);if("_top"!==o){var s=e.isIframeFlagTag(r)||e._isHtmlImportLink(r,i),a=!!o&&"_"!==o[0];if("_parent"===o)return s&&!this.adapter.isTopParentIframe(t);if(s&&(this.adapter.hasIframeParent(t)||a&&this.adapter.isExistingTarget(o)))return!0}return!1},e.prototype._isShadowElement=function(e){var t=this.adapter.getClassName(e);return"string"==typeof t&&t.indexOf(u["default"].postfix)>-1},e.prototype._processAutoComplete=function(t){var r=e.getStoredAttrName("autocomplete"),n=this.adapter.hasAttr(t,r),o=this.adapter.getAttr(t,n?r:"autocomplete");n||this.adapter.setAttr(t,r,o||""===o?o:O),this.adapter.setAttr(t,"autocomplete","off")},e.prototype._processRequired=function(t){var r=e.getStoredAttrName("required"),n=this.adapter.hasAttr(t,"required"),o=this.adapter.hasAttr(t,r)&&!n;if(!o&&n){var i=this.adapter.getAttr(t,"required");this.adapter.setAttr(t,r,i),this.adapter.removeAttr(t,"required")}},e.prototype._processIntegrityAttr=function(t){var r=e.getStoredAttrName("integrity"),n=this.adapter.hasAttr(t,r)&&!this.adapter.hasAttr(t,"integrity"),o=this.adapter.getAttr(t,n?r:"integrity");o&&this.adapter.setAttr(t,r,o),n||this.adapter.removeAttr(t,"integrity")},e.prototype._processRelPrefetch=function(t,r,n){var o=e.getStoredAttrName(n.relAttr),i=this.adapter.hasAttr(t,o)&&!this.adapter.hasAttr(t,n.relAttr),s=this.adapter.getAttr(t,i?o:n.relAttr);if(s){var a=(0,y["default"])(s.toLowerCase());"prefetch"===a&&(this.adapter.setAttr(t,o,s),i||this.adapter.removeAttr(t,n.relAttr))}},e.prototype._processJsAttr=function(t,r,n){var o=n.isJsProtocol,i=n.isEventAttr,s=e.getStoredAttrName(r),a=this.adapter.hasAttr(t,s),l=this.adapter.getAttr(t,a?s:r),u=e.processJsAttrValue(l,{isJsProtocol:o,isEventAttr:i});l!==u&&(this.adapter.setAttr(t,s,l),this.adapter.setAttr(t,r,u))},e.prototype._processEvtAttr=function(t){for(var r=this.adapter.EVENTS,n=0;n<r.length;n++){var o=this.adapter.getAttr(t,r[n]);o&&this._processJsAttr(t,r[n],{isJsProtocol:e.isJsProtocol(o),isEventAttr:!0})}},e.prototype._processMetaElement=function(e,t,r){var n=this.adapter.getAttr(e,"http-equiv").toLowerCase();if("refresh"===n){
var o=this.adapter.getAttr(e,r.urlAttr);o=o.replace(/(url=)(.*)$/i,function(e,r,n){return r+t(n)}),this.adapter.setAttr(e,r.urlAttr,o)}else"content-security-policy"===n&&(this.adapter.removeAttr(e,"http-equiv"),this.adapter.removeAttr(e,"content"))},e.prototype._processSandboxedIframe=function(t){var r=this.adapter.getAttr(t,"sandbox"),n=r.indexOf("allow-same-origin")!==-1,o=r.indexOf("allow-scripts")!==-1,i=e.getStoredAttrName("sandbox");this.adapter.setAttr(t,i,r),n&&o||(r+=n?"":" allow-same-origin",r+=o?"":" allow-scripts"),this.adapter.setAttr(t,"sandbox",r)},e.prototype._processScriptElement=function(e){var t=this.adapter.getScriptContent(e);if(t&&this.adapter.needToProcessContent(e)){var r=(0,c.isScriptProcessed)(t);if(!r){var n=this.adapter.getAttr(e,"type"),o=!n||x.test(n);if(o){var i=t,s="",a=i.match(S),l="",u=null,p=E.test(i);a&&(s=a[0],u=i.match(b),u?l=u[0]:w.test(s)||(l="//-->"),i=i.replace(s,"").replace(l,"")),p&&(i=i.replace(E,"$2")),i=s+(0,c.processScript)(i,!0)+l,p&&(i="\n//<![CDATA[\n"+i+"//]]>"),this.adapter.setScriptContent(e,i)}}}},e.prototype._processStyleAttr=function(e,t){var r=this.adapter.getAttr(e,"style");r&&this.adapter.setAttr(e,"style",d["default"].process(r,t))},e.prototype._processStylesheetElement=function(e,t){var r=this.adapter.getStyleContent(e);r&&t&&this.adapter.needToProcessContent(e)&&(r=d["default"].process(r,t,!0),this.adapter.setStyleContent(e,r))},e.prototype._processTargetBlank=function(t,r,n){var o=e.getStoredAttrName(n.targetAttr),i=this.adapter.hasAttr(t,o);if(!i){var s=this.adapter.getAttr(t,n.targetAttr);s=s&&s.replace(/\s/g,""),"_blank"!==s&&"blank"!==s||(this.adapter.setAttr(t,n.targetAttr,"_top"),this.adapter.setAttr(t,o,s))}},e.prototype._processUrlAttrs=function(t,r,n){if(r&&n.urlAttr){var o=e.getStoredAttrName(n.urlAttr),i=this.adapter.getAttr(t,n.urlAttr),s=h.isSpecialPage(i),a=this.adapter.hasAttr(t,o);if((i||""===i)&&!a&&(h.isSupportedProtocol(i)||s)){var l=this.adapter.getTagName(t),u="iframe"===l||"frame"===l,c="script"===l,p="a"===l,d=this.adapter.getAttr(t,n.targetAttr);if(!this.adapter.needToProcessUrl(l,d))return;var f=this.getElementResourceType(t),m=h.parseUrl(i),y="file:"!==m.protocol&&!m.host,g="",v=c&&this.adapter.getAttr(t,"charset");if(u&&!s&&!y){var E=r("/"),b=h.parseProxyUrl(E),S=b.destUrl;if(m.protocol||(i=b.destResourceInfo.protocol+i),!this.adapter.sameOriginCheck(S,i)){var w=h.parseUrl(E).hostname,_=this.adapter.getCrossDomainPort(),x=h.getResourceTypeString({isIframe:!0});g=i?this.adapter.getProxyUrl(i,{proxyHostname:w,proxyPort:_,sessionId:b.sessionId,resourceType:x}):""}}if(s&&!p&&(g=i),g=""===g&&i?r(i,f,v):g,this.adapter.setAttr(t,o,i),"img"!==l||""===g||s)this.adapter.setAttr(t,n.urlAttr,g);else{var T=this.forceProxySrcForImage?g:h.resolveUrlAsDest(i,r);this.adapter.setAttr(t,n.urlAttr,T)}}}},e.prototype._processUrlJsAttr=function(t,r,n){e.isJsProtocol(this.adapter.getAttr(t,n.urlAttr))&&this._processJsAttr(t,n.urlAttr,{isJsProtocol:!0,isEventAttr:!1})},e.prototype._processSVGXLinkHrefAttr=function(t,r,n){var o=this.adapter.getAttr(t,n.urlAttr);if(h.HASH_RE.test(o)){var i=e.getStoredAttrName(n.urlAttr);this.adapter.setAttr(t,i,o)}},e}();e["default"]=I,t.exports=e["default"]},"internal-attributes.js":function(e,t,r){e.__esModule=!0,e["default"]={storedAttrPostfix:"-hammerhead-stored-value",hoverPseudoClass:"data-hammerhead-hovered",focusPseudoClass:"data-hammerhead-focused",uploadInfoHiddenInputName:"hammerhead|upload-info-hidden-input-name"},t.exports=e["default"]},"internal-properties.js":function(e,t,r){e.__esModule=!0,e["default"]={processDomMethodName:"hammerhead|process-dom-method",processedContext:"hammerhead|processed-context",documentWasCleaned:"hammerhead|document-was-cleaned",documentCharset:"hammerhead|document-charset",iframeNativeMethods:"hammerhead|iframe-native-methods",hammerhead:"%hammerhead%",selection:"hammerhead|selection",shadowUIElement:"hammerhead|shadow-ui-element",forceProxySrcForImage:"hammerhead|image|force-proxy-src-flag",skipNextLoadEventForImage:"hammerhead|image|skip-next-load-event-flag"},t.exports=e["default"]},"namespaces.js":function(e,t,r){e.__esModule=!0;var n=(e.SVG_NAMESPACE="http://www.w3.org/2000/svg",e.XML_NAMESPACE="http://www.w3.org/XML/1998/namespace"),o=e.XMLNS_NAMESPACE="http://www.w3.org/2000/xmlns/",i=e.XLINK_NAMESPACE="http://www.w3.org/1999/xlink";e.NAMESPACE_PREFIX_MAP={xml:n,xlink:i,xmlns:o}}},script:{"header.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.replace(g,"").replace(v,"")}function i(e,t){var r=y.replace(m,t?'"use strict";':"");return r+e+"\n"+f}e.__esModule=!0,e.SCRIPT_PROCESSING_END_HEADER_COMMENT=e.SCRIPT_PROCESSING_END_COMMENT=e.SCRIPT_PROCESSING_START_COMMENT=void 0,e.remove=o,e.add=i;var s=r("../../utils/regexp-escape"),a=n(s),l=r("../../processing/dom/internal-properties"),u=n(l),c=r("./instruction"),p=n(c),d=e.SCRIPT_PROCESSING_START_COMMENT="/*hammerhead|script|start*/",f=e.SCRIPT_PROCESSING_END_COMMENT="/*hammerhead|script|end*/",h=e.SCRIPT_PROCESSING_END_HEADER_COMMENT="/*hammerhead|script|processing-header-end*/",m="{strict-placeholder}",y=[d,m,'if(typeof window!=="undefined"&&window){','window["'+u["default"].processDomMethodName+'"] && window["'+u["default"].processDomMethodName+'"]();',"}","else{","var "+p["default"].getLocation+"=function(l){return l},",p["default"].setLocation+"=function(l,v){return l = v},",p["default"].setProperty+"=function(o,p,v){return o[p] = v},",p["default"].getProperty+"=function(o,p){return o[p]},",p["default"].callMethod+"=function(o,p,a){return o[p].apply(o,a)},",p["default"].getEval+"=function(e){return e},",p["default"].processScript+"=function(s){return s},",p["default"].processHtml+"=function(h){return h},",p["default"].getPostMessage+"=function(w,p){return arguments.length===1?w.postMessage:p};","}",h,"\n"].join(""),g=new RegExp((0,a["default"])(d)+"[\\S\\s]+?"+(0,a["default"])(h)+"\n?","gi"),v=new RegExp("\n?"+(0,a["default"])(f)+"\\s*","gi")},"index.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){do e=e.replace(P,"\n");while(P.test(e));return e}function i(e){var t=(0,A["default"])(e),r=t?e.substring(t.length):e;return r=(0,S.remove)(r),r=s(r),{bom:t,preprocessed:r}}function s(e){return N.test(e)?e.replace(N,""):e}function a(e,t,r,n){return t&&(e=(0,S.add)(e,n)),r?r+e:e}function l(e,t){return I.test(t)?e:e.replace(I,"")}function u(e,t){e=t?"("+e+")":e;try{return(0,w.parse)(e,L)}catch(r){return null}}function c(e,t){var r=(0,_.generate)(e,{format:{quotes:"double",escapeless:!0,compact:!0}});return t?l(r,t):r}function p(e){var t=O.test(e),r=u(e,t);return!r&&t&&(r=u(e,!1),t=!1),{ast:r,isObject:t}}function d(e){return 1===e.body.length&&e.body[0].type===_.Syntax.ExpressionStatement&&e.body[0].expression.type===_.Syntax.ArrayExpression}function f(e){if(e.body.length){var t=e.body[0];if(t.type===_.Syntax.ExpressionStatement&&t.expression.type===_.Syntax.Literal)return"use strict"===t.expression.value}return!1}function h(e,t,r){var n=r?-1:0,o=[],i=0;if(!t.length)return e;t.sort(function(e,t){return e.start-t.start});for(var s=0;s<t.length;s++){var a=t[s],l=a.start+n,u=a.end+n,p=a.parent[a.key];p=a.index!==-1?p[a.index]:p,o.push(e.substring(i,l)),o.push(" "),o.push(c(p,e.substring(l,u))),i+=u-i}return o.push(e.substring(i)),o.join("")}function m(e){return D.test(e)}function y(e,t,r){var n=i(e),s=n.bom,l=n.preprocessed,u=o(l),c=p(u),m=c.ast,y=c.isObject;if(!m)return e;t=t&&!y&&!d(m),m.wrapLastExprWithProcessHtml=r;var g=(0,v["default"])(m),E=g.length?h(u,g,y):l;return E=a(E,t,s,f(m)),y&&(E=E.replace(M,"$1")),E}e.__esModule=!0,e.isScriptProcessed=m,e.processScript=y;var g=r("./transform"),v=n(g),E=r("./instruction"),b=n(E),S=r("./header"),w=r("./tools/acorn"),_=r("./tools/esotope"),x=r("../../utils/regexp-escape"),T=n(x),C=r("../../utils/get-bom"),A=n(C),P=/(^|\n)\s*<!--[^\n]*(\n|$)/g,O=/^\s*\{.*\}\s*$/,I=/;\s*$/,M=/^\s*\((.*)\);\s*$/,N=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)/gm,D=new RegExp([(0,T["default"])(b["default"].getLocation),(0,T["default"])(b["default"].setLocation),(0,T["default"])(b["default"].getProperty),(0,T["default"])(b["default"].setProperty),(0,T["default"])(b["default"].callMethod),(0,T["default"])(b["default"].processScript),(0,T["default"])(b["default"].processHtml),(0,T["default"])(b["default"].getPostMessage)].join("|")),L={allowReturnOutsideFunction:!0,ecmaVersion:8}},"instruction.js":function(e,t,r){e.__esModule=!0,e["default"]={getLocation:"__get$Loc",setLocation:"__set$Loc",getProperty:"__get$",setProperty:"__set$",callMethod:"__call$",processScript:"__proc$Script",processHtml:"__proc$Html",getEval:"__get$Eval",getPostMessage:"__get$PostMessage"},t.exports=e["default"]},"instrumented.js":function(e,t,r){function n(e){return c(a,e)}function o(e){return c(l,e)}e.__esModule=!0,e.shouldInstrumentMethod=n,e.shouldInstrumentProperty=o;var i=e.METHODS=["postMessage","replace","assign"],s=e.PROPERTIES=["href","location"],a=new RegExp("^("+i.join("|")+")$"),l=new RegExp("^("+s.join("|")+")$"),u=RegExp.prototype.test,c=function(e,t){return e.test?e.test(t):u.call(e,t)}},"internal-literal.js":function(e,t,r){e.__esModule=!0,e["default"]={tempVar:"__set$temp"},t.exports=e["default"]},"node-builder.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{type:S.Syntax.Literal,value:e,raw:'"'+e+'"'}}function i(){return{type:S.Syntax.Identifier,name:_["default"].tempVar}}function s(e,t){return{type:S.Syntax.ExpressionStatement,expression:{type:S.Syntax.AssignmentExpression,operator:"=",left:e,right:t}}}function a(e){return{type:S.Syntax.BlockStatement,body:e}}function l(e,t){return{type:S.Syntax.VariableDeclaration,declarations:[{type:S.Syntax.VariableDeclarator,id:e,init:t||null}],kind:"var"}}function u(e,t){var r={type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].processScript},arguments:[e]};return t&&r.arguments.push({type:S.Syntax.Literal,value:!0,raw:"true"}),r}function c(){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getLocation},arguments:[{type:S.Syntax.Identifier,name:"location"}]}}function p(e,t){var r=i(),n={type:S.Syntax.Identifier,name:"location"},o={type:S.Syntax.CallExpression,callee:{type:S.Syntax.MemberExpression,computed:!1,object:{type:S.Syntax.FunctionExpression,id:null,params:[],defaults:[],body:{type:S.Syntax.BlockStatement,body:[l(r,e),{type:S.Syntax.ReturnStatement,argument:{type:S.Syntax.LogicalExpression,operator:"||",left:{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].setLocation},arguments:[n,r]},right:{type:S.Syntax.AssignmentExpression,operator:"=",left:n,right:r}}}]},rest:null,generator:!1,expression:!1},property:{type:S.Syntax.Identifier,name:"call"}},arguments:[{type:S.Syntax.ThisExpression}]};return t&&(o={type:S.Syntax.SequenceExpression,expressions:[{type:"Literal",value:0,raw:"0"},o]}),o}function d(e,t,r){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].setProperty},arguments:[t,o(e),r]}}function f(e,t,r){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].callMethod},arguments:[e,t,{type:S.Syntax.ArrayExpression,elements:r}]}}function h(e,t){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getProperty},arguments:[t,o(e)]}}function m(e,t){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getProperty},arguments:[t,e]}}function y(e,t,r){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].setProperty},arguments:[t,e,r]}}function g(e){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getEval},arguments:[e]}}function v(e){var t=e.object;return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getPostMessage},arguments:t?[t]:[{type:S.Syntax.Literal,value:null},e]}}function E(e,t){return{type:S.Syntax.AssignmentExpression,operator:"=",left:e,right:{type:S.Syntax.BinaryExpression,operator:"+",left:e,right:t}}}function b(e){return{type:S.Syntax.ExpressionStatement,expression:{type:S.Syntax.CallExpression,callee:{type:S.Syntax.MemberExpression,object:{type:S.Syntax.Identifier,name:"parent"},property:{type:S.Syntax.Identifier,name:T["default"].processHtml}},arguments:[{type:S.Syntax.Identifier,name:"window"},e.expression]}}}e.__esModule=!0,e.createStringLiteral=o,e.createTempVarIdentifier=i,e.createAssignmentExprStmt=s,e.createBlockExprStmt=a,e.createVarDeclaration=l,e.createProcessScriptMethCall=u,e.createLocationGetWrapper=c,e.createLocationSetWrapper=p,e.createPropertySetWrapper=d,e.createMethCallWrapper=f,e.createPropertyGetWrapper=h,e.createComputedPropertyGetWrapper=m,e.createComputedPropertySetWrapper=y,e.createGetEvalMethCall=g,e.createGetPostMessageMethCall=v,e.createExpandedConcatOperation=E,e.createHtmlProcessorWrapper=b;var S=r("./tools/esotope"),w=r("./internal-literal"),_=n(w),x=r("./instruction"),T=n(x)},tools:{acorn:{"expression.js":function(e,t,r){var n=r("./tokentype"),o=r("./state"),i=r("./parseutil"),s=r("./whitespace"),a=o.Parser.prototype;a.checkPropClash=function(e,t){if(!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,n=void 0;switch(r.type){case"Identifier":n=r.name;break;case"Literal":n=String(r.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===n&&"init"===o&&(t.proto&&this.raiseRecoverable(r.start,"Redefinition of __proto__ property"),t.proto=!0));n="$"+n;var i=t[n];if(i){var s=void 0;s="init"===o?this.strict&&i.init||i.get||i.set:i.init||i[o],s&&this.raiseRecoverable(r.start,"Redefinition of property")}else i=t[n]={init:!1,get:!1,set:!1};i[o]=!0}},a.parseExpression=function(e,t){var r=this.start,o=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===n.types.comma){var s=this.startNodeAt(r,o);for(s.expressions=[i];this.eat(n.types.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},a.parseMaybeAssign=function(e,t,r){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var o=!1,s=-1,a=-1;t?(s=t.parenthesizedAssign,a=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new i.DestructuringErrors,o=!0);var l=this.start,u=this.startLoc;this.type!=n.types.parenL&&this.type!=n.types.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(r&&(c=r.call(this,c,l,u)),this.type.isAssign){this.checkPatternErrors(t,!0),o||i.DestructuringErrors.call(t);var p=this.startNodeAt(l,u);return p.operator=this.value,p.left=this.type===n.types.eq?this.toAssignable(c):c,t.shorthandAssign=-1,this.checkLVal(c),this.next(),p.right=this.parseMaybeAssign(e),this.finishNode(p,"AssignmentExpression")}return o&&this.checkExpressionErrors(t,!0),s>-1&&(t.parenthesizedAssign=s),a>-1&&(t.trailingComma=a),c},a.parseMaybeConditional=function(e,t){var r=this.start,o=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(n.types.question)){var s=this.startNodeAt(r,o);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(n.types.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},a.parseExprOps=function(e,t){var r=this.start,n=this.startLoc,o=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?o:o.start==r&&"ArrowFunctionExpression"===o.type?o:this.parseExprOp(o,r,n,-1,e)},a.parseExprOp=function(e,t,r,o,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==n.types._in)&&s>o){var a=this.type===n.types.logicalOR||this.type===n.types.logicalAND,l=this.value;this.next();var u=this.start,c=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,s,i),d=this.buildBinary(t,r,e,p,l,a);return this.parseExprOp(d,t,r,o,i)}return e},a.buildBinary=function(e,t,r,n,o,i){var s=this.startNodeAt(e,t);return s.left=r,s.operator=o,s.right=n,this.finishNode(s,i?"LogicalExpression":"BinaryExpression")},a.parseMaybeUnary=function(e,t){var r=this.start,o=this.startLoc,i=void 0;if(this.inAsync&&this.isContextual("await"))i=this.parseAwait(e),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===n.types.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,i=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(r,o);l.operator=this.value,l.prefix=!1,l.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(l,"UpdateExpression")}}return!t&&this.eat(n.types.starstar)?this.buildBinary(r,o,i,this.parseMaybeUnary(null,!1),"**",!1):i},a.parseExprSubscripts=function(e){var t=this.start,r=this.startLoc,n=this.parseExprAtom(e),o="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||o)return n;var i=this.parseSubscripts(n,t,r);return e&&"MemberExpression"===i.type&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1)),i},a.parseSubscripts=function(e,t,r,o){for(var s,a=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd==e.end&&!this.canInsertSemicolon();;)if((s=this.eat(n.types.bracketL))||this.eat(n.types.dot)){var l=this.startNodeAt(t,r);l.object=e,l.property=s?this.parseExpression():this.parseIdent(!0),l.computed=!!s,s&&this.expect(n.types.bracketR),e=this.finishNode(l,"MemberExpression")}else if(!o&&this.eat(n.types.parenL)){var u=new i.DestructuringErrors,c=this.yieldPos,p=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var d=this.parseExprList(n.types.parenR,this.options.ecmaVersion>=8,!1,u);if(a&&!this.canInsertSemicolon()&&this.eat(n.types.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=c,this.awaitPos=p,this.parseArrowExpression(this.startNodeAt(t,r),d,!0);this.checkExpressionErrors(u,!0),this.yieldPos=c||this.yieldPos,this.awaitPos=p||this.awaitPos;var f=this.startNodeAt(t,r);f.callee=e,f.arguments=d,e=this.finishNode(f,"CallExpression")}else{if(this.type!==n.types.backQuote)return e;var h=this.startNodeAt(t,r);h.tag=e,h.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(h,"TaggedTemplateExpression")}},a.parseExprAtom=function(e){var t=void 0,r=this.potentialArrowAt==this.start;switch(this.type){case n.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case n.types._this:var o=this.type===n.types._this?"ThisExpression":"Super";return t=this.startNode(),this.next(),this.finishNode(t,o);case n.types.name:var i=this.start,s=this.startLoc,a=this.parseIdent(this.type!==n.types.name);if(this.options.ecmaVersion>=8&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(n.types._function))return this.parseFunction(this.startNodeAt(i,s),!1,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(n.types.arrow))return this.parseArrowExpression(this.startNodeAt(i,s),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===n.types.name)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(n.types.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,s),[a],!0)}return a;case n.types.regexp:var l=this.value;return t=this.parseLiteral(l.value),t.regex={pattern:l.pattern,flags:l.flags},t;case n.types.num:case n.types.string:return this.parseLiteral(this.value);case n.types._null:case n.types._true:case n.types._false:return t=this.startNode(),t.value=this.type===n.types._null?null:this.type===n.types._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case n.types.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(r);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case n.types.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(n.types.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case n.types.braceL:return this.parseObj(!1,e);case n.types._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case n.types._class:return this.parseClass(this.startNode(),!1);case n.types._new:return this.parseNew();case n.types.backQuote:return this.parseTemplate();default:this.unexpected()}},a.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},a.parseParenExpression=function(){this.expect(n.types.parenL);var e=this.parseExpression();return this.expect(n.types.parenR),e},a.parseParenAndDistinguishExpression=function(e){var t=this.start,r=this.startLoc,o=void 0,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,l=this.startLoc,u=[],c=!0,p=!1,d=new i.DestructuringErrors,f=this.yieldPos,h=this.awaitPos,m=void 0,y=void 0;for(this.yieldPos=0,this.awaitPos=0;this.type!==n.types.parenR;){if(c?c=!1:this.expect(n.types.comma),s&&this.afterTrailingComma(n.types.parenR,!0)){p=!0;break}if(this.type===n.types.ellipsis){m=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===n.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}this.type!==n.types.parenL||y||(y=this.start),u.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var g=this.start,v=this.startLoc;if(this.expect(n.types.parenR),e&&!this.canInsertSemicolon()&&this.eat(n.types.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),y&&this.unexpected(y),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(t,r,u);u.length&&!p||this.unexpected(this.lastTokStart),m&&this.unexpected(m),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(o=this.startNodeAt(a,l),o.expressions=u,this.finishNodeAt(o,"SequenceExpression",g,v)):o=u[0]}else o=this.parseParenExpression();if(this.options.preserveParens){var E=this.startNodeAt(t,r);return E.expression=o,this.finishNode(E,"ParenthesizedExpression")}return o},a.parseParenItem=function(e){return e},a.parseParenArrowList=function(e,t,r){return this.parseArrowExpression(this.startNodeAt(e,t),r)};var l=[];a.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(n.types.dot))return e.meta=t,e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty");var r=this.start,o=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,o,!0),this.eat(n.types.parenL)?e.arguments=this.parseExprList(n.types.parenR,this.options.ecmaVersion>=8,!1):e.arguments=l,this.finishNode(e,"NewExpression")},a.parseTemplateElement=function(e){var t=e.isTagged,r=this.startNode();return this.type===n.types.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===n.types.backQuote,this.finishNode(r,"TemplateElement")},a.parseTemplate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isTagged,r=void 0!==t&&t,o=this.startNode();this.next(),o.expressions=[];var i=this.parseTemplateElement({isTagged:r});for(o.quasis=[i];!i.tail;)this.expect(n.types.dollarBraceL),o.expressions.push(this.parseExpression()),this.expect(n.types.braceR),o.quasis.push(i=this.parseTemplateElement({isTagged:r}));return this.next(),this.finishNode(o,"TemplateLiteral")},a.isAsyncProp=function(e){return!(e.computed||"Identifier"!==e.key.type||"async"!==e.key.name||this.type!==n.types.name&&this.type!==n.types.num&&this.type!==n.types.string&&this.type!==n.types.bracketL||s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))},a.parseObj=function(e,t){var r=this.startNode(),o=!0,i={};for(r.properties=[],this.next();!this.eat(n.types.braceR);){if(o)o=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;var s=this.startNode(),a=void 0,l=void 0,u=void 0,c=void 0;this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(u=this.start,c=this.startLoc),e||(a=this.eat(n.types.star))),this.parsePropertyName(s),!e&&this.options.ecmaVersion>=8&&!a&&this.isAsyncProp(s)?(l=!0,this.parsePropertyName(s,t)):l=!1,this.parsePropertyValue(s,e,a,l,u,c,t),this.checkPropClash(s,i),r.properties.push(this.finishNode(s,"Property"))}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},a.parsePropertyValue=function(e,t,r,o,i,s,a){if((r||o)&&this.type===n.types.colon&&this.unexpected(),this.eat(n.types.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===n.types.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(r,o);else if(this.options.ecmaVersion>=5&&!e.computed&&"Identifier"===e.key.type&&("get"===e.key.name||"set"===e.key.name)&&this.type!=n.types.comma&&this.type!=n.types.braceR){(r||o||t)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===n.types.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()},a.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(n.types.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(n.types.bracketR),e.key;e.computed=!1}return e.key=this.type===n.types.num||this.type===n.types.string?this.parseExprAtom():this.parseIdent(!0)},a.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},a.parseMethod=function(e,t){var r=this.startNode(),o=this.inGenerator,i=this.inAsync,s=this.yieldPos,a=this.awaitPos,l=this.inFunction;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.inGenerator=r.generator,this.inAsync=r.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(n.types.parenL),r.params=this.parseBindingList(n.types.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1),this.inGenerator=o,this.inAsync=i,this.yieldPos=s,this.awaitPos=a,this.inFunction=l,this.finishNode(r,"FunctionExpression")},a.parseArrowExpression=function(e,t,r){var n=this.inGenerator,o=this.inAsync,i=this.yieldPos,s=this.awaitPos,a=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!r),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=n,this.inAsync=o,this.yieldPos=i,this.awaitPos=s,this.inFunction=a,this.finishNode(e,"ArrowFunctionExpression")},a.parseFunctionBody=function(e,t){var r=t&&this.type!==n.types.braceL,o=this.strict,i=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);o&&!s||(i=this.strictDirective(this.end),i&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!o&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.labels=a}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,"none"),this.strict=o},a.isSimpleParamList=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("Identifier"!==r.type)return!1}return!0},a.checkParams=function(e,t){for(var r={},n=0,o=e.params;n<o.length;n++){var i=o[n];this.checkLVal(i,"var",t?null:r)}},a.parseExprList=function(e,t,r,o){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(n.types.comma),t&&this.afterTrailingComma(e))break;var a=void 0;r&&this.type===n.types.comma?a=null:this.type===n.types.ellipsis?(a=this.parseSpread(o),o&&this.type===n.types.comma&&o.trailingComma<0&&(o.trailingComma=this.start)):a=this.parseMaybeAssign(!1,o),i.push(a)}return i},a.checkUnreserved=function(e){var t=e.start,r=e.end,n=e.name;if(this.inGenerator&&"yield"===n&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.isKeyword(n)&&this.raise(t,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,r).indexOf("\\")!=-1)){var o=this.strict?this.reservedWordsStrict:this.reservedWords;o.test(n)&&this.raiseRecoverable(t,"The keyword '"+n+"' is reserved")}},a.parseIdent=function(e,t){var r=this.startNode();return e&&"never"==this.options.allowReserved&&(e=!1),this.type===n.types.name?r.name=this.value:this.type.keyword?r.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(r,"Identifier"),e||this.checkUnreserved(r),r},a.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type==n.types.semi||this.canInsertSemicolon()||this.type!=n.types.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(n.types.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},a.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")}},"identifier.js":function(e,t,r){function n(e,t){for(var r=65536,n=0;n<t.length;n+=2){if(r+=t[n],r>e)return!1;if(r+=t[n+1],r>=e)return!0}}function o(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):t!==!1&&n(e,p)))}function i(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):t!==!1&&(n(e,p)||n(e,d)))))}e.__esModule=!0,e.isIdentifierStart=o,e.isIdentifierChar=i;var s=(e.reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),a=(e.keywords={5:s,6:s+" const class extends export import super"},"-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"),l="-------------------------------------------------------------------------------------------------------------------------------------------------",u=new RegExp("["+a+"]"),c=new RegExp("["+a+l+"]");
a=l=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,264,8,2,36,18,0,50,29,881,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,65,0,32,6124,20,754,9486,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],d=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,7,0,161,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,87,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,838,7,2,7,17,9,57,21,2,13,19882,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239]},"index.js":function(e,t,r){function n(e,t){return new a.Parser(t,e).parse()}function o(e,t,r){var n=new a.Parser(r,e,t);return n.nextToken(),n.parseExpression()}function i(e,t){return new a.Parser(t,e)}function s(t,r,n){e.parse_dammit=y=t,e.LooseParser=g=r,e.pluginsLoose=v=n}e.__esModule=!0,e.pluginsLoose=e.LooseParser=e.parse_dammit=e.version=e.nonASCIIwhitespace=e.lineBreakG=e.lineBreak=e.isNewLine=e.Token=e.isIdentifierStart=e.isIdentifierChar=e.tokContexts=e.TokContext=e.keywordTypes=e.tokTypes=e.TokenType=e.Node=e.getLineInfo=e.SourceLocation=e.Position=e.defaultOptions=e.plugins=e.Parser=void 0;var a=r("./state");Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return a.Parser}}),Object.defineProperty(e,"plugins",{enumerable:!0,get:function(){return a.plugins}});var l=r("./options");Object.defineProperty(e,"defaultOptions",{enumerable:!0,get:function(){return l.defaultOptions}});var u=r("./locutil");Object.defineProperty(e,"Position",{enumerable:!0,get:function(){return u.Position}}),Object.defineProperty(e,"SourceLocation",{enumerable:!0,get:function(){return u.SourceLocation}}),Object.defineProperty(e,"getLineInfo",{enumerable:!0,get:function(){return u.getLineInfo}});var c=r("./node");Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}});var p=r("./tokentype");Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return p.TokenType}}),Object.defineProperty(e,"tokTypes",{enumerable:!0,get:function(){return p.types}}),Object.defineProperty(e,"keywordTypes",{enumerable:!0,get:function(){return p.keywords}});var d=r("./tokencontext");Object.defineProperty(e,"TokContext",{enumerable:!0,get:function(){return d.TokContext}}),Object.defineProperty(e,"tokContexts",{enumerable:!0,get:function(){return d.types}});var f=r("./identifier");Object.defineProperty(e,"isIdentifierChar",{enumerable:!0,get:function(){return f.isIdentifierChar}}),Object.defineProperty(e,"isIdentifierStart",{enumerable:!0,get:function(){return f.isIdentifierStart}});var h=r("./tokenize");Object.defineProperty(e,"Token",{enumerable:!0,get:function(){return h.Token}});var m=r("./whitespace");Object.defineProperty(e,"isNewLine",{enumerable:!0,get:function(){return m.isNewLine}}),Object.defineProperty(e,"lineBreak",{enumerable:!0,get:function(){return m.lineBreak}}),Object.defineProperty(e,"lineBreakG",{enumerable:!0,get:function(){return m.lineBreakG}}),Object.defineProperty(e,"nonASCIIwhitespace",{enumerable:!0,get:function(){return m.nonASCIIwhitespace}}),e.parse=n,e.parseExpressionAt=o,e.tokenizer=i,e.addLooseExports=s,r("./parseutil"),r("./statement"),r("./lval"),r("./expression"),r("./location"),r("./scope");var y=(e.version="5.1.1",e.parse_dammit=void 0),g=e.LooseParser=void 0,v=e.pluginsLoose=void 0},"location.js":function(e,t,r){var n=r("./state"),o=r("./locutil"),i=n.Parser.prototype;i.raise=function(e,t){var r=(0,o.getLineInfo)(this.input,e);t+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(t);throw n.pos=e,n.loc=r,n.raisedAt=this.pos,n},i.raiseRecoverable=i.raise,i.curPosition=function(){if(this.options.locations)return new o.Position(this.curLine,this.pos-this.lineStart)}},"locutil.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=1,n=0;;){i.lineBreakG.lastIndex=n;var o=i.lineBreakG.exec(e);if(!(o&&o.index<t))return new s(r,t-n);++r,n=o.index+o[0].length}}e.__esModule=!0,e.SourceLocation=e.Position=void 0,e.getLineInfo=o;var i=r("./whitespace"),s=e.Position=function(){function e(t,r){n(this,e),this.line=t,this.column=r}return e.prototype.offset=function(t){return new e(this.line,this.column+t)},e}();e.SourceLocation=function a(e,t,r){n(this,a),this.start=t,this.end=r,null!==e.sourceFile&&(this.source=e.sourceFile)}},"lval.js":function(e,t,r){var n=r("./tokentype"),o=r("./state"),i=r("./util"),s=o.Parser.prototype;s.toAssignable=function(e,t){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":e.type="ObjectPattern";for(var r=0,n=e.properties;r<n.length;r++){var o=n[r];"init"!==o.kind&&this.raise(o.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(o.value,t)}break;case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements,t);break;case"AssignmentExpression":if("="!==e.operator){this.raise(e.left.end,"Only '=' operator can be used for specifying default value.");break}e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}return e},s.toAssignableList=function(e,t){var r=e.length;if(r){var n=e[r-1];if(n&&"RestElement"==n.type)--r;else if(n&&"SpreadElement"==n.type){n.type="RestElement";var o=n.argument;this.toAssignable(o,t),--r}6===this.options.ecmaVersion&&t&&n&&"RestElement"===n.type&&"Identifier"!==n.argument.type&&this.unexpected(n.argument.start)}for(var i=0;i<r;i++){var s=e[i];s&&this.toAssignable(s,t)}return e},s.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},s.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==n.types.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},s.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case n.types.name:return this.parseIdent();case n.types.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(n.types.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case n.types.braceL:return this.parseObj(!0);default:this.unexpected()}},s.parseBindingList=function(e,t,r){for(var o=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(n.types.comma),t&&this.type===n.types.comma)o.push(null);else{if(r&&this.afterTrailingComma(e))break;if(this.type===n.types.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),o.push(s),this.type===n.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),o.push(a)}return o},s.parseBindingListItem=function(e){return e},s.parseMaybeDefault=function(e,t,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(n.types.eq))return r;var o=this.startNodeAt(e,t);return o.left=r,o.right=this.parseMaybeAssign(),this.finishNode(o,"AssignmentPattern")},s.checkLVal=function(e,t,r){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&((0,i.has)(r,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),r[e.name]=!0),t&&"none"!==t&&(("var"===t&&!this.canDeclareVarName(e.name)||"var"!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,"Identifier '"+e.name+"' has already been declared"),"var"===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case"MemberExpression":t&&this.raiseRecoverable(e.start,(t?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var n=0,o=e.properties;n<o.length;n++){var s=o[n];this.checkLVal(s.value,t,r)}break;case"ArrayPattern":for(var a=0,l=e.elements;a<l.length;a++){var u=l[a];u&&this.checkLVal(u,t,r)}break;case"AssignmentPattern":this.checkLVal(e.left,t,r);break;case"RestElement":this.checkLVal(e.argument,t,r);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,r);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}}},"node.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r,n){return e.type=t,e.end=r,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=r),e}e.__esModule=!0,e.Node=void 0;var i=r("./state"),s=r("./locutil"),a=e.Node=function u(e,t,r){n(this,u),this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new s.SourceLocation(e,r)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},l=i.Parser.prototype;l.startNode=function(){return new a(this,this.start,this.startLoc)},l.startNodeAt=function(e,t){return new a(this,e,t)},l.finishNode=function(e,t){return o.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},l.finishNodeAt=function(e,t,r,n){return o.call(this,e,t,r,n)}},"options.js":function(e,t,r){function n(e){var t={};for(var r in a)t[r]=e&&(0,i.has)(e,r)?e[r]:a[r];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),(0,i.isArray)(t.onToken)){var n=t.onToken;t.onToken=function(e){return n.push(e)}}return(0,i.isArray)(t.onComment)&&(t.onComment=o(t,t.onComment)),t}function o(e,t){return function(r,n,o,i,a,l){var u={type:r?"Block":"Line",value:n,start:o,end:i};e.locations&&(u.loc=new s.SourceLocation(this,a,l)),e.ranges&&(u.range=[o,i]),t.push(u)}}e.__esModule=!0,e.defaultOptions=void 0,e.getOptions=n;var i=r("./util"),s=r("./locutil"),a=e.defaultOptions={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}}},"parseutil.js":function(e,t,r){function n(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=-1}e.__esModule=!0,e.DestructuringErrors=n;var o=r("./tokentype"),i=r("./state"),s=r("./whitespace"),a=i.Parser.prototype,l=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;a.strictDirective=function(e){for(;;){s.skipWhiteSpace.lastIndex=e,e+=s.skipWhiteSpace.exec(this.input)[0].length;var t=l.exec(this.input.slice(e));if(!t)return!1;if("use strict"==(t[1]||t[2]))return!1;e+=t[0].length}},a.eat=function(e){return this.type===e&&(this.next(),!0)},a.isContextual=function(e){return this.type===o.types.name&&this.value===e},a.eatContextual=function(e){return this.value===e&&this.eat(o.types.name)},a.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},a.canInsertSemicolon=function(){return this.type===o.types.eof||this.type===o.types.braceR||s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},a.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},a.semicolon=function(){this.eat(o.types.semi)||this.insertSemicolon()||this.unexpected()},a.afterTrailingComma=function(e,t){if(this.type==e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},a.expect=function(e){this.eat(e)||this.unexpected()},a.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},a.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var r=t?e.parenthesizedAssign:e.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},a.checkExpressionErrors=function(e,t){var r=e?e.shorthandAssign:-1;return t?void(r>-1&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns")):r>=0},a.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},a.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type}},"scope.js":function(e,t,r){var n=r("./state"),o=r("./util"),i=n.Parser.prototype,s=Object.assign||function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=0;i<r.length;i++){var s=r[i];for(var a in s)(0,o.has)(s,a)&&(e[a]=s[a])}return e};i.enterFunctionScope=function(){this.scopeStack.push({"var":{},lexical:{},childVar:{},parentLexical:{}})},i.exitFunctionScope=function(){this.scopeStack.pop()},i.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={"var":{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),s(t.parentLexical,e.lexical,e.parentLexical)},i.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];s(t.childVar,e["var"],e.childVar)},i.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!(0,o.has)(t.lexical,e)&&!(0,o.has)(t.parentLexical,e)},i.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!(0,o.has)(t.lexical,e)&&!(0,o.has)(t["var"],e)&&!(0,o.has)(t.childVar,e)},i.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1]["var"][e]=!0},i.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0}},"state.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}e.__esModule=!0,e.Parser=e.plugins=void 0;var i=r("./identifier"),s=r("./tokentype"),a=r("./whitespace"),l=r("./options"),u=e.plugins={};e.Parser=function(){function e(t,r,u){n(this,e),this.options=t=(0,l.getOptions)(t),this.sourceFile=t.sourceFile,this.keywords=o(i.keywords[t.ecmaVersion>=6?6:5]);var c="";if(!t.allowReserved){for(var p=t.ecmaVersion;!(c=i.reservedWords[p]);p--);"module"==t.sourceType&&(c+=" await")}this.reservedWords=o(c);var d=(c?c+" ":"")+i.reservedWords.strict;this.reservedWordsStrict=o(d),this.reservedWordsStrictBind=o(d+" "+i.reservedWords.strictBind),this.input=String(r),this.containsEsc=!1,this.loadPlugins(t.plugins),u?(this.pos=u,this.lineStart=this.input.lastIndexOf("\n",u-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(a.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=s.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope()}return e.prototype.isKeyword=function(e){return this.keywords.test(e)},e.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},e.prototype.extend=function(e,t){this[e]=t(this[e])},e.prototype.loadPlugins=function(e){for(var t in e){var r=u[t];if(!r)throw new Error("Plugin '"+t+"' not found");r(this,e[t])}},e.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},e}()},"statement.js":function(e,t,r){var n=r("./tokentype"),o=r("./state"),i=r("./whitespace"),s=r("./identifier"),a=r("./util"),l=r("./parseutil"),u=o.Parser.prototype;u.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==n.types.eof;){var r=this.parseStatement(!0,!0,t);e.body.push(r)}return this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var c={kind:"loop"},p={kind:"switch"};u.isLet=function(){if(this.type!==n.types.name||this.options.ecmaVersion<6||"let"!=this.value)return!1;i.skipWhiteSpace.lastIndex=this.pos;var e=i.skipWhiteSpace.exec(this.input),t=this.pos+e[0].length,r=this.input.charCodeAt(t);if(91===r||123==r)return!0;if((0,s.isIdentifierStart)(r,!0)){for(var o=t+1;(0,s.isIdentifierChar)(this.input.charCodeAt(o),!0);)++o;var a=this.input.slice(t,o);if(!this.isKeyword(a))return!0}return!1},u.isAsyncFunction=function(){if(this.type!==n.types.name||this.options.ecmaVersion<8||"async"!=this.value)return!1;i.skipWhiteSpace.lastIndex=this.pos;var e=i.skipWhiteSpace.exec(this.input),t=this.pos+e[0].length;return!(i.lineBreak.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!=this.input.length&&(0,s.isIdentifierChar)(this.input.charAt(t+8)))},u.parseStatement=function(e,t,r){var o=this.type,i=this.startNode(),s=void 0;switch(this.isLet()&&(o=n.types._var,s="let"),o){case n.types._break:case n.types._continue:return this.parseBreakContinueStatement(i,o.keyword);case n.types._debugger:return this.parseDebuggerStatement(i);case n.types._do:return this.parseDoStatement(i);case n.types._for:return this.parseForStatement(i);case n.types._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1);case n.types._class:return e||this.unexpected(),this.parseClass(i,!0);case n.types._if:return this.parseIfStatement(i);case n.types._return:return this.parseReturnStatement(i);case n.types._switch:return this.parseSwitchStatement(i);case n.types._throw:return this.parseThrowStatement(i);case n.types._try:return this.parseTryStatement(i);case n.types._const:case n.types._var:return s=s||this.value,e||"var"==s||this.unexpected(),this.parseVarStatement(i,s);case n.types._while:return this.parseWhileStatement(i);case n.types._with:return this.parseWithStatement(i);case n.types.braceL:return this.parseBlock();case n.types.semi:return this.parseEmptyStatement(i);case n.types._export:case n.types._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),o===n.types._import?this.parseImport(i):this.parseExport(i,r);default:if(this.isAsyncFunction()&&e)return this.next(),this.parseFunctionStatement(i,!0);var a=this.value,l=this.parseExpression();return o===n.types.name&&"Identifier"===l.type&&this.eat(n.types.colon)?this.parseLabeledStatement(i,a,l):this.parseExpressionStatement(i,l)}},u.parseBreakContinueStatement=function(e,t){var r="break"==t;this.next(),this.eat(n.types.semi)||this.insertSemicolon()?e.label=null:this.type!==n.types.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var o=0;o<this.labels.length;++o){var i=this.labels[o];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(r||"loop"===i.kind))break;if(e.label&&r)break}}return o===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,r?"BreakStatement":"ContinueStatement")},u.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},u.parseDoStatement=function(e){return this.next(),this.labels.push(c),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(n.types._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(n.types.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},u.parseForStatement=function(e){if(this.next(),this.labels.push(c),this.enterLexicalScope(),this.expect(n.types.parenL),this.type===n.types.semi)return this.parseFor(e,null);var t=this.isLet();if(this.type===n.types._var||this.type===n.types._const||t){var r=this.startNode(),o=t?"let":this.value;return this.next(),this.parseVar(r,!0,o),this.finishNode(r,"VariableDeclaration"),!(this.type===n.types._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==o&&r.declarations[0].init?this.parseFor(e,r):this.parseForIn(e,r)}var i=new l.DestructuringErrors,s=this.parseExpression(!0,i);return this.type===n.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.toAssignable(s),this.checkLVal(s),this.checkPatternErrors(i,!0),this.parseForIn(e,s)):(this.checkExpressionErrors(i,!0),this.parseFor(e,s))},u.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},u.isFunction=function(){return this.type===n.types._function||this.isAsyncFunction()},u.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.isFunction()),e.alternate=this.eat(n.types._else)?this.parseStatement(!this.strict&&this.isFunction()):null,this.finishNode(e,"IfStatement")},u.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(n.types.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},u.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(n.types.braceL),this.labels.push(p),this.enterLexicalScope();for(var t=void 0,r=!1;this.type!=n.types.braceR;)if(this.type===n.types._case||this.type===n.types._default){var o=this.type===n.types._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),o?t.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,t.test=null),this.expect(n.types.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return this.exitLexicalScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},u.parseThrowStatement=function(e){return this.next(),i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var d=[];u.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===n.types._catch){var t=this.startNode();this.next(),this.expect(n.types.parenL),t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,"let"),this.expect(n.types.parenR),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(n.types._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},u.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},u.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(c),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},u.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},u.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},u.parseLabeledStatement=function(e,t,r){for(var o=0,i=this.labels;o<i.length;o++){var s=i[o];s.name===t&&this.raise(r.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===n.types._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart!=e.start)break;u.statementStart=this.start,u.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(!0),("ClassDeclaration"==e.body.type||"VariableDeclaration"==e.body.type&&"var"!=e.body.kind||"FunctionDeclaration"==e.body.type&&(this.strict||e.body.generator))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")},u.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},u.parseBlock=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.startNode();for(t.body=[],this.expect(n.types.braceL),e&&this.enterLexicalScope();!this.eat(n.types.braceR);){var r=this.parseStatement(!0);t.body.push(r)}return e&&this.exitLexicalScope(),this.finishNode(t,"BlockStatement")},u.parseFor=function(e,t){return e.init=t,this.expect(n.types.semi),e.test=this.type===n.types.semi?null:this.parseExpression(),this.expect(n.types.semi),e.update=this.type===n.types.parenR?null:this.parseExpression(),this.expect(n.types.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},u.parseForIn=function(e,t){var r=this.type===n.types._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.expect(n.types.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,r)},u.parseVar=function(e,t,r){for(e.declarations=[],e.kind=r;;){var o=this.startNode();if(this.parseVarId(o,r),this.eat(n.types.eq)?o.init=this.parseMaybeAssign(t):"const"!==r||this.type===n.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"==o.id.type||t&&(this.type===n.types._in||this.isContextual("of"))?o.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(o,"VariableDeclarator")),!this.eat(n.types.comma))break}return e},u.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},u.parseFunction=function(e,t,r,o){this.initFunction(e),this.options.ecmaVersion>=6&&!o&&(e.generator=this.eat(n.types.star)),this.options.ecmaVersion>=8&&(e.async=!!o),t&&(e.id="nullableID"===t&&this.type!=n.types.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,"var"));var i=this.inGenerator,s=this.inAsync,a=this.yieldPos,l=this.awaitPos,u=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type==n.types.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,r),this.inGenerator=i,this.inAsync=s,this.yieldPos=a,this.awaitPos=l,this.inFunction=u,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},u.parseFunctionParams=function(e){this.expect(n.types.parenL),e.params=this.parseBindingList(n.types.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},u.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),o=!1;for(r.body=[],this.expect(n.types.braceL);!this.eat(n.types.braceR);)if(!this.eat(n.types.semi)){var i=this.startNode(),s=this.eat(n.types.star),a=!1,l=this.type===n.types.name&&"static"===this.value;this.parsePropertyName(i),i["static"]=l&&this.type!==n.types.parenL,i["static"]&&(s&&this.unexpected(),s=this.eat(n.types.star),this.parsePropertyName(i)),this.options.ecmaVersion>=8&&!s&&!i.computed&&"Identifier"===i.key.type&&"async"===i.key.name&&this.type!==n.types.parenL&&!this.canInsertSemicolon()&&(a=!0,this.parsePropertyName(i)),i.kind="method";var u=!1;if(!i.computed){var c=i.key;s||a||"Identifier"!==c.type||this.type===n.types.parenL||"get"!==c.name&&"set"!==c.name||(u=!0,i.kind=c.name,c=this.parsePropertyName(i)),!i["static"]&&("Identifier"===c.type&&"constructor"===c.name||"Literal"===c.type&&"constructor"===c.value)&&(o&&this.raise(c.start,"Duplicate constructor in the same class"),u&&this.raise(c.start,"Constructor can't have get/set modifier"),s&&this.raise(c.start,"Constructor can't be a generator"),a&&this.raise(c.start,"Constructor can't be an async method"),i.kind="constructor",o=!0)}if(this.parseClassMethod(r,i,s,a),u){var p="get"===i.kind?0:1;if(i.value.params.length!==p){var d=i.value.start;"get"===i.kind?this.raiseRecoverable(d,"getter should have no params"):this.raiseRecoverable(d,"setter should have exactly one param")}else"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")}}return e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},u.parseClassMethod=function(e,t,r,n){t.value=this.parseMethod(r,n),e.body.push(this.finishNode(t,"MethodDefinition"))},u.parseClassId=function(e,t){e.id=this.type===n.types.name?this.parseIdent():t===!0?this.unexpected():null},u.parseClassSuper=function(e){e.superClass=this.eat(n.types._extends)?this.parseExprSubscripts():null},u.parseExport=function(e,t){if(this.next(),this.eat(n.types.star))return this.expectContextual("from"),e.source=this.type===n.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(n.types._default)){this.checkExport(t,"default",this.lastTokStart);var r=void 0;if(this.type===n.types._function||(r=this.isAsyncFunction())){var o=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(o,"nullableID",!1,r)}else if(this.type===n.types._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))e.source=this.type===n.types.string?this.parseExprAtom():this.unexpected();else{for(var s=0,a=e.specifiers;s<a.length;s++){var l=a[s];this.checkUnreserved(l.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},u.checkExport=function(e,t,r){e&&((0,a.has)(e,t)&&this.raiseRecoverable(r,"Duplicate export '"+t+"'"),e[t]=!0)},u.checkPatternExport=function(e,t){var r=t.type;if("Identifier"==r)this.checkExport(e,t.name,t.start);else if("ObjectPattern"==r)for(var n=0,o=t.properties;n<o.length;n++){var i=o[n];this.checkPatternExport(e,i.value)}else if("ArrayPattern"==r)for(var s=0,a=t.elements;s<a.length;s++){var l=a[s];l&&this.checkPatternExport(e,l);
}else"AssignmentPattern"==r?this.checkPatternExport(e,t.left):"ParenthesizedExpression"==r&&this.checkPatternExport(e,t.expression)},u.checkVariableExport=function(e,t){if(e)for(var r=0;r<t.length;r++){var n=t[r];this.checkPatternExport(e,n.id)}},u.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},u.parseExportSpecifiers=function(e){var t=[],r=!0;for(this.expect(n.types.braceL);!this.eat(n.types.braceR);){if(r)r=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;var o=this.startNode();o.local=this.parseIdent(!0),o.exported=this.eatContextual("as")?this.parseIdent(!0):o.local,this.checkExport(e,o.exported.name,o.exported.start),t.push(this.finishNode(o,"ExportSpecifier"))}return t},u.parseImport=function(e){return this.next(),this.type===n.types.string?(e.specifiers=d,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===n.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},u.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===n.types.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,"let"),e.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(n.types.comma))return e}if(this.type===n.types.star){var o=this.startNode();return this.next(),this.expectContextual("as"),o.local=this.parseIdent(),this.checkLVal(o.local,"let"),e.push(this.finishNode(o,"ImportNamespaceSpecifier")),e}for(this.expect(n.types.braceL);!this.eat(n.types.braceR);){if(t)t=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,"let"),e.push(this.finishNode(i,"ImportSpecifier"))}return e}},"tokencontext.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.types=e.TokContext=void 0;var o=r("./state"),i=r("./tokentype"),s=r("./whitespace"),a=e.TokContext=function c(e,t,r,o,i){n(this,c),this.token=e,this.isExpr=!!t,this.preserveSpace=!!r,this.override=o,this.generator=!!i},l=e.types={b_stat:new a("{",(!1)),b_expr:new a("{",(!0)),b_tmpl:new a("${",(!1)),p_stat:new a("(",(!1)),p_expr:new a("(",(!0)),q_tmpl:new a("`",(!0),(!0),function(e){return e.tryReadTemplateToken()}),f_stat:new a("function",(!1)),f_expr:new a("function",(!0)),f_expr_gen:new a("function",(!0),(!1),null,(!0)),f_gen:new a("function",(!1),(!1),null,(!0))},u=o.Parser.prototype;u.initialContext=function(){return[l.b_stat]},u.braceIsBlock=function(e){var t=this.curContext();return t===l.f_expr||t===l.f_stat||(e!==i.types.colon||t!==l.b_stat&&t!==l.b_expr?e===i.types._return||e==i.types.name&&this.exprAllowed?s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===i.types._else||e===i.types.semi||e===i.types.eof||e===i.types.parenR||e==i.types.arrow||(e==i.types.braceL?t===l.b_stat:e!=i.types._var&&e!=i.types.name&&!this.exprAllowed):!t.isExpr)},u.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},u.updateContext=function(e){var t=void 0,r=this.type;r.keyword&&e==i.types.dot?this.exprAllowed=!1:(t=r.updateContext)?t.call(this,e):this.exprAllowed=r.beforeExpr},i.types.parenR.updateContext=i.types.braceR.updateContext=function(){if(1==this.context.length)return void(this.exprAllowed=!0);var e=this.context.pop();e===l.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},i.types.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?l.b_stat:l.b_expr),this.exprAllowed=!0},i.types.dollarBraceL.updateContext=function(){this.context.push(l.b_tmpl),this.exprAllowed=!0},i.types.parenL.updateContext=function(e){var t=e===i.types._if||e===i.types._for||e===i.types._with||e===i.types._while;this.context.push(t?l.p_stat:l.p_expr),this.exprAllowed=!0},i.types.incDec.updateContext=function(){},i.types._function.updateContext=i.types._class.updateContext=function(e){e.beforeExpr&&e!==i.types.semi&&e!==i.types._else&&(e!==i.types.colon&&e!==i.types.braceL||this.curContext()!==l.b_stat)?this.context.push(l.f_expr):this.context.push(l.f_stat),this.exprAllowed=!1},i.types.backQuote.updateContext=function(){this.curContext()===l.q_tmpl?this.context.pop():this.context.push(l.q_tmpl),this.exprAllowed=!1},i.types.star.updateContext=function(e){if(e==i.types._function){var t=this.context.length-1;this.context[t]===l.f_expr?this.context[t]=l.f_expr_gen:this.context[t]=l.f_gen}this.exprAllowed=!0},i.types.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&("of"==this.value&&!this.exprAllowed||"yield"==this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t}},"tokenize.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r,n){try{return new RegExp(e,t)}catch(o){if(void 0!==r)throw o instanceof SyntaxError&&n.raise(r,"Error parsing regular expression: "+o.message),o}}function i(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(1023&e)+56320))}e.__esModule=!0,e.Token=void 0;var s=r("./identifier"),a=r("./tokentype"),l=r("./state"),u=r("./locutil"),c=r("./whitespace"),p=e.Token=function y(e){n(this,y),this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new u.SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},d=l.Parser.prototype,f="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);d.next=function(){this.options.onToken&&this.options.onToken(new p(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},d.getToken=function(){return this.next(),new p(this)},"undefined"!=typeof Symbol&&(d[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===a.types.eof,value:t}}}}),d.curContext=function(){return this.context[this.context.length-1]},d.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(a.types.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},d.readToken=function(e){return(0,s.isIdentifierStart)(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},d.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},d.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(r===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations){c.lineBreakG.lastIndex=t;for(var n=void 0;(n=c.lineBreakG.exec(this.input))&&n.index<this.pos;)++this.curLine,this.lineStart=n.index+n[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,r),t,this.pos,e,this.curPosition())},d.skipLineComment=function(e){for(var t=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!(0,c.isNewLine)(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,r,this.curPosition())},d.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&c.nonASCIIwhitespace.test(String.fromCharCode(e))))break e;++this.pos}}},d.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=e,this.value=t,this.updateContext(r)},d.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(a.types.ellipsis)):(++this.pos,this.finishToken(a.types.dot))},d.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(a.types.assign,2):this.finishOp(a.types.slash,1)},d.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),r=1,n=42===e?a.types.star:a.types.modulo;return this.options.ecmaVersion>=7&&42===t&&(++r,n=a.types.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(a.types.assign,r+1):this.finishOp(n,r)},d.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?a.types.logicalOR:a.types.logicalAND,2):61===t?this.finishOp(a.types.assign,2):this.finishOp(124===e?a.types.bitwiseOR:a.types.bitwiseAND,1)},d.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(a.types.assign,2):this.finishOp(a.types.bitwiseXOR,1)},d.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!=t||this.inModule||62!=this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!c.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(a.types.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(a.types.assign,2):this.finishOp(a.types.plusMin,1)},d.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),r=1;return t===e?(r=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(a.types.assign,r+1):this.finishOp(a.types.bitShift,r)):33!=t||60!=e||this.inModule||45!=this.input.charCodeAt(this.pos+2)||45!=this.input.charCodeAt(this.pos+3)?(61===t&&(r=2),this.finishOp(a.types.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},d.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(a.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(a.types.arrow)):this.finishOp(61===e?a.types.eq:a.types.prefix,1)},d.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(a.types.parenL);case 41:return++this.pos,this.finishToken(a.types.parenR);case 59:return++this.pos,this.finishToken(a.types.semi);case 44:return++this.pos,this.finishToken(a.types.comma);case 91:return++this.pos,this.finishToken(a.types.bracketL);case 93:return++this.pos,this.finishToken(a.types.bracketR);case 123:return++this.pos,this.finishToken(a.types.braceL);case 125:return++this.pos,this.finishToken(a.types.braceR);case 58:return++this.pos,this.finishToken(a.types.colon);case 63:return++this.pos,this.finishToken(a.types.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(a.types.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(a.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+i(e)+"'")},d.finishOp=function(e,t){var r=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,r)};var h=!!o("","u");d.readRegexp=function(){for(var e=this,t=void 0,r=void 0,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(c.lineBreak.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===i)r=!0;else if("]"===i&&r)r=!1;else if("/"===i&&!r)break;t="\\"===i}++this.pos}var s=this.input.slice(n,this.pos);++this.pos;var l=this.readWord1(),u=s,p="";if(l){var d=/^[gim]*$/;this.options.ecmaVersion>=6&&(d=/^[gimuy]*$/),d.test(l)||this.raise(n,"Invalid regular expression flag"),l.indexOf("u")>=0&&(h?p="u":(u=u.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,r,o){return r=Number("0x"+r),r>1114111&&e.raise(n+o+3,"Code point out of bounds"),"x"}),u=u.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"),p=p.replace("u","")))}var m=null;return f||(o(u,p,n,this),m=o(s,l)),this.finishToken(a.types.regexp,{pattern:s,flags:l,value:m})},d.readInt=function(e,t){for(var r=this.pos,n=0,o=0,i=null==t?1/0:t;o<i;++o){var s=this.input.charCodeAt(this.pos),a=void 0;if(a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0,a>=e)break;++this.pos,n=n*e+a}return this.pos===r||null!=t&&this.pos-r!==t?null:n},d.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),(0,s.isIdentifierStart)(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(a.types.num,t)},d.readNumber=function(e){var t=this.pos,r=!1,n=48===this.input.charCodeAt(this.pos);e||null!==this.readInt(10)||this.raise(t,"Invalid number"),n&&this.pos==t+1&&(n=!1);var o=this.input.charCodeAt(this.pos);46!==o||n||(++this.pos,this.readInt(10),r=!0,o=this.input.charCodeAt(this.pos)),69!==o&&101!==o||n||(o=this.input.charCodeAt(++this.pos),43!==o&&45!==o||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number"),r=!0),(0,s.isIdentifierStart)(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),l=void 0;return r?l=parseFloat(i):n&&1!==i.length?this.strict?this.raise(t,"Invalid number"):l=/[89]/.test(i)?parseInt(i,10):parseInt(i,8):l=parseInt(i,10),this.finishToken(a.types.num,l)},d.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t=void 0;if(123===e){this.options.ecmaVersion<6&&this.unexpected();var r=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(r,"Code point out of bounds")}else t=this.readHexChar(4);return t},d.readString=function(e){for(var t="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;92===n?(t+=this.input.slice(r,this.pos),t+=this.readEscapedChar(!1),r=this.pos):((0,c.isNewLine)(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(r,this.pos++),this.finishToken(a.types.string,t)};var m={};d.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==m)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},d.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw m;this.raise(e,t)},d.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==a.types.template&&this.type!==a.types.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(a.types.template,e)):36===r?(this.pos+=2,this.finishToken(a.types.dollarBraceL)):(++this.pos,this.finishToken(a.types.backQuote));if(92===r)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if((0,c.isNewLine)(r)){switch(e+=this.input.slice(t,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},d.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(a.types.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},d.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return i(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(r,8);return n>255&&(r=r.slice(0,-1),n=parseInt(r,8)),"0"!==r&&(this.strict||e)&&this.invalidStringToken(this.pos-2,"Octal literal in strict mode"),this.pos+=r.length-1,String.fromCharCode(n)}return String.fromCharCode(t)}},d.readHexChar=function(e){var t=this.pos,r=this.readInt(16,e);return null===r&&this.invalidStringToken(t,"Bad character escape sequence"),r},d.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,r=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var o=this.fullCharCodeAtPos();if((0,s.isIdentifierChar)(o,n))this.pos+=o<=65535?1:2;else{if(92!==o)break;this.containsEsc=!0,e+=this.input.slice(r,this.pos);var i=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?s.isIdentifierStart:s.isIdentifierChar)(a,n)||this.invalidStringToken(i,"Invalid Unicode escape"),e+=this.input.substr(this.pos-6,6),r=this.pos}t=!1}return e+this.input.slice(r,this.pos)},d.readWord=function(){var e=this.readWord1(),t=a.types.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=a.keywords[e]),this.finishToken(t,e)}},"tokentype.js":function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return new s(e,{beforeExpr:!0,binop:t})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.keyword=e,u[e]=new s(e,t)}e.__esModule=!0;var s=e.TokenType=function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,c),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null},a={beforeExpr:!0},l={startsExpr:!0},u=e.keywords={};e.types={num:new s("num",l),regexp:new s("regexp",l),string:new s("string",l),name:new s("name",l),eof:new s("eof"),bracketL:new s("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new s("]"),braceL:new s("{",{beforeExpr:!0,startsExpr:!0}),braceR:new s("}"),parenL:new s("(",{beforeExpr:!0,startsExpr:!0}),parenR:new s(")"),comma:new s(",",a),semi:new s(";",a),colon:new s(":",a),dot:new s("."),question:new s("?",a),arrow:new s("=>",a),template:new s("template"),invalidTemplate:new s("invalidTemplate"),ellipsis:new s("...",a),backQuote:new s("`",l),dollarBraceL:new s("${",{beforeExpr:!0,startsExpr:!0}),eq:new s("=",{beforeExpr:!0,isAssign:!0}),assign:new s("_=",{beforeExpr:!0,isAssign:!0}),incDec:new s("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new s("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:o("||",1),logicalAND:o("&&",2),bitwiseOR:o("|",3),bitwiseXOR:o("^",4),bitwiseAND:o("&",5),equality:o("==/!=",6),relational:o("</>",7),bitShift:o("<</>>",8),plusMin:new s("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:o("%",10),star:o("*",10),slash:o("/",10),starstar:new s("**",{beforeExpr:!0}),_break:i("break"),_case:i("case",a),_catch:i("catch"),_continue:i("continue"),_debugger:i("debugger"),_default:i("default",a),_do:i("do",{isLoop:!0,beforeExpr:!0}),_else:i("else",a),_finally:i("finally"),_for:i("for",{isLoop:!0}),_function:i("function",l),_if:i("if"),_return:i("return",a),_switch:i("switch"),_throw:i("throw",a),_try:i("try"),_var:i("var"),_const:i("const"),_while:i("while",{isLoop:!0}),_with:i("with"),_new:i("new",{beforeExpr:!0,startsExpr:!0}),_this:i("this",l),_super:i("super",l),_class:i("class",l),_extends:i("extends",a),_export:i("export"),_import:i("import"),_null:i("null",l),_true:i("true",l),_false:i("false",l),_in:i("in",{beforeExpr:!0,binop:7}),_instanceof:i("instanceof",{beforeExpr:!0,binop:7}),_typeof:i("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:i("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:i("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})}},"util.js":function(e,t,r){function n(e,t){return i.call(e,t)}e.__esModule=!0,e.has=n;var o=Object.prototype,i=o.hasOwnProperty,s=o.toString;e.isArray=Array.isArray||function(e){return"[object Array]"===s.call(e)}},"whitespace.js":function(e,t,r){function n(e){return 10===e||13===e||8232===e||8233===e}e.__esModule=!0,e.isNewLine=n;var o=e.lineBreak=/\r\n?|\n|\u2028|\u2029/;e.lineBreakG=new RegExp(o.source,"g"),e.nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,e.skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g}},"esotope.js":function(e,t,r){"use strict";function n(){return{indent:null,base:null,parse:null,format:{indent:{style:"    ",base:0},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1},directive:!1,raw:!0,verbatim:null}}function o(e){if(e<128)return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||36===e||95===e||92===e;var t=String.fromCharCode(e);return J.test(t)}function i(e){return 10===e||13===e||8232===e||8233===e}function s(e){return 32===e||9===e||i(e)||11===e||12===e||160===e||e>=5760&&Q.indexOf(e)>=0}function a(e){return e>=48&&e<=57}function l(e,t){var r="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(r+=e);return r}function u(e,t){function r(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}var n,o;for(n in t)t.hasOwnProperty(n)&&(o=t[n],r(o)?r(e[n])?u(e[n],o):e[n]=u({},o):e[n]=o);return e}function c(e){var t,r,n,o,i;if(e===1/0)return R?"null":U?"1e400":"1e+400";if(t=""+e,!U||t.length<3)return t;for(r=t.indexOf("."),R||48!==t.charCodeAt(0)||1!==r||(r=0,t=t.slice(1)),n=t,t=t.replace("e+","e"),o=0,(i=n.indexOf("e"))>0&&(o=+n.slice(i+1),n=n.slice(0,i)),r>=0&&(o-=n.length-r-1,n=+(n.slice(0,r)+n.slice(r+1))+""),i=0;48===n.charCodeAt(n.length+i-1);)--i;return 0!==i&&(o-=i,n=n.slice(0,i)),0!==o&&(n+="e"+o),(n.length<t.length||H&&e>1e12&&Math.floor(e)===e&&(n="0x"+e.toString(16)).length<t.length)&&+n===e&&(t=n),t}function p(e,t){return 8232===(e&-2)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function d(e){var t,r,n,o,i,s,a,l;if(r=e.toString(),e.source){if(t=r.match(/\/([^\/]*)$/),!t)return r;for(n=t[1],r="",a=!1,l=!1,o=0,i=e.source.length;o<i;++o)s=e.source.charCodeAt(o),l?(r+=p(s,l),l=!1):(a?93===s&&(a=!1):47===s?r+="\\":91===s&&(a=!0),r+=p(s,l),l=92===s);return"/"+r+"/"+n}return r}function f(e,t){var r,n="\\";switch(e){case 8:n+="b";break;case 12:n+="f";break;case 9:n+="t";break;default:r=e.toString(16).toUpperCase(),n+=R||e>255?"u"+"0000".slice(r.length)+r:0!==e||a(t)?11===e?"x0B":"x"+"00".slice(r.length)+r:"0"}return n}function h(e){var t="\\";switch(e){case 92:t+="\\";break;case 10:t+="n";break;case 13:t+="r";break;case 8232:t+="u2028";break;case 8233:t+="u2029"}return t}function m(e){var t,r,n,o;for(o="double"===F?'"':"'",t=0,r=e.length;t<r;++t){if(n=e.charCodeAt(t),39===n){o='"';break}if(34===n){o="'";break}92===n&&++t}return o+e+o}function y(e){var t,r,n,o,s,a="",l=0,u=0;for(t=0,r=e.length;t<r;++t){if(n=e.charCodeAt(t),39===n)++l;else if(34===n)++u;else if(47===n&&R)a+="\\";else{if(i(n)||92===n){a+=h(n);continue}if(R&&n<32||!(R||B||n>=32&&n<=126)){a+=f(n,e.charCodeAt(t+1));continue}}a+=String.fromCharCode(n)}if(o=!("double"===F||"auto"===F&&u<l),s=o?"'":'"',!(o?l:u))return s+a+s;for(e=a,a=s,t=0,r=e.length;t<r;++t)n=e.charCodeAt(t),(39===n&&o||34===n&&!o)&&(a+="\\"),a+=String.fromCharCode(n);return a+s}function g(e,t){if(!e.length)return t;if(!t.length)return e;var r=e.charCodeAt(e.length-1),n=t.charCodeAt(0);return o(r)&&o(n)||r===n&&(43===r||45===r)||47===r&&105===n?e+ie.space+t:s(r)||s(n)?e+t:e+ie.optSpace+t}function v(){var e=ie.indent;return ie.indent+=ie.indentUnit,e}function E(e){return e.type===$.BlockStatement?ie.optSpace:e.type===$.EmptyStatement?"":ie.newline+ie.indent+ie.indentUnit}function b(e){return e.type===$.BlockStatement?ie.optSpace:ie.newline+ie.indent}function S(e,t){var r=e[K.verbatim],n="string"==typeof r,o=n||void 0===r.precedence?Y.Sequence:r.precedence,i=o<t.precedence,s=n?r:r.content,a=s.split(/\r\n|\n/),l=a.length;i&&(ie.js+="("),ie.js+=a[0];for(var u=1;u<l;u++)ie.js+=ie.newline+ie.indent+a[u];i&&(ie.js+=")")}function w(e){var t=e.params,r=t.length,n=r-1,o=e.type===$.ArrowFunctionExpression&&1===r&&t[0].type===$.Identifier;if(o)ie.js+=t[0].name;else{ie.js+="(";for(var i=0;i<r;++i){var s=t[i];t[i].type===$.Identifier?ie.js+=s.name:se[s.type](s,Z.e4),i!==n&&(ie.js+=","+ie.optSpace)}ie.js+=")"}}function _(e){var t=e.body;if(w(e),e.type===$.ArrowFunctionExpression&&(ie.js+=ie.optSpace+"=>"),e.expression){ie.js+=ie.optSpace;var r=I(t,Z.e4);"{"===r.charAt(0)&&(r="("+r+")"),ie.js+=r}else ie.js+=E(t),ae[t.type](t,Z.s8)}function x(e,t){var r=e.operator,n=z[e.operator],i=n<t.precedence,s=t.allowIn||i,a=Z.e16(n,s),l=I(e.left,a);i|="in"===r&&!s,i&&(ie.js+="("),l=47===l.charCodeAt(l.length-1)&&o(r.charCodeAt(0))?l+ie.space+r:g(l,r),a.precedence++;var u=I(e.right,a);"/"===r&&"/"===u.charAt(0)||"<"===r.slice(-1)&&"!--"===u.slice(0,3)?l+=ie.space+u:l=g(l,u),ie.js+=l,i&&(ie.js+=")")}function T(e){var t=e.elements,r=t.length;if(r){var n=r-1,o=r>1,i=v(),s=ie.newline+ie.indent;ie.js+="[";for(var a=0;a<r;a++){var l=t[a];o&&(ie.js+=s),l&&se[l.type](l,Z.e4),a===n&&l||(ie.js+=",")}ie.indent=i,o&&(ie.js+=ie.newline+ie.indent),ie.js+="]"}else ie.js+="[]"}function C(e){ie.js+=e.id.name,e.name&&(ie.js+=ie.space+"as"+ie.space+e.name.name)}function A(e){var t=e.blocks,r=e.filter,n=e.type===$.GeneratorExpression,o=n?"(":"[",i=I(e.body,Z.e4);if(t){for(var s=v(),a=t.length,l=0;l<a;++l){var u=I(t[l],Z.e5);o=l>0?g(o,u):o+u}ie.indent=s}if(r){var c=I(r,Z.e5);o=g(o,"if"+ie.optSpace),o=g(o,"("+c+")")}o=g(o,i),o+=n?")":"]",ie.js+=o}function P(e,t,r){for(var n=r.length,o=n-1,i=0;i<n;++i){var s=M(r[i],Z.s7);e=g(e,s),(t||i!==o)&&(e+=b(r[i].body))}return e}function O(e,t,r){var n=t.body,o=t.left,i=!G&&r.semicolonOptional,s=v(),a="for"+ie.optSpace+"(";if(o.type===$.VariableDeclaration){var l=v();a+=o.kind+ie.space+M(o.declarations[0],Z.s6),ie.indent=l}else a+=I(o,Z.e10);a=g(a,e);var u=I(t.right,Z.e5);a=g(a,u)+")",ie.indent=s,ie.js+=a+E(n),ae[n.type](n,Z.s4(i))}function I(e,t){var r=ie.js;ie.js="",se[e.type](e,t);var n=ie.js;return ie.js=r,n}function M(e,t){var r=ie.js;ie.js="",ae[e.type](e,t);var n=ie.js;return ie.js=r,n}function N(e){return ie.js="",ae[e.type]?ae[e.type](e,Z.s7):se[e.type](e,Z.e19),ie.js}function D(e){return function(t,r){K.verbatim&&t.hasOwnProperty(K.verbatim)?S(t,r):e(t,r)}}function L(){var e={};for(var t in re)re.hasOwnProperty(t)&&(e[t]=D(re[t]));return e}function j(e,t){var r=n();return null!=t?("string"==typeof t.indent&&(r.format.indent.style=t.indent),"number"==typeof t.base&&(r.format.indent.base=t.base),t=u(r,t),ie.indentUnit=t.format.indent.style,"string"==typeof t.base?ie.indent=t.base:ie.indent=l(ie.indentUnit,t.format.indent.base)):(t=r,ie.indentUnit=t.format.indent.style,ie.indent=l(ie.indentUnit,t.format.indent.base)),R=t.format.json,U=t.format.renumber,H=!R&&t.format.hexadecimal,F=R?"double":t.format.quotes,B=t.format.escapeless,ie.newline=t.format.newline,ie.optSpace=t.format.space,t.format.compact&&(ie.newline=ie.optSpace=ie.indentUnit=ie.indent=""),ie.space=ie.optSpace?ie.optSpace:" ",W=t.format.parentheses,G=t.format.semicolons,V=t.format.safeConcatenation,q=t.directive,X=R?null:t.parse,K=t,se=K.verbatim?L():re,N(e)}e.__esModule=!0,e.generate=j;var k,R,U,H,F,B,W,G,V,q,K,X,$=e.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportSpecifier:"ImportSpecifier",ImportDeclaration:"ImportDeclaration",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleDeclaration:"ModuleDeclaration",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},Y={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19},z={"||":Y.LogicalOR,"&&":Y.LogicalAND,"|":Y.BitwiseOR,"^":Y.BitwiseXOR,"&":Y.BitwiseAND,"==":Y.Equality,"!=":Y.Equality,"===":Y.Equality,"!==":Y.Equality,is:Y.Equality,isnt:Y.Equality,"<":Y.Relational,">":Y.Relational,"<=":Y.Relational,">=":Y.Relational,"in":Y.Relational,"instanceof":Y.Relational,"<<":Y.BitwiseSHIFT,">>":Y.BitwiseSHIFT,">>>":Y.BitwiseSHIFT,"+":Y.Additive,
"-":Y.Additive,"*":Y.Multiplicative,"%":Y.Multiplicative,"/":Y.Multiplicative},Q=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],J=new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]");k=Array.isArray,k||(k=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var Z={e1:function(e){return{precedence:Y.Assignment,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e2:function(e){return{precedence:Y.LogicalOR,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e3:{precedence:Y.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1},e4:{precedence:Y.Assignment,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e5:{precedence:Y.Sequence,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e6:function(e){return{precedence:Y.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:e}},e7:{precedence:Y.Unary,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e8:{precedence:Y.Postfix,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e9:{precedence:void 0,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e10:{precedence:Y.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e11:function(e){return{precedence:Y.Call,allowIn:!0,allowCall:e,allowUnparenthesizedNew:!1}},e12:{precedence:Y.Primary,allowIn:!1,allowCall:!1,allowUnparenthesizedNew:!0},e13:{precedence:Y.Primary,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e14:{precedence:Y.Sequence,allowIn:!1,allowCall:!0,allowUnparenthesizedNew:!0},e15:function(e){return{precedence:Y.Sequence,allowIn:!0,allowCall:e,allowUnparenthesizedNew:!0}},e16:function(e,t){return{precedence:e,allowIn:t,allowCall:!0,allowUnparenthesizedNew:!0}},e17:function(e){return{precedence:Y.Call,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e18:function(e){return{precedence:Y.Assignment,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e19:{precedence:Y.Sequence,allowIn:!0,allowCall:!0,semicolonOptional:!1},s1:function(e,t){return{allowIn:!0,functionBody:!1,directiveContext:e,semicolonOptional:t}},s2:{allowIn:!0,functionBody:!1,directiveContext:!1,semicolonOptional:!0},s3:function(e){return{allowIn:e,functionBody:!1,directiveContext:!1,semicolonOptional:!1}},s4:function(e){return{allowIn:!0,functionBody:!1,directiveContext:!1,semicolonOptional:e}},s5:function(e){return{allowIn:!0,functionBody:!1,directiveContext:!0,semicolonOptional:e}},s6:{allowIn:!1,functionBody:!1,directiveContext:!1,semicolonOptional:!1},s7:{allowIn:!0,functionBody:!1,directiveContext:!1,semicolonOptional:!1},s8:{allowIn:!0,functionBody:!0,directiveContext:!1,semicolonOptional:!1}},ee=/[.eExX]|^0[0-9]+/,te=/[0-9]$/,re={SequenceExpression:function(e,t){var r=e.expressions,n=r.length,o=n-1,i=Y.Sequence<t.precedence,s=Z.e1(t.allowIn||i);i&&(ie.js+="(");for(var a=0;a<n;a++){var l=r[a];se[l.type](l,s),a!==o&&(ie.js+=","+ie.optSpace)}i&&(ie.js+=")")},AssignmentExpression:function(e,t){var r=e.left,n=e.right,o=Y.Assignment<t.precedence,i=t.allowIn||o;o&&(ie.js+="("),se[r.type](r,Z.e17(i)),ie.js+=ie.optSpace+e.operator+ie.optSpace,se[n.type](n,Z.e18(i)),o&&(ie.js+=")")},AssignmentPattern:function(e){var t={left:e.left,right:e.right,operator:"="};se.AssignmentExpression(t,Z.e4)},ArrowFunctionExpression:function(e,t){var r=Y.ArrowFunction<t.precedence;e.async&&(ie.js+="async "),r&&(ie.js+="("),_(e),r&&(ie.js+=")")},AwaitExpression:function(e,t){ie.js+="await ",se[e.argument.type](e.argument,t)},ConditionalExpression:function(e,t){var r=e.test,n=e.consequent,o=e.alternate,i=Y.Conditional<t.precedence,s=t.allowIn||i,a=Z.e2(s),l=Z.e1(s);i&&(ie.js+="("),se[r.type](r,a),ie.js+=ie.optSpace+"?"+ie.optSpace,se[n.type](n,l),ie.js+=ie.optSpace+":"+ie.optSpace,se[o.type](o,l),i&&(ie.js+=")")},LogicalExpression:x,BinaryExpression:x,CallExpression:function(e,t){var r=e.callee,n=e.arguments,o=n.length,i=o-1,s=!t.allowCall||Y.Call<t.precedence;s&&(ie.js+="("),se[r.type](r,Z.e3),ie.js+="(";for(var a=0;a<o;++a){var l=n[a];se[l.type](l,Z.e4),a!==i&&(ie.js+=","+ie.optSpace)}ie.js+=")",s&&(ie.js+=")")},NewExpression:function(e,t){var r=e.arguments,n=Y.New<t.precedence,o=r.length,i=o-1,s=!t.allowUnparenthesizedNew||W||o>0,a=I(e.callee,Z.e6(!s));if(n&&(ie.js+="("),ie.js+=g("new",a),s){ie.js+="(";for(var l=0;l<o;++l){var u=r[l];se[u.type](u,Z.e4),l!==i&&(ie.js+=","+ie.optSpace)}ie.js+=")"}n&&(ie.js+=")")},MemberExpression:function(e,t){var r=e.object,n=e.property,o=Y.Member<t.precedence,i=!e.computed&&r.type===$.Literal&&"number"==typeof r.value;if(o&&(ie.js+="("),i){var s=I(r,Z.e11(t.allowCall)),a=te.test(s)&&!ee.test(s);ie.js+=a?s+".":s}else se[r.type](r,Z.e11(t.allowCall));e.computed?(ie.js+="[",se[n.type](n,Z.e15(t.allowCall)),ie.js+="]"):ie.js+="."+n.name,o&&(ie.js+=")")},UnaryExpression:function(e,t){var r=Y.Unary<t.precedence,n=e.operator,i=I(e.argument,Z.e7);if(r&&(ie.js+="("),""===ie.optSpace||n.length>2)ie.js+=g(n,i);else{ie.js+=n;var s=n.charCodeAt(n.length-1),a=i.charCodeAt(0);(s===a&&(43===s||45===s)||o(s)&&o(a))&&(ie.js+=ie.space),ie.js+=i}r&&(ie.js+=")")},YieldExpression:function(e,t){var r=e.argument,n=e.delegate?"yield*":"yield",o=Y.Yield<t.precedence;if(o&&(ie.js+="("),r){var i=I(r,Z.e4);n=g(n,i)}ie.js+=n,o&&(ie.js+=")")},UpdateExpression:function(e,t){var r=e.argument,n=e.operator,o=e.prefix,i=o?Y.Unary:Y.Postfix,s=i<t.precedence;s&&(ie.js+="("),o?(ie.js+=n,se[r.type](r,Z.e8)):(se[r.type](r,Z.e8),ie.js+=n),s&&(ie.js+=")")},FunctionExpression:function(e){var t=!!e.generator;e.async&&(ie.js+="async "),ie.js+=t?"function*":"function",e.id?(ie.js+=t?ie.optSpace:ie.space,ie.js+=e.id.name):ie.js+=ie.optSpace,_(e)},ExportBatchSpecifier:function(){ie.js+="*"},ArrayPattern:T,ArrayExpression:T,ClassExpression:function(e){var t=e.id,r=e.superClass,n=e.body,o="class";if(t){var i=I(t,Z.e9);o=g(o,i)}if(r){var s=I(r,Z.e4);s=g("extends",s),o=g(o,s)}ie.js+=o+ie.optSpace,ae[n.type](n,Z.s2)},MethodDefinition:function(e){var t=e["static"]?"static"+ie.optSpace:"",r=I(e.key,Z.e5);e.computed&&(r="["+r+"]"),"get"===e.kind||"set"===e.kind?(r=g(e.kind,r),ie.js+=g(t,r)):e.value.generator?ie.js+=t+"*"+r:e.value.async?ie.js+=t+" async "+r:ie.js+=g(t,r),_(e.value)},Property:function(e){var t=e.value,r=e.kind,n=I(e.key,Z.e5);e.computed&&(n="["+n+"]"),"get"===r||"set"===r?(ie.js+=r+ie.space+n,_(t)):e.shorthand?ie.js+=n:e.method?(t.generator?n="*"+n:t.async&&(n="async "+n),ie.js+=n,_(t)):(ie.js+=n+":"+ie.optSpace,se[t.type](t,Z.e4))},ObjectExpression:function(e){var t=e.properties,r=t.length;if(r){var n=r-1,o=v();ie.js+="{";for(var i=0;i<r;i++){var s=t[i],a=s.type||$.Property;ie.js+=ie.newline+ie.indent,se[a](s,Z.e5),i!==n&&(ie.js+=",")}ie.indent=o,ie.js+=ie.newline+ie.indent+"}"}else ie.js+="{}"},ObjectPattern:function(e){var t=e.properties,r=t.length;if(r){var n=r-1,o=!1;if(1===r)o=t[0].value.type!==$.Identifier;else for(var i=0;i<r;i++)if(!t[i].shorthand){o=!0;break}ie.js+=o?"{"+ie.newline:"{";for(var s=v(),a=","+(o?ie.newline:ie.optSpace),i=0;i<r;i++){var l=t[i];o&&(ie.js+=ie.indent),se[l.type](l,Z.e5),i!==n&&(ie.js+=a)}ie.indent=s,ie.js+=o?ie.newline+ie.indent+"}":"}"}else ie.js+="{}"},ThisExpression:function(){ie.js+="this"},Identifier:function(e){ie.js+=e.name},ImportSpecifier:C,ExportSpecifier:C,Literal:function(e){if(K.raw&&void 0!==e.raw)ie.js+=e.raw;else if(null===e.value)ie.js+="null";else{var t=typeof e.value;"string"===t?ie.js+=y(e.value):"number"===t?ie.js+=c(e.value):"boolean"===t?ie.js+=e.value?"true":"false":ie.js+=d(e.value)}},GeneratorExpression:A,ComprehensionExpression:A,ComprehensionBlock:function(e){var t=e.left,r=void 0,n=I(e.right,Z.e5);r=t.type===$.VariableDeclaration?t.kind+ie.space+M(t.declarations[0],Z.s6):I(t,Z.e10),r=g(r,e.of?"of":"in"),ie.js+="for"+ie.optSpace+"("+g(r,n)+")"},RestElement:function(e){ie.js+="..."+e.argument.name},SpreadElement:function(e){var t=e.argument;ie.js+="...",se[t.type](t,Z.e4)},TaggedTemplateExpression:function(e,t){var r=e.tag,n=e.quasi,o=Y.TaggedTemplate<t.precedence;o&&(ie.js+="("),se[r.type](r,Z.e11(t.allowCall)),se[n.type](n,Z.e12),o&&(ie.js+=")")},TemplateElement:function(e){ie.js+=e.value.raw},TemplateLiteral:function(e){var t=e.quasis,r=e.expressions,n=t.length,o=n-1;ie.js+="`";for(var i=0;i<n;++i){var s=t[i];if(se[s.type](s,Z.e13),i!==o){var a=r[i];ie.js+="${"+ie.optSpace,se[a.type](a,Z.e5),ie.js+=ie.optSpace+"}"}}ie.js+="`"},Super:function(){ie.js+="super"}},ne=/^{|^class(?:\s|{)|^function(?:\s|\*|\()/,oe={BlockStatement:function(e,t){var r=e.body,n=r.length,o=n-1,i=v();ie.js+="{"+ie.newline;for(var s=0;s<n;s++){var a=r[s];ie.js+=ie.indent,ae[a.type](a,Z.s1(t.functionBody,s===o)),ie.js+=ie.newline}ie.indent=i,ie.js+=ie.indent+"}"},BreakStatement:function(e,t){e.label?ie.js+="break "+e.label.name:ie.js+="break",!G&&t.semicolonOptional||(ie.js+=";")},ContinueStatement:function(e,t){e.label?ie.js+="continue "+e.label.name:ie.js+="continue",!G&&t.semicolonOptional||(ie.js+=";")},ClassBody:function(e){var t=e.body,r=t.length,n=r-1,o=v();ie.js+="{"+ie.newline;for(var i=0;i<r;i++){var s=t[i],a=s.type||$.Property;ie.js+=ie.indent,se[a](s,Z.e5),i!==n&&(ie.js+=ie.newline)}ie.indent=o,ie.js+=ie.newline+ie.indent+"}"},ClassDeclaration:function(e){var t=e.body,r=e.superClass,n="class "+e.id.name;if(r){var o=I(r,Z.e4);n+=ie.space+g("extends",o)}ie.js+=n+ie.optSpace,ae[t.type](t,Z.s2)},DirectiveStatement:function(e,t){K.raw&&e.raw?ie.js+=e.raw:ie.js+=m(e.directive),!G&&t.semicolonOptional||(ie.js+=";")},DoWhileStatement:function(e,t){var r=e.body,n=e.test,o=E(r)+M(r,Z.s7)+b(r),i=g("do",o);ie.js+=g(i,"while"+ie.optSpace+"("),se[n.type](n,Z.e5),ie.js+=")",!G&&t.semicolonOptional||(ie.js+=";")},CatchClause:function(e){var t=e.param,r=e.guard,n=e.body,o=v();ie.js+="catch"+ie.optSpace+"(",se[t.type](t,Z.e5),r&&(ie.js+=" if ",se[r.type](r,Z.e5)),ie.indent=o,ie.js+=")"+E(n),ae[n.type](n,Z.s7)},DebuggerStatement:function(e,t){ie.js+="debugger",!G&&t.semicolonOptional||(ie.js+=";")},EmptyStatement:function(){ie.js+=";"},ExportDeclaration:function(e,t){var r=e.specifiers,n=e.declaration,o=G||!t.semicolonOptional;if(e["default"]){var i=I(n,Z.e4);ie.js+=g("export default",i),o&&(ie.js+=";")}else if(r){var s="export";if(0===r.length)s+=ie.optSpace+"{"+ie.optSpace+"}";else if(r[0].type===$.ExportBatchSpecifier){var a=I(r[0],Z.e5);s=g(s,a)}else{var l=v(),u=r.length,c=u-1;s+=ie.optSpace+"{";for(var p=0;p<u;++p)s+=ie.newline+ie.indent,s+=I(r[p],Z.e5),p!==c&&(s+=",");ie.indent=l,s+=ie.newline+ie.indent+"}"}e.source?(ie.js+=g(s,"from"+ie.optSpace),se.Literal(e.source)):ie.js+=s,o&&(ie.js+=";")}else if(n){var i=M(n,Z.s4(!o));ie.js+=g("export",i)}},ExpressionStatement:function(e,t){var r=I(e.expression,Z.e5),n=ne.test(r)||q&&t.directiveContext&&e.expression.type===$.Literal&&"string"==typeof e.expression.value;n?ie.js+="("+r+")":ie.js+=r,!G&&t.semicolonOptional||(ie.js+=";")},ImportDeclaration:function(e,t){var r=e.specifiers,n="import",o=r.length;if(o){var i=!!r[0]["default"],s=i?1:0,a=o-1;if(i&&(n=g(n,r[0].id.name)),s<o){if(i&&(n+=","),n+=ie.optSpace+"{",s===a)n+=ie.optSpace+I(r[s],Z.e5)+ie.optSpace;else{for(var l=v(),u=s;u<o;u++)n+=ie.newline+ie.indent+I(r[u],Z.e5),u!==a&&(n+=",");ie.indent=l,n+=ie.newline+ie.indent}n+="}"+ie.optSpace}n=g(n,"from")}ie.js+=n+ie.optSpace,se.Literal(e.source),!G&&t.semicolonOptional||(ie.js+=";")},VariableDeclarator:function(e,t){var r=e.id,n=e.init,o=Z.e1(t.allowIn);n?(se[r.type](r,o),ie.js+=ie.optSpace+"="+ie.optSpace,se[n.type](n,o)):r.type===$.Identifier?ie.js+=r.name:se[r.type](r,o)},VariableDeclaration:function(e,t){var r=e.declarations,n=r.length,o=n>1?v():ie.indent,i=Z.s3(t.allowIn);ie.js+=e.kind;for(var s=0;s<n;s++){var a=r[s];ie.js+=0===s?ie.space:","+ie.optSpace,ae[a.type](a,i)}!G&&t.semicolonOptional||(ie.js+=";"),ie.indent=o},ThrowStatement:function(e,t){var r=I(e.argument,Z.e5);ie.js+=g("throw",r),!G&&t.semicolonOptional||(ie.js+=";")},TryStatement:function(e){var t=e.block,r=e.finalizer,n="try"+E(t)+M(t,Z.s7)+b(t),o=e.handlers||e.guardedHandlers;o&&(n=P(n,r,o)),e.handler&&(o=k(e.handler)?e.handler:[e.handler],n=P(n,r,o)),r&&(n=g(n,"finally"+E(r)),n+=M(r,Z.s7)),ie.js+=n},SwitchStatement:function(e){var t=e.cases,r=e.discriminant,n=v();if(ie.js+="switch"+ie.optSpace+"(",se[r.type](r,Z.e5),ie.js+=")"+ie.optSpace+"{"+ie.newline,ie.indent=n,t)for(var o=t.length,i=o-1,s=0;s<o;s++){var a=t[s];ie.js+=ie.indent,ae[a.type](a,Z.s4(s===i)),ie.js+=ie.newline}ie.js+=ie.indent+"}"},SwitchCase:function(e,t){var r=e.consequent,n=r[0],o=e.test,i=0,s=!G&&t.semicolonOptional,a=r.length,l=a-1,u=v();if(o){var c=I(o,Z.e5);ie.js+=g("case",c)+":"}else ie.js+="default:";for(a&&n.type===$.BlockStatement&&(i++,ie.js+=E(n),ae[n.type](n,Z.s7));i<a;i++){var p=r[i],d=i===l&&s;ie.js+=ie.newline+ie.indent,ae[p.type](p,Z.s4(d))}ie.indent=u},IfStatement:function(e,t){var r=e.consequent,n=e.test,o=v(),i=!G&&t.semicolonOptional;if(ie.js+="if"+ie.optSpace+"(",se[n.type](n,Z.e5),ie.js+=")",ie.indent=o,ie.js+=E(r),e.alternate){var s=M(r,Z.s7)+b(r),a=M(e.alternate,Z.s4(i));a=e.alternate.type===$.IfStatement?"else "+a:g("else",E(e.alternate)+a),ie.js+=g(s,a)}else ae[r.type](r,Z.s4(i))},ForStatement:function(e,t){var r=e.init,n=e.test,o=e.body,i=e.update,s=!G&&t.semicolonOptional,a=v();ie.js+="for"+ie.optSpace+"(",r?r.type===$.VariableDeclaration?ae[r.type](r,Z.s6):(se[r.type](r,Z.e14),ie.js+=";"):ie.js+=";",n&&(ie.js+=ie.optSpace,se[n.type](n,Z.e5)),ie.js+=";",i&&(ie.js+=ie.optSpace,se[i.type](i,Z.e5)),ie.js+=")",ie.indent=a,ie.js+=E(o),ae[o.type](o,Z.s4(s))},ForInStatement:function(e,t){O("in",e,t)},ForOfStatement:function(e,t){O("of",e,t)},LabeledStatement:function(e,t){var r=e.body,n=!G&&t.semicolonOptional,o=ie.indent;ie.js+=e.label.name+":"+E(r),r.type!==$.BlockStatement&&(o=v()),ae[r.type](r,Z.s4(n)),ie.indent=o},ModuleDeclaration:function(e,t){ie.js+="module"+ie.space+e.id.name+ie.space+"from"+ie.optSpace,se.Literal(e.source),!G&&t.semicolonOptional||(ie.js+=";")},Program:function(e){var t=e.body,r=t.length,n=r-1;V&&r>0&&(ie.js+="\n");for(var o=0;o<r;o++){var i=t[o];ie.js+=ie.indent,ae[i.type](i,Z.s5(!V&&o===n)),o!==n&&(ie.js+=ie.newline)}},FunctionDeclaration:function(e){var t=!!e.generator;e.async&&(ie.js+="async "),ie.js+=t?"function*"+ie.optSpace:"function"+ie.space,ie.js+=e.id.name,_(e)},ReturnStatement:function(e,t){var r=e.argument;if(r){var n=I(r,Z.e5);ie.js+=g("return",n)}else ie.js+="return";!G&&t.semicolonOptional||(ie.js+=";")},WhileStatement:function(e,t){var r=e.body,n=e.test,o=!G&&t.semicolonOptional,i=v();ie.js+="while"+ie.optSpace+"(",se[n.type](n,Z.e5),ie.js+=")",ie.indent=i,ie.js+=E(r),ae[r.type](r,Z.s4(o))},WithStatement:function(e,t){var r=e.body,n=e.object,o=!G&&t.semicolonOptional,i=v();ie.js+="with"+ie.optSpace+"(",se[n.type](n,Z.e5),ie.js+=")",ie.indent=i,ie.js+=E(r),ae[r.type](r,Z.s4(o))}},ie={js:"",newline:"\n",optSpace:" ",space:" ",indentUnit:"    ",indent:""},se=void 0,ae=oe}},"transform.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,r){return{start:e.originStart,end:e.originEnd,index:Array.isArray(t[r])?t[r].indexOf(e):-1,parent:t,key:r}}function i(e,t,r,n,o){var i=t.type===h.Syntax.NewExpression,s=i&&!e.newExpressionAncestor;return{hasTransformedAncestor:e.hasTransformedAncestor||o,newExpressionAncestor:s?t:e.newExpressionAncestor,newExpressionAncestorParent:s?r:e.newExpressionAncestorParent,newExpressionAncestorKey:s?n:e.newExpressionAncestorKey}}function s(e,t,r){for(var n in e)if(y.call(e,n)){var o=e[n];if("[object Array]"===m.call(o))for(var i=0;i<o.length;i++)u(o[i],e,n,t,r);else u(o,e,n,t,r)}}function a(e){return void 0!==e.originStart&&void 0!==e.originEnd}function l(e,t,r,n,i){var s=e.hasTransformedAncestor;s|=e.newExpressionAncestor&&a(e.newExpressionAncestor),s||(e.newExpressionAncestor?((0,f["default"])(e.newExpressionAncestor,e.newExpressionAncestor,e.newExpressionAncestorParent,e.newExpressionAncestorKey),t.push(o(e.newExpressionAncestor,e.newExpressionAncestorParent,e.newExpressionAncestorKey))):t.push(o(r,n,i)))}function u(e,t,r,n,o,c){if(o=o||{},n=n||[],!e||"object"!=typeof e)return null;var d=!1;if(a(e)&&!c)l(o,n,e,t,r),d=!0;else{var h=p["default"][e.type];if(h)for(var m=0;m<h.length;m++){var y=h[m];if(y.condition(e,t)){var g=y.run(e,t,r);if(g){if((0,f["default"])(e,g,t,r),d=!0,l(o,n,g,t,r),y.nodeReplacementRequireTransform){var v=i(o,g,t,r,d);return u(g,t,r,n,v,!0),n}break}}}}var E=i(o,e,t,r,d);return s(e,n,E),n}e.__esModule=!0,e["default"]=u;var c=r("./transformers"),p=n(c),d=r("./transformers/replace-node"),f=n(d),h=r("./tools/esotope"),m=Object.prototype.toString,y=Object.prototype.hasOwnProperty;t.exports=e["default"]},transformers:{"computed-property-get.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope"),i=r("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.MemberExpression],condition:function(e,t){return!!e.computed&&(!(e.property.type===o.Syntax.Literal&&!(0,i.shouldInstrumentProperty)(e.property.value))&&(e.object.type!==o.Syntax.Super&&((t.type!==o.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==o.Syntax.UnaryExpression||"delete"!==t.operator)&&((t.type!==o.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==o.Syntax.CallExpression||t.callee!==e)&&((t.type!==o.Syntax.NewExpression||t.callee!==e)&&(t.type!==o.Syntax.ForInStatement||t.left!==e))))))))},run:function(e){return(0,n.createComputedPropertyGetWrapper)(e.property,e.object)}},t.exports=e["default"]},"computed-property-set.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope"),i=r("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){var t=e.left;return(t.type!==o.Syntax.MemberExpression||t.object.type!==o.Syntax.Super)&&(!("="!==e.operator||t.type!==o.Syntax.MemberExpression||!t.computed)&&(t.property.type!==o.Syntax.Literal||(0,i.shouldInstrumentProperty)(t.property.value)))},run:function(e){return(0,n.createComputedPropertySetWrapper)(e.left.property,e.left.object,e.right)}},t.exports=e["default"]},"concat-operator.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){return"+="===e.operator},run:function(e){return(0,n.createExpandedConcatOperation)(e.left,e.right)}},t.exports=e["default"]},"eval-bind.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../node-builder"),i=r("../tools/esotope"),s=r("./replace-node"),a=n(s);e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[i.Syntax.CallExpression],condition:function(e){if(e.callee.type===i.Syntax.MemberExpression&&"bind"===e.callee.property.name){var t=e.callee.object;if(t.type===i.Syntax.MemberExpression&&"eval"===(t.property.value||t.property.name))return!0;if("eval"===t.name)return!0}return!1},run:function(e){var t=(0,o.createGetEvalMethCall)(e.callee.object);return(0,a["default"])(e.callee.object,t,e.callee,"object"),null}},t.exports=e["default"]},"eval-call-apply.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../node-builder"),i=r("../tools/esotope"),s=r("./replace-node"),a=n(s),l=/^(call|apply)$/;e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[i.Syntax.CallExpression],condition:function(e){if(e.arguments.length<2)return!1;if(e.callee.type===i.Syntax.MemberExpression&&l.test(e.callee.property.name)){var t=e.callee.object;if(t.type===i.Syntax.MemberExpression&&"eval"===(t.property.value||t.property.name))return!0;if("eval"===t.name)return!0}return!1},run:function(e){var t="apply"===e.callee.property.name,r=(0,o.createProcessScriptMethCall)(e.arguments[1],t);return(0,a["default"])(e.arguments[1],r,e,"arguments"),null}},t.exports=e["default"]},"eval-get.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../instruction"),i=n(o),s=r("../node-builder"),a=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.Identifier],condition:function(e,t){return"eval"===e.name&&((t.type!==a.Syntax.CallExpression||t.callee!==e)&&(t.type!==a.Syntax.MethodDefinition&&(t.type!==a.Syntax.ClassDeclaration&&(t.type!==a.Syntax.MemberExpression&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration||t.id!==e)&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration&&t.type!==a.Syntax.ArrowFunctionExpression||t.params.indexOf(e)===-1)&&((t.type!==a.Syntax.Property||t.key!==e)&&((t.type!==a.Syntax.AssignmentExpression&&t.type!==a.Syntax.AssignmentPattern||t.left!==e)&&((t.type!==a.Syntax.VariableDeclarator||t.id!==e)&&((t.type!==a.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getEval)&&t.type!==a.Syntax.RestElement)))))))))))},run:s.createGetEvalMethCall},t.exports=e["default"]},"eval.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../node-builder"),i=r("./replace-node"),s=n(i),a=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.CallExpression],condition:function(e){return!!e.arguments.length&&(e.callee.type===a.Syntax.Identifier&&"eval"===e.callee.name||e.callee.type===a.Syntax.MemberExpression&&"eval"===(e.callee.property.name||e.callee.property.value))},run:function(e){var t=(0,o.createProcessScriptMethCall)(e.arguments[0]);return(0,s["default"])(e.arguments[0],t,e,"arguments"),null}},t.exports=e["default"]},"for-in.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../tools/esotope"),i=r("../node-builder"),s=r("./replace-node"),a=n(s);e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[o.Syntax.ForInStatement],condition:function(e){return e.left.type===o.Syntax.MemberExpression},run:function(e){var t=(0,i.createTempVarIdentifier)(),r=(0,i.createVarDeclaration)(t),n=(0,i.createAssignmentExprStmt)(e.left,t);return e.body.type!==o.Syntax.BlockStatement?(0,a["default"])(e.body,(0,i.createBlockExprStmt)([n,e.body]),e,"body"):(0,a["default"])(null,n,e.body,"body"),(0,a["default"])(e.left,r,e,"left"),null}},t.exports=e["default"]},"index.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("./computed-property-get"),i=n(o),s=r("./computed-property-set"),a=n(s),l=r("./concat-operator"),u=n(l),c=r("./eval"),p=n(c),d=r("./eval-bind"),f=n(d),h=r("./eval-call-apply"),m=n(h),y=r("./eval-get"),g=n(y),v=r("./window-eval-get"),E=n(v),b=r("./post-message-get"),S=n(b),w=r("./window-post-message-get"),_=n(w),x=r("./post-message-call-apply-bind"),T=n(x),C=r("./for-in"),A=n(C),P=r("./location-get"),O=n(P),I=r("./location-property-get"),M=n(I),N=r("./location-set"),D=n(N),L=r("./property-get"),j=n(L),k=r("./property-set"),R=n(k),U=r("./method-call"),H=n(U),F=r("./js-protocol-last-expression"),B=n(F),W=[i["default"],a["default"],u["default"],p["default"],f["default"],m["default"],g["default"],E["default"],S["default"],_["default"],T["default"],A["default"],O["default"],M["default"],D["default"],j["default"],R["default"],H["default"],B["default"]];e["default"]=function(){for(var e={},t=0;t<W.length;t++)for(var r=W[t],n=0;n<r.nodeTypes.length;n++){var o=r.nodeTypes[n];e[o]||(e[o]=[]),e[o].push(r)}return e}(),t.exports=e["default"]},"js-protocol-last-expression.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.ExpressionStatement],condition:function(e,t){return t.wrapLastExprWithProcessHtml&&t.body[t.body.length-1]===e},run:function(e,t){return t.wrapLastExprWithProcessHtml=!1,(0,n.createHtmlProcessorWrapper)(e)}},t.exports=e["default"]},"location-get.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../node-builder"),i=r("../instruction"),s=n(i),a=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.Identifier],condition:function(e,t){return"location"===e.name&&((t.type!==a.Syntax.VariableDeclarator||t.id!==e)&&((t.type!==a.Syntax.AssignmentExpression&&t.type!==a.Syntax.AssignmentPattern||t.left!==e)&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration||t.id!==e)&&(t.type!==a.Syntax.MemberExpression&&((t.type!==a.Syntax.Property||t.key!==e)&&((t.type!==a.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration&&t.type!==a.Syntax.ArrowFunctionExpression||t.params.indexOf(e)===-1)&&((t.type!==a.Syntax.CallExpression||t.callee.name!==s["default"].getLocation)&&(t.type!==a.Syntax.MethodDefinition&&(t.type!==a.Syntax.ClassDeclaration&&t.type!==a.Syntax.RestElement))))))))))},run:function(){return(0,o.createLocationGetWrapper)()}},t.exports=e["default"]},"location-property-get.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../node-builder"),i=r("../tools/esotope"),s=r("./replace-node"),a=n(s);e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[i.Syntax.MemberExpression],condition:function(e,t){return(t.type!==i.Syntax.ForInStatement||t.left!==e)&&"location"===e.object.name},run:function(e){return(0,a["default"])(e.object,(0,o.createLocationGetWrapper)(),e,"object"),null}},t.exports=e["default"]},"location-set.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){return"="===e.operator&&e.left.type===o.Syntax.Identifier&&"location"===e.left.name},run:function(e,t,r){var i="arguments"!==r&&"consequent"!==r&&"alternate"!==r&&(t.type!==o.Syntax.SequenceExpression||t.expressions[0]===e);return(0,n.createLocationSetWrapper)(e.right,i)}},t.exports=e["default"]},"method-call.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope"),i=r("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.CallExpression],condition:function(e){var t=e.callee;return t.type===o.Syntax.MemberExpression&&(t.computed?t.property.type!==o.Syntax.Literal||(0,i.shouldInstrumentMethod)(t.property.value):(0,i.shouldInstrumentMethod)(t.property.name))},run:function(e){var t=e.callee,r=t.computed?t.property:(0,n.createStringLiteral)(t.property.name);return(0,n.createMethCallWrapper)(t.object,r,e.arguments)}},t.exports=e["default"]},"post-message-call-apply-bind.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../node-builder"),i=r("../tools/esotope"),s=r("./replace-node"),a=n(s),l=/^(call|apply|bind)$/;e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[i.Syntax.CallExpression],condition:function(e){if(e.callee.type===i.Syntax.MemberExpression&&l.test(e.callee.property.name)){if(e.arguments.length<2&&"bind"!==e.callee.property.name)return!1;var t=e.callee.object;if(t.type===i.Syntax.MemberExpression&&"postMessage"===(t.property.value||t.property.name))return!0;if("postMessage"===t.name)return!0}return!1},run:function(e){var t=(0,o.createGetPostMessageMethCall)(e.callee.object);return(0,a["default"])(e.callee.object,t,e.callee,"object"),null}},t.exports=e["default"]},"post-message-get.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../instruction"),i=n(o),s=r("../node-builder"),a=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.Identifier],condition:function(e,t){return"postMessage"===e.name&&(t.type!==a.Syntax.MemberExpression&&(t.type!==a.Syntax.MethodDefinition&&(t.type!==a.Syntax.ClassDeclaration&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration||t.id!==e)&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration&&t.type!==a.Syntax.ArrowFunctionExpression||t.params.indexOf(e)===-1)&&((t.type!==a.Syntax.Property||t.key!==e)&&((t.type!==a.Syntax.AssignmentExpression&&t.type!==a.Syntax.AssignmentPattern||t.left!==e)&&((t.type!==a.Syntax.VariableDeclarator||t.id!==e)&&((t.type!==a.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getPostMessage&&(t.callee.name!==i["default"].callMethod||t.arguments[1]!==e))&&t.type!==a.Syntax.RestElement))))))))))},run:s.createGetPostMessageMethCall},t.exports=e["default"]},"property-get.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope"),i=r("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.MemberExpression],condition:function(e,t){return!e.computed&&(!!(0,i.shouldInstrumentProperty)(e.property.name)&&(e.object.type!==o.Syntax.Super&&((t.type!==o.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==o.Syntax.UnaryExpression||"delete"!==t.operator)&&((t.type!==o.Syntax.CallExpression||t.callee!==e)&&((t.type!==o.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==o.Syntax.NewExpression||t.callee!==e)&&(t.type!==o.Syntax.ForInStatement||t.left!==e))))))))},run:function(e){return(0,n.createPropertyGetWrapper)(e.property.name,e.object)}},t.exports=e["default"]},"property-set.js":function(e,t,r){e.__esModule=!0;var n=r("../node-builder"),o=r("../tools/esotope"),i=r("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){return(e.left.type!==o.Syntax.MemberExpression||e.left.object.type!==o.Syntax.Super)&&("="===e.operator&&e.left.type===o.Syntax.MemberExpression&&!e.left.computed&&e.left.property.type===o.Syntax.Identifier&&(0,i.shouldInstrumentProperty)(e.left.property.name))},run:function(e){return(0,n.createPropertySetWrapper)(e.left.property.name,e.left.object,e.right)}},t.exports=e["default"]},"replace-node.js":function(e,t,r){function n(e,t,r,n){if(Array.isArray(r[n]))if(e){var o=r[n].indexOf(e);r[n][o]=t}else r[n].unshift(t);else r[n]=t;if(e)t.originStart=t.start=e.start,t.originEnd=t.end=e.end;else{var i=parseInt(r.start,10)+1;t.originStart=t.originEnd=i}}e.__esModule=!0,e["default"]=n,t.exports=e["default"]},"window-eval-get.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../instruction"),i=n(o),s=r("../node-builder"),a=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.MemberExpression],condition:function(e,t){return(t.type!==a.Syntax.MemberExpression||t.property!==e&&t.object!==e)&&((t.type!==a.Syntax.CallExpression||t.callee!==e)&&((t.type!==a.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getEval)&&(e.property.type===a.Syntax.Identifier&&"eval"===e.property.name||e.property.type===a.Syntax.Literal&&"eval"===e.property.value))));
},run:s.createGetEvalMethCall},t.exports=e["default"]},"window-post-message-get.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=r("../instruction"),i=n(o),s=r("../node-builder"),a=r("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.MemberExpression],condition:function(e,t){return(t.type!==a.Syntax.MemberExpression||t.property!==e&&t.object!==e)&&((t.type!==a.Syntax.CallExpression||t.callee!==e)&&((t.type!==a.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getPostMessage)&&(e.property.type===a.Syntax.Identifier&&"postMessage"===e.property.name||e.property.type===a.Syntax.Literal&&"postMessage"===e.property.value))))},run:s.createGetPostMessageMethCall},t.exports=e["default"]}}},"style.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=r("../utils/regexp-escape"),s=n(i),a=r("../processing/dom/internal-attributes"),l=n(a),u=r("../utils/url"),c=/#\s*sourceMappingURL\s*=\s*[^\s]+(\s|\*\/)/i,p=/(url\s*\(\s*)(?:(')([^\s']*)(')|(")([^\s"]*)(")|([^\s)]*))(\s*\))|(@import\s+)(?:(')([^\s']*)(')|(")([^\s"]*)("))/g,d="/*hammerhead|stylesheet|start*/",f="/*hammerhead|stylesheet|end*/",h=/\s*:\s*hover(\W)/gi,m=new RegExp("\\["+l["default"].hoverPseudoClass+"\\](\\W)","ig"),y=new RegExp("\\s*"+(0,s["default"])(d),"gi"),g=new RegExp("\\s*"+(0,s["default"])(d)+"\n?|"+("\n?"+(0,s["default"])(f)+"\\s*"),"gi"),v=function(){function e(){o(this,e),this.STYLESHEET_PROCESSING_START_COMMENT=d,this.STYLESHEET_PROCESSING_END_COMMENT=f}return e.prototype.process=function(e,t,r){if(!e||"string"!=typeof e||y.test(e))return e;var n=r?d+"\n":"",o=r?"\n"+f:"";return e=e.replace(h,"["+l["default"].hoverPseudoClass+"]$1"),e=e.replace(c,"$1"),n+this._replaceStylsheetUrls(e,t)+o},e.prototype.cleanUp=function(e,t){return"string"!=typeof e?e:(e=e.replace(m,":hover$1").replace(g,""),this._replaceStylsheetUrls(e,function(e){var r=t(e);return r?r.destUrl:e}))},e.prototype._replaceStylsheetUrls=function(e,t){return e.replace(p,function(e,r,n,o,i,s,a,l,c,p,d,f,h,m,y,g,v){var E=r||d,b=n||s||f||y||"",S=o||a||c||h||g,w=i||l||m||v||"";p=p||"";var _=(0,u.isSpecialPage)(S)?S:t(S);return S?E+b+_+w+p:e})},e}();e["default"]=new v,t.exports=e["default"]}},"request-pipeline":{xhr:{"authorization.js":function(e,t,r){e.__esModule=!0,e["default"]={valuePrefix:"hammerhead|prefix|by-client",headers:["authorization","authentication-info","proxy-authenticate","proxy-authorization"]},t.exports=e["default"]},"headers.js":function(e,t,r){e.__esModule=!0,e["default"]={requestMarker:"x-hammerhead|xhr|request-marker",withCredentials:"x-hammerhead|xhr|with-credentials",origin:"x-hammerhead|xhr|origin",fetchRequestCredentials:"x-hammerhead|fetch|request-credentials"},t.exports=e["default"]},"same-origin-check-failed-status-code.js":function(e,t,r){e.__esModule=!0;var n=222;e["default"]=n,t.exports=e["default"]}}},session:{"command.js":function(e,t,r){e.__esModule=!0;var n={getUploadedFiles:"hammerhead|command|get-uploaded-files",setCookie:"hammerhead|command|set-cookie",uploadFiles:"hammerhead|command|upload-files"};e["default"]=n,t.exports=e["default"]},"cookie-limit.js":function(e,t,r){e.__esModule=!0;var n=4096;e["default"]=n,t.exports=e["default"]}},"shadow-ui":{"class-name.js":function(e,t,r){e.__esModule=!0;var n="-hammerhead-shadow-ui";e["default"]={postfix:n,charset:"charset"+n,script:"script"+n,selfRemovingScript:"self-removing-script"+n,uiStylesheet:"ui-stylesheet"+n},t.exports=e["default"]}},utils:{"cookie.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){return e.sid===t.sid&&e.key===t.key&&e.domain===t.domain&&e.path===t.path}function i(e){for(var t=[],r=[],n=0;n<e.length;n++){for(var i=n+1;i<e.length;i++)if(o(e[n],e[i])){if(e[n].lastAccessed>e[i].lastAccessed){var s=e[n];e[n]=e[i],e[i]=s}t.push(e[n]);break}i===e.length&&r.push(e[n])}return{outdated:t,actual:r}}function s(e){return(e.isServerSync?S.server:"")+(e.isClientSync?S.client:"")+(e.isWindowSync?S.window:"")}function a(e){var t=s(e),r=encodeURIComponent(e.key),n=encodeURIComponent(e.domain),o=encodeURIComponent(e.path),i="Infinity"!==e.expires?e.expires.getTime().toString(g):"",a=e.lastAccessed.getTime().toString(g);return t+"|"+e.sid+"|"+r+"|"+n+"|"+o+"|"+i+"|"+a}function l(e){for(var t=e?e.split(";"):"",r=[],n=0;n<t.length;n++){var o=t[n],s=p((0,y["default"])(o));s&&r.push(s)}return i(r)}function u(e){e.syncKey=e.syncKey||a(e),e.cookieStr=e.cookieStr||e.syncKey+"="+e.value}function c(e){return e.cookieStr?e.cookieStr+";path=/":a(e)+"="+e.value+";path=/"}function p(e){var t=b.exec(e),r=t[1],n=t[2],o=void 0!==r&&void 0!==n&&r.split("|");return o&&o.length!==E?null:{isServerSync:o[0].indexOf(S.server)>-1,isClientSync:o[0].indexOf(S.client)>-1,isWindowSync:o[0].indexOf(S.window)>-1,sid:o[1],key:decodeURIComponent(o[2]),domain:decodeURIComponent(o[3]),path:decodeURIComponent(o[4]),expires:o[5]?new Date(parseInt(o[5],g)):"Infinity",lastAccessed:new Date(parseInt(o[6],g)),syncKey:r,value:n,cookieStr:e}}function d(e,t){"server"in t&&(e.isServerSync=t.server),"client"in t&&(e.isClientSync=t.client),"window"in t&&(e.isWindowSync=t.window);var r=s(e);e.syncKey=e.syncKey.replace(w,r),e.cookieStr=e.cookieStr.replace(w,r)}function f(e,t){return t.isServerSync===e.isServerSync&&t.sid===e.sid&&t.key===e.key&&t.domain===e.domain&&t.path===e.path&&t.lastAccessed>e.lastAccessed}function h(e){return e.syncKey+v}e.__esModule=!0,e.SYNCHRONIZATION_TYPE=void 0,e.parseClientSyncCookieStr=l,e.prepareSyncCookieProperties=u,e.formatSyncCookie=c,e.parseSyncCookie=p,e.changeSyncType=d,e.isOutdatedSyncCookie=f,e.generateDeleteSyncCookieStr=h;var m=r("./string-trim"),y=n(m),g=36,v="=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT",E=7,b=/(?:^([^=]+)=([\s\S]*))?/,S=e.SYNCHRONIZATION_TYPE={server:"s",client:"c",window:"w"},w=new RegExp("^["+S.server+S.client+S.window+"]+")},"create-self-removing-script.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e["default"]=function(e){return('\n        <script class="'+i["default"].selfRemovingScript+'">\n            (function () {\n                '+e+"\n\n                var currentScript = document.currentScript;\n                var scriptsLength;\n                var scripts;\n\n                /* NOTE: IE11 doesn't support the 'currentScript' property */\n                if (!currentScript) {\n                    var hammerhead;\n\n                    try {\n                        hammerhead = parent[\""+a["default"].hammerhead+'"] || window["'+a["default"].hammerhead+'"];\n                    }\n                    catch (e) {\n                        hammerhead = window["'+a["default"].hammerhead+'"];\n                    }\n                    \n                    if (hammerhead) {\n                        try {\n                            scripts       = hammerhead.nativeMethods.documentScriptsGetter.call(document);\n                            scriptsLength = hammerhead.nativeMethods.htmlCollectionLengthGetter.call(scripts);\n                        }\n                        catch (e) {}\n                    }\n\n                    scripts       = scripts || document.scripts;\n                    scriptsLength = scriptsLength !== void 0 ? scriptsLength : scripts.length;\n                    currentScript = scripts[scriptsLength - 1];\n                }\n\n                currentScript.parentNode.removeChild(currentScript);\n            })();\n        </script>\n    ').replace(/\n\s*|\/\*[\S\s]*?\*\//g,"")};var o=r("../shadow-ui/class-name"),i=n(o),s=r("../processing/dom/internal-properties"),a=n(s);t.exports=e["default"]},"get-bom.js":function(e,t,r){e.__esModule=!0,e["default"]=function(e){var t=e.match(n);return t?t[0]:null};var n=/^(\xEF\xBB\xBF|\xFE\xFF|\xFF\xFE|\x00\x00\xFE\xFF|\xFF\xFE\x00\x00|\x2B\x2F\x76\x38|\x2B\x2F\x76\x39|\x2B\x2F\x76\x2B|\x2B\x2F\x76\x2F|\xF7\x64\x4C|\xDD\x73\x66\x73|\x0E\xFE\xFF|\xFB\xEE\x28|\x84\x31\x95\x33)/;t.exports=e["default"]},"get-storage-key.js":function(e,t,r){function n(e,t){return o+e+"|"+t}e.__esModule=!0,e["default"]=n;var o="hammerhead|storage-wrapper|";t.exports=e["default"]},"regexp-escape.js":function(e,t,r){e.__esModule=!0,e["default"]=function(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")},t.exports=e["default"]},"string-trim.js":function(e,t,r){e.__esModule=!0,e["default"]=function(e){return"string"==typeof e?e.replace(/(^\s+)|(\s+$)/g,""):e},t.exports=e["default"]},"url.js":function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e?{isIframe:/i/.test(e),isForm:/f/.test(e),isScript:/s/.test(e),isEventSource:/e/.test(e),isHtmlImport:/h/.test(e),isWebSocket:/w/.test(e)}:{isIframe:!1,isForm:!1,isScript:!1,isEventSource:!1,isHtmlImport:!1,isWebSocket:!1}}function i(e){return e=e||{},e.isIframe||e.isForm||e.isScript||e.isEventSource||e.isHtmlImport||e.isWebSocket?[e.isIframe?"i":"",e.isForm?"f":"",e.isScript?"s":"",e.isEventSource?"e":"",e.isHtmlImport?"h":"",e.isWebSocket?"w":""].join(""):null}function s(e,t){if(e=e.replace(/^www./i,""),t=t.replace(/^www./i,""),e===t)return!0;var r=t.lastIndexOf(e);return"."===t[r-1]&&t.length===r+e.length}function a(e,t,r){if(!t)return!0;var n=m(e),o=m(t),i=f(e),a=i?i.destResourceInfo:n,l=!o.host;if(l||o.host===n.host&&o.protocol===n.protocol)return!0;if(a){var u=!a.port&&!o.port||a.port&&a.port.toString()===o.port;if(a.protocol===o.protocol&&u){if(a.hostname===o.hostname)return!0;var c=s(a.hostname,o.hostname)||s(o.hostname,a.hostname);return!r&&c}}return!1}function l(e){var t=m(e),r="about:"===t.protocol?"":"//";return(t.protocol+r+t.host).toLowerCase()+t.partAfterHost}function u(e){return null===e&&/iPad|iPhone/i.test(window.navigator.userAgent)?"":String(e).replace(/\n|\t/g,"")}function c(e,t){var r=[t.sessionId];t.resourceType&&r.push(t.resourceType),t.charset&&r.push(t.charset.toLowerCase()),t.reqOrigin&&r.push(t.reqOrigin),r=r.join(B);var n=t.proxyProtocol||"http:";return n+"//"+t.proxyHostname+":"+t.proxyPort+"/"+r+"/"+l(e)}function p(e){return v({protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port})}function d(e){var t=e.split(B);if(!t.length)return null;var r=t[0],n=t[1]||null,i=t[2]||null,s={sessionId:r,resourceType:n};if(n&&i){var a=o(n);a.isScript?s.charset=i:a.isWebSocket&&(s.reqOrigin=decodeURIComponent(i))}return s}function f(e){var t=m(e);if(!t.partAfterHost)return null;var r=t.partAfterHost.match(k);if(!r)return null;var n=d(r[1]);if(!n)return null;var o=r[2],i=o.replace(/#[\S\s]*$/,"");if(!w(i)&&!H.test(o))return null;var s=w(i)?{protocol:"about:",host:"",hostname:"",port:"",partAfterHost:""}:m(r[2]);return{destUrl:o,destResourceInfo:s,partAfterHost:t.partAfterHost,proxy:{hostname:t.hostname,port:t.port},sessionId:n.sessionId,resourceType:n.resourceType,charset:n.charset,reqOrigin:n.reqOrigin}}function h(e){return e.replace(j,"")}function m(e){var t={};if(e=b(e),!e)return t;e=(0,I["default"])(e);var r=!1,n=e.replace(M,function(e,r,n){return t.protocol=r,n}).replace(N,function(){return r=!0,""});return t.protocol||r?(t.partAfterHost=n.replace(D,function(e,r,n){return t.host=r,t.port="",n}),t.hostname=t.host?t.host.replace(L,function(e,r){return t.port=r,""}):"",t):(t.partAfterHost=e,t)}function y(e){e=(0,I["default"])(e||"");var t=F.test(e);if(t)return!1;var r=e.match(M);return!r||H.test(r[0])}function g(e,t){if(t=t||c,y(e)){var r=t(e),n=f(r);return n?v(n.destResourceInfo):e}return e}function v(e){if(!("file:"===e.protocol||e.host||e.hostname&&e.port))return e.partAfterHost;var t=e.protocol||"";return t+="//",(e.username||e.password)&&(t+=e.username+":"+e.password+"@"),e.host?t+=e.host:(t+=e.hostname,e.port&&(t+=":"+e.port)),e.partAfterHost&&(t+=e.partAfterHost),t}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.match(U)||t.match(U)?e.replace(/^(file:)?\/+(\/\/\/.*$)/i,"$1$2").replace(/^(file:)?\/*([A-Za-z]):/i,"$1///$2:"):e.replace(/^(https?:)?\/+(\/\/.*$)/i,"$1$2")}function b(e){return E(u(e))}function S(e,t){if(!T(t))return t;var r=W.test(e),n=W.test(t);return r&&!n?t+="/":e&&!r&&n&&(t=t.replace(W,"")),t}function w(e){return G.indexOf(e)!==-1}function _(e){var t=m(e);return"file:"!==t.protocol&&!t.host}function x(e){var t=parseInt(e,10);return t>0&&t<=65535}function T(e){var t=m(e);return"file:"===t.protocol||t.hostname&&(!t.port||x(t.port))}function C(e){var t=m(e);return!t.partAfterHost&&R.test(t.protocol)?e+"/":e}function A(e){var t=m(e),r="https:"===t.protocol&&t.port===q||"http:"===t.protocol&&t.port===V;return r?(t.host=t.hostname,t.port="",v(t)):e}function P(e){return e=A(e),e=C(e)}e.__esModule=!0,e.HTTPS_DEFAULT_PORT=e.HTTP_DEFAULT_PORT=e.SPECIAL_PAGES=e.TRAILING_SLASH_RE=e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR=e.HASH_RE=e.SUPPORTED_PROTOCOL_RE=void 0,e.parseResourceType=o,e.getResourceTypeString=i,e.isSubDomain=s,e.sameOriginCheck=a,e.getURLString=u,e.getProxyUrl=c,e.getDomain=p,e.parseProxyUrl=f,e.getPathname=h,e.parseUrl=m,e.isSupportedProtocol=y,e.resolveUrlAsDest=g,e.formatUrl=v,e.correctMultipleSlashes=E,e.processSpecialChars=b,e.ensureTrailingSlash=S,e.isSpecialPage=w,e.isRelativeUrl=_,e.isValidUrl=T,e.ensureOriginTrailingSlash=C,e.omitDefaultPort=A,e.prepareUrl=P;var O=r("./string-trim"),I=n(O),M=/^([\w-]+?:)(\/\/|[^\\\/]|$)/,N=/^(\/\/)/,D=/^(.*?)(\/|%|\?|;|#|$)/,L=/:([0-9]*)$/,j=/(\?.+|#[^#]*)$/,k=/^\/([^\/]+?)\/([\S\s]+)$/,R=/^(?:https?):/,U=/^file:/i,H=e.SUPPORTED_PROTOCOL_RE=/^(?:https?|file):/i,F=e.HASH_RE=/^#/,B=e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR="!",W=e.TRAILING_SLASH_RE=/\/$/,G=e.SPECIAL_PAGES=["about:blank","about:error"],V=e.HTTP_DEFAULT_PORT="80",q=e.HTTPS_DEFAULT_PORT="443"}}}}})("testcafe-hammerhead/src/client/index")}();